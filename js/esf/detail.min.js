"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),DetailController=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));$(".lazy").lazyload({placeholder:e.staticDomain+"/wkh5_fe/images/common/loading.jpg"}),e.addListenerToDownloadApp(),$(".download-app .download").click(function(){nativeSchema.loadSchema({schema:"external_call/parameter?t=0&bt=1&houseId="+$("#houseId").val()+"&systemHouseType=1",protocal:"wkzf",loadWaiting:"1500",failUrl:"https://m.wkzf.com/download/transit?from=esfDetail",apkInfo:{PKG:"com.wukong.ua",CATEGORY:"android.intent.category.DEFAULT",ACTION:"android.intent.action.VIEW"}})}),e.addListenerToAssistant(),e.fiveLine();var a=$("#estateName").attr("data-encryptsubestateid"),o=e;e.request(e.apiUrl.community.chart,{subEstateId:a},{successCallback:function(e){if(1==e.status){var t=e,a=o.recombineM(t.data);o.echartFun(a)}}});var n=e;return require(["../components/album.min","../components/bigdata.min"],function(e,t){t.init(o),t.bigData({pageName:"1067",pageParam:{house_id:$("#estateName").attr("data-houseid"),boutique:$("#estateName").attr("data-boutique")},channel:n.GetRequest().channel||"",type:1})}),e}return _inherits(t,e),_createClass(t,[{key:"fiveLine",value:function(){$(".more").hide();var e=Math.round($(".base-info").height()/parseFloat($(".base-info").css("line-height")));e>5?($(".base-info").addClass("word-line"),$(".more").show()):($(".base-info").removeClass("word-line"),$(".more").hide()),$(".more").click(function(){$(".base-info").removeClass("word-line"),$(".more").hide()})}},{key:"recombineM",value:function(e){var t={monthList:[],seriesData:[]};return e&&e.forEach(function(e){var a=e.date.split("-")[1];0==a.indexOf("0")?t.monthList.push(a.charAt(1)+"月"):t.monthList.push(a+"月"),t.seriesData.push(e.unitPrice)}),t}},{key:"echartFun",value:function(e){var t=e.seriesData.sort(function(e,t){return parseFloat(e)-parseFloat(t)}),a=1e4*Math.ceil(t[t.length-1]/1e4+1),o=echarts.init(document.getElementById("main"),{width:"88%"}),n=this,i=$("#estateName").attr("data-houseid"),r=$("#estateName").attr("data-subestateid"),s={eventName:"1067014",eventParam:{house_id:i,estate_id:r},type:2},l={tooltip:{trigger:"item",triggerOn:"click",position:"top",backgroundColor:"#92A7C3",padding:4,textStyle:{color:"#fff",fontSize:"12"},formatter:function(e,t,a){var o=e.value+"元";return n.request(n.apiUrl.common.bigData,s,function(){}),o}},grid:{bottom:20,left:"3%",right:"10%",containLabel:!0},xAxis:{data:e.monthList,splitLine:{show:!1},axisTick:{show:!1},position:"bottom",type:"category",boundaryGap:!1,axisLine:{lineStyle:{color:"#979797"}},axisLabel:{interval:0,rotate:0,textStyle:{color:"#999",fontSize:12,fontFamily:"微软雅黑"}}},yAxis:{axisLine:{show:!1},splitLine:{show:!0,lineStyle:{color:["#979797"]}},axisTick:{show:!1},axisLabel:{inside:!1,textStyle:{color:"#999"},formatter:function(e,t){return 0==e?"":e/1e4+"万"}},min:0,max:a,splitNumber:4,interval:a/4},series:[{name:"销量",type:"line",lineStyle:{normal:{color:"#92A7C3"}},itemStyle:{normal:{color:"#92A7C3"},emphasis:{borderColor:"#92A7C3",borderWidth:2,color:"#92A7C3"}},data:e.seriesData}]};o.setOption(l)}},{key:"GetRequest",value:function(){var e=location.search,t={};if(e.indexOf("?")!==-1)for(var a=e.substr(1),o=a.split("&"),n=0;n<o.length;n++)t[o[n].split("=")[0]]=o[n].split("=")[1];return t}}]),t}(Controller);$(document).ready(function(){new DetailController});
//# sourceMappingURL=detail.min.js.map
