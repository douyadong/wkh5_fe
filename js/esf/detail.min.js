"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var o=0;o<t.length;o++){var a=t[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,o,a){return o&&e(t.prototype,o),a&&e(t,a),t}}(),DetailController=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));$(".lazy").lazyload({placeholder:e.staticDomain+"/wkh5_fe/images/common/loading.jpg"}),e.addListenerToDownloadApp(),e.addListenerToAssistant(),e.fiveLine();var o=$("#estateName").attr("data-encryptsubestateid"),a=e;return e.request(e.apiUrl.community.chart,{subEstateId:o},{successCallback:function(e){if(1==e.status){var t=e,o=a.recombineM(t.data);a.echartFun(o)}}}),require(["../components/album.min","../components/bigdata.min"],function(e,t){t.init(a),t.bigData({pageName:"1067",pageParam:{house_id:$("#estateName").attr("data-houseid"),boutique:$("#estateName").attr("data-boutique")},type:1})}),e}return _inherits(t,e),_createClass(t,[{key:"fiveLine",value:function(){$(".more").hide();var e=Math.round($(".base-info").height()/parseFloat($(".base-info").css("line-height")));e>5?($(".base-info").addClass("word-line"),$(".more").show()):($(".base-info").removeClass("word-line"),$(".more").hide()),$(".more").click(function(){$(".base-info").removeClass("word-line"),$(".more").hide()})}},{key:"recombineM",value:function(e){var t={monthList:[],seriesData:[]};return e&&e.forEach(function(e){var o=e.date.split("-")[1];0==o.indexOf("0")?t.monthList.push(o.charAt(1)+"月"):t.monthList.push(o+"月"),t.seriesData.push(e.unitPrice)}),t}},{key:"echartFun",value:function(e){var t=e.seriesData.sort(function(e,t){return parseFloat(e)-parseFloat(t)}),o=1e4*Math.ceil(t[t.length-1]/1e4+1),a=echarts.init(document.getElementById("main"),{width:"88%"}),i=this,n=$("#estateName").attr("data-houseid"),r=$("#estateName").attr("data-subestateid"),s={eventName:"1067014",eventParam:{house_id:n,estate_id:r},type:2},l={tooltip:{trigger:"item",triggerOn:"click",position:"top",backgroundColor:"#92A7C3",padding:4,textStyle:{color:"#fff",fontSize:"12"},formatter:function(e,t,o){var a=e.value+"元";return i.request(i.apiUrl.bigData,s,function(){}),a}},grid:{bottom:20,left:"3%",right:"10%",containLabel:!0},xAxis:{data:e.monthList,splitLine:{show:!1},axisTick:{show:!1},position:"bottom",type:"category",boundaryGap:!1,axisLine:{lineStyle:{color:"#979797"}},axisLabel:{interval:0,rotate:0,textStyle:{color:"#999",fontSize:12,fontFamily:"微软雅黑"}}},yAxis:{axisLine:{show:!1},splitLine:{show:!0,lineStyle:{color:["#979797"]}},axisTick:{show:!1},axisLabel:{inside:!1,textStyle:{color:"#999"},formatter:function(e,t){return 0==e?"":e/1e4+"万"}},min:0,max:o,splitNumber:4,interval:o/4},series:[{name:"销量",type:"line",lineStyle:{normal:{color:"#92A7C3"}},itemStyle:{normal:{color:"#92A7C3"},emphasis:{borderColor:"#92A7C3",borderWidth:2,color:"#92A7C3"}},data:e.seriesData}]};a.setOption(l)}}]),t}(Controller);$(document).ready(function(){new DetailController});
//# sourceMappingURL=detail.min.js.map
