{"version":3,"sources":["esf/detail.min.js"],"names":["DetailController","fiveLine","encryptsubestateid","$","attr","that","request","apiUrl","community","chart","subEstateId","successCallback","data","status","dataRes","echartData","recombineM","echartFun","require","Album","PreviewImage","hide","rowNum","Math","round","height","parseFloat","css","addClass","show","removeClass","click","monthList","seriesData","forEach","item","month","date","split","indexOf","push","charAt","unitPrice","sortArray","sort","a","b","maxPrice","ceil","length","myChart","echarts","init","document","getElementById","width","option","tooltip","trigger","triggerOn","position","backgroundColor","padding","textStyle","color","fontSize","formatter","grid","bottom","left","right","containLabel","xAxis","splitLine","axisTick","type","boundaryGap","axisLine","lineStyle","axisLabel","interval","rotate","fontFamily","yAxis","inside","value","index","min","max","splitNumber","series","name","normal","itemStyle","emphasis","borderColor","borderWidth","setOption","Controller","ready"],"mappings":"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","file":"detail.min.js","sourcesContent":["/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n 1. 项目名称：悟空找房h5\n 2. 页面名称：esf/detail(二手房-详情)\n 3. 作者：liyang@lifang.com\n -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n\n\nclass DetailController extends Controller {\n    constructor() {\n        super();\n        // 初始化\n         this.fiveLine();\n        // 获取小区加密Id\n        let  encryptsubestateid = $('#estateName').attr('data-encryptsubestateid');\n        // 请求接口\n         let that = this;\n         this.request(this.apiUrl.community.chart,{subEstateId:encryptsubestateid},{successCallback(data){\n             if (data.status == 1){\n                 let dataRes = data;\n                 let echartData =  that.recombineM(dataRes.data);\n                 that.echartFun(echartData) ;\n             }\n\n          }});\n        require(['../components/album.min','../components/preview-image.min'],function(Album, PreviewImage){\n            PreviewImage('.album');\n        });\n    }\n\n    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n    判断文本是否大于5行\n    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n    fiveLine(){\n        $('.more').hide();\n        let rowNum=Math.round($(\".base-info\").height()/parseFloat($(\".base-info\").css('line-height')));\n        if(rowNum > 5){\n            $(\".base-info\").addClass('word-line');\n            $('.more').show();\n        }else {\n            $(\".base-info\").removeClass('word-line');\n            $('.more').hide();\n        }\n        $('.more').click(function () {\n            $(\".base-info\").removeClass('word-line');\n            $('.more').hide();\n        });\n    }\n    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n    处理得到的数据的函数  处理月份和数据\n    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n    recombineM(data) {\n        let echartData = {\n            monthList: [],\n            seriesData: []\n        };\n        if (data) {\n            data.forEach((item) => {\n                let month = item.date.split('-')[1];\n                if (month.indexOf('0') == 0) {\n                    echartData.monthList.push(month.charAt(1)+'月')\n                } else {\n                    echartData.monthList.push(month+'月')\n                }\n                echartData.seriesData.push(item.unitPrice)\n            });\n        }\n        return echartData ;\n    }\n    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n   折线图函数异步操作\n   -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n    echartFun(echartData){\n        let sortArray = echartData.seriesData.sort(function(a, b) {\n            return parseFloat(a) - parseFloat(b);\n        });\n        let maxPrice = Math.ceil((sortArray[sortArray.length - 1] / 10000) + 1) * 10000;\n        let myChart = echarts.init(document.getElementById('main'),{ width: '88%' });\n        // 指定图表的配置项和数据\n        let option = {\n            tooltip: {      // 提示框\n                trigger: 'item',\n                triggerOn: 'click',\n                position: 'top',\n                backgroundColor: '#92A7C3',\n                padding: 4,\n                textStyle: {\n                    color: '#fff',\n                    fontSize: '12'\n                },\n                formatter: '{c}元'\n            },\n            grid: {\n                bottom: 20,\n                left: '5%',\n                right: '5%',\n                containLabel: true,\n            },\n            xAxis: {\n                data: echartData.monthList ,  // X坐标数据\n                splitLine: {show: false}, // 控制网格线是否显示\n                axisTick: {show: false},  // 去除x轴上的刻度线\n                position: 'bottom',\n                type: 'category',\n                boundaryGap: false,\n                axisLine: {\n                    lineStyle: {\n                        color: '#979797', // x轴颜色\n                    }\n                },\n                axisLabel: {\n                    interval: 0,\n                    rotate: 0, //60度角倾斜显示\n                    textStyle: {\n                        color: '#999',\n                        fontSize: 12,\n                        fontFamily: '微软雅黑'\n                    }\n                },\n            },\n            yAxis: {\n                axisLine: {show: false},   // y轴是否显示\n                splitLine: {\n                    show: true,  // 控制网格线是否显示\n                    lineStyle: {\n                        color: ['#979797'] // y刻度颜色\n                    }\n                },\n                axisTick: {show: false},// 去除y轴上的刻度线\n                axisLabel:{\n                    inside: false,\n                    textStyle: {\n                        color: '#999',\n                    },\n                    formatter: function(value, index) {\n                        if (value == 0) {\n                            return \"\";\n                        } else {\n                            return value / 10000 + '万';\n                        }\n                    }\n                },\n                min:0,\n                max:maxPrice,\n                splitNumber: 4,\n                interval: maxPrice / 4\n            },\n            series: [{\n                name: '销量',\n                type: 'line',\n                lineStyle:{\n                    normal:{\n                        color:'#92A7C3', // 折线条颜色\n                    }\n\n                },\n                itemStyle:{\n                    normal:{\n                        color: \"#92A7C3\" //图标颜色\n                    },\n                    emphasis: { //重点，强调时候的样式，即当鼠标悬停或点击上去的时候的拐点的样式\n                        borderColor: '#92A7C3',\n                        borderWidth: 2,\n                        color: '#92A7C3'\n                    }\n                },\n                data: echartData.seriesData,\n\n            }],\n        };\n        myChart.setOption(option);\n    }\n}\n\n\n/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n类的初始化\n-----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n$(document).ready(function() {\n    new DetailController;\n});"]}