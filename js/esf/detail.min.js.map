{"version":3,"sources":["esf/detail.min.js"],"names":["DetailController","fiveLine","$","click","console","log","window","history","encryptsubestateid","attr","that","request","apiUrl","community","chart","subEstateId","successCallback","data","status","dataRes","echartData","recombineM","echartFun","require","assistant","Album","BigData","init","bigData","pageName","type","hide","rowNum","Math","round","height","parseFloat","css","addClass","show","removeClass","monthList","seriesData","forEach","item","month","date","split","indexOf","push","charAt","unitPrice","sortArray","sort","a","b","maxPrice","ceil","length","myChart","echarts","document","getElementById","width","houseId","subestateid","echartBigData","eventName","eventParam","house_id","estate_id","option","tooltip","trigger","triggerOn","position","backgroundColor","padding","textStyle","color","fontSize","formatter","params","ticket","callback","paramsValue","value","grid","bottom","left","right","containLabel","xAxis","splitLine","axisTick","boundaryGap","axisLine","lineStyle","axisLabel","interval","rotate","fontFamily","yAxis","inside","index","min","max","splitNumber","series","name","normal","itemStyle","emphasis","borderColor","borderWidth","setOption","Controller","ready"],"mappings":"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","file":"detail.min.js","sourcesContent":["/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n 1. 项目名称：悟空找房h5\r\n 2. 页面名称：esf/detail(二手房-详情)\r\n 3. 作者：liyang@lifang.com\r\n -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\nclass DetailController extends Controller {\r\n    constructor() {\r\n        super();\r\n        // 初始化\r\n         this.fiveLine();\r\n        $('#sourceTitle').click(function () {\r\n            console.log(231231);\r\n            console.log(window.history)\r\n        });\r\n        // 获取小区加密Id\r\n        let  encryptsubestateid = $('#estateName').attr('data-encryptsubestateid');\r\n\r\n        // 请求接口\r\n         let that = this;\r\n         this.request(this.apiUrl.community.chart,{subEstateId:encryptsubestateid},{successCallback(data){\r\n             if (data.status == 1){\r\n                 let dataRes = data;\r\n                 let echartData =  that.recombineM(dataRes.data);\r\n                 that.echartFun(echartData) ;\r\n             }\r\n\r\n          }});\r\n        require(['../components/assistant.min','../components/album.min','../components/bigdata.min'],function(assistant, Album, BigData){\r\n            BigData.init(that);\r\n            BigData.bigData({\r\n                pageName: '1067',\r\n                type: 1\r\n            });\r\n           /* PreviewImage('.album');*/\r\n        });\r\n    }\r\n\r\n    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n    判断文本是否大于5行\r\n    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n    fiveLine(){\r\n        $('.more').hide();\r\n        let rowNum=Math.round($(\".base-info\").height()/parseFloat($(\".base-info\").css('line-height')));\r\n        if(rowNum > 5){\r\n            $(\".base-info\").addClass('word-line');\r\n            $('.more').show();\r\n        }else {\r\n            $(\".base-info\").removeClass('word-line');\r\n            $('.more').hide();\r\n        }\r\n        $('.more').click(function () {\r\n            $(\".base-info\").removeClass('word-line');\r\n            $('.more').hide();\r\n        });\r\n    }\r\n    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n    处理得到的数据的函数  处理月份和数据\r\n    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n    recombineM(data) {\r\n        let echartData = {\r\n            monthList: [],\r\n            seriesData: []\r\n        };\r\n        if (data) {\r\n            data.forEach((item) => {\r\n                let month = item.date.split('-')[1];\r\n                if (month.indexOf('0') == 0) {\r\n                    echartData.monthList.push(month.charAt(1)+'月')\r\n                } else {\r\n                    echartData.monthList.push(month+'月')\r\n                }\r\n                echartData.seriesData.push(item.unitPrice)\r\n            });\r\n        }\r\n        return echartData ;\r\n    }\r\n    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n   折线图函数异步操作\r\n   -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n    echartFun(echartData){\r\n        let sortArray = echartData.seriesData.sort(function(a, b) {\r\n            return parseFloat(a) - parseFloat(b);\r\n        });\r\n        let maxPrice = Math.ceil((sortArray[sortArray.length - 1] / 10000) + 1) * 10000;\r\n        let myChart = echarts.init(document.getElementById('main'),{ width: '88%' });\r\n        let that = this;\r\n        // 给折线图dome增加埋点\r\n        let houseId =  $('#estateName').attr('data-houseid');\r\n        let subestateid =  $('#estateName').attr('data-subestateid') ;\r\n        let echartBigData = {\r\n            eventName: \"1067014\",\r\n            eventParam: { house_id : houseId , estate_id: subestateid},\r\n            type: 2\r\n        };\r\n        // 指定图表的配置项和数据\r\n        let option = {\r\n            tooltip: {      // 提示框\r\n                trigger: 'item',\r\n                triggerOn: 'click',\r\n                position: 'top',\r\n                backgroundColor: '#92A7C3',\r\n                padding: 4,\r\n                textStyle: {\r\n                    color: '#fff',\r\n                    fontSize: '12'\r\n                },\r\n                formatter:function (params, ticket, callback) {\r\n                    let paramsValue =  params.value + \"元\";\r\n                    that.request(that.apiUrl.bigData , echartBigData ,function () {\r\n\r\n                    });\r\n                    return paramsValue;\r\n                }\r\n            },\r\n            grid: {\r\n                bottom: 20,\r\n                left: '3%',\r\n                right: '10%',\r\n                containLabel: true,\r\n            },\r\n            xAxis: {\r\n                data: echartData.monthList ,  // X坐标数据\r\n                splitLine: {show: false}, // 控制网格线是否显示\r\n                axisTick: {show: false},  // 去除x轴上的刻度线\r\n                position: 'bottom',\r\n                type: 'category',\r\n                boundaryGap: false,\r\n                axisLine: {\r\n                    lineStyle: {\r\n                        color: '#979797', // x轴颜色\r\n                    }\r\n                },\r\n                axisLabel: {\r\n                    interval: 0,\r\n                    rotate: 0, //60度角倾斜显示\r\n                    textStyle: {\r\n                        color: '#999',\r\n                        fontSize: 12,\r\n                        fontFamily: '微软雅黑'\r\n                    }\r\n                },\r\n            },\r\n            yAxis: {\r\n                axisLine: {show: false},   // y轴是否显示\r\n                splitLine: {\r\n                    show: true,  // 控制网格线是否显示\r\n                    lineStyle: {\r\n                        color: ['#979797'] // y刻度颜色\r\n                    }\r\n                },\r\n                axisTick: {show: false},// 去除y轴上的刻度线\r\n                axisLabel:{\r\n                    inside: false,\r\n                    textStyle: {\r\n                        color: '#999',\r\n                    },\r\n                    formatter: function(value, index) {\r\n                        if (value == 0) {\r\n                            return \"\";\r\n                        } else {\r\n                            return value / 10000 + '万';\r\n                        }\r\n                    }\r\n                },\r\n                min:0,\r\n                max:maxPrice,\r\n                splitNumber: 4,\r\n                interval: maxPrice / 4\r\n            },\r\n            series: [{\r\n                name: '销量',\r\n                type: 'line',\r\n                lineStyle:{\r\n                    normal:{\r\n                        color:'#92A7C3', // 折线条颜色\r\n                    }\r\n\r\n                },\r\n                itemStyle:{\r\n                    normal:{\r\n                        color: \"#92A7C3\" //图标颜色\r\n                    },\r\n                    emphasis: { //重点，强调时候的样式，即当鼠标悬停或点击上去的时候的拐点的样式\r\n                        borderColor: '#92A7C3',\r\n                        borderWidth: 2,\r\n                        color: '#92A7C3'\r\n                    }\r\n                },\r\n                data: echartData.seriesData,\r\n\r\n            }],\r\n        };\r\n        myChart.setOption(option);\r\n    }\r\n\r\n\r\n}\r\n\r\n\r\n/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n类的初始化\r\n-----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n$(document).ready(function() {\r\n    new DetailController;\r\n});"]}