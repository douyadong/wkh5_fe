{"version":3,"sources":["esf/list.min.js"],"names":["ListController","self","require","Filter","filter","el","houseType","cityId","near","longitude","latitude","distances","value","text","controller","filterChanged","result","total","count","console","log","param","paramGenerator","generateParamObj","hideNoData","hideNoMore","fetchData","data","pageSize","showNoMore","createHouseList","qs","ParamGenerator","object2QueryString","window","history","pushState","Controller","$","document","ready"],"mappings":";;;;;;;;AAAA;;;;;IAKMA,c;;;AACF,8BAAc;AAAA;;AAKV;;;AALU;AACV;;;;;AAOA,YAAIC,YAAJ;AACAC,gBAAQ,CAAC,0BAAD,EAA6B,iCAA7B,CAAR,EAA2E,UAACC,MAAD,EAAY;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAF,iBAAKG,MAAL,GAAc,IAAID,MAAJ,CAAW;AACrBE,oBAAI,SADiB;AAErBC,2BAAW,CAFU;AAGrBC,wBAAQ,EAHa;AAIrBC,sBAAM,KAJe;AAKrBC,2BAAW,GALU;AAMrBC,0BAAU,GANW;AAOrBC,2BAAW,CAAC,EAACC,OAAO,MAAR,EAAgBC,MAAM,UAAtB,EAAD,EAAmC,EAACD,OAAO,KAAR,EAAeC,MAAM,MAArB,EAAnC,EAAgE,EAACD,OAAO,MAAR,EAAgBC,MAAM,OAAtB,EAAhE,EAA+F,EAACD,OAAO,MAAR,EAAgBC,MAAM,OAAtB,EAA/F,EAA8H,EAACD,OAAO,MAAR,EAAgBC,MAAM,OAAtB,EAA9H,CAPU;AAQrBC,4BAAYb,IARS;AASrBc,+BAAe,uBAASC,MAAT,EAAgB;AAC3B,yBAAKC,KAAL,GAAa,CAAb;AACA,yBAAKC,KAAL,GAAa,CAAb;AACAC,4BAAQC,GAAR,CAAY,SAAZ,EAAuBJ,MAAvB;AACA,wBAAIK,QAAQpB,KAAKqB,cAAL,CAAoBC,gBAApB,CAAqCP,MAArC,CAAZ;AACAf,yBAAKoB,KAAL,GAAaA,KAAb;AACApB,yBAAKuB,UAAL;AACAvB,yBAAKwB,UAAL;AACAxB,yBAAKyB,SAAL,CAAeL,KAAf,EAAqB,UAASM,IAAT,EAAc;AAC/B,4BAAGA,KAAKT,KAAL,IAAY,CAAZ,IAAiBS,KAAKT,KAAL,IAAYjB,KAAK2B,QAArC,EAA8C;AAAC;AAC3C3B,iCAAK4B,UAAL;AACH;AACD5B,6BAAK6B,eAAL,CAAqBH,KAAKA,IAA1B,EAA+BA,KAAKT,KAApC;AACA,4BAAIa,KAAKC,eAAeC,kBAAf,CAAkCZ,KAAlC,CAAT;AACAa,+BAAOC,OAAP,CAAeC,SAAf,CAAyBf,KAAzB,EAAgC,EAAhC,EAAoC,OAAOU,EAA3C;AACH,qBAPD;AAQH;AAzBoB,aAAX,CAAd;AA2BH,SAtCD;AATU;AAgDb;;;EAjDwBM,U;AAoD7B;;;;;AAGAC,EAAEC,QAAF,EAAYC,KAAZ,CAAkB,YAAW;AACzB,QAAIxC,cAAJ;AACH,CAFD","file":"list.min.js","sourcesContent":["/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n 1. 项目名称：悟空找房h5\r\n 2. 页面名称：esf/list(二手房列表)\r\n 3. 作者：zhaohuagang@lifang.com\r\n -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\nclass ListController extends Controller {\r\n    constructor() {        \r\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n        类的初始化，继承控制器基类\r\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n        super() ;        \r\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n        加载相关页面组件逻辑\r\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n        var self = this;\r\n        require([\"../components/filter.min\", \"../components/conning-tower.min\" ] , (Filter) => {\r\n            // new ConningTower({                \r\n            //     \"moduleType\" : \"esf\" ,\r\n            //     \"cityClick\" : () => {\r\n            //         alert(\"在二手房城市选择器中点选了城市\") ;\r\n            //     } ,\r\n            //     \"searchResultItemClick\" : (data) => {\r\n            //         alert(data) ;\r\n            //     }\r\n            // }) ;\r\n\r\n            self.filter = new Filter({\r\n                el: \".filter\",\r\n                houseType: 1,\r\n                cityId: 43,\r\n                near: false,\r\n                longitude: 222,\r\n                latitude: 234,\r\n                distances: [{value: \"5000\", text: \"不限（智能范围）\"},{value: \"500\", text: \"500米\"},{value: \"1000\", text: \"1000米\"},{value: \"2000\", text: \"2000米\"},{value: \"5000\", text: \"5000米\"}],\r\n                controller: self,\r\n                filterChanged: function(result){ \r\n                    this.total = 0;\r\n                    this.count = 0;                    \r\n                    console.log(\"筛选条件变了：\", result);                                      \r\n                    var param = self.paramGenerator.generateParamObj(result);\r\n                    self.param = param;\r\n                    self.hideNoData();\r\n                    self.hideNoMore();\r\n                    self.fetchData(param,function(data){\r\n                        if(data.count!=0 && data.count<=self.pageSize){// 没有更多了\r\n                            self.showNoMore();\r\n                        }\r\n                        self.createHouseList(data.data,data.count);  \r\n                        var qs = ParamGenerator.object2QueryString(param);                        \r\n                        window.history.pushState(param, \"\", \"./\" + qs);       \r\n                    });\r\n                }                \r\n            });\r\n        }) ;\r\n    }        \r\n    \r\n}\r\n/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n类的初始化\r\n-----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n$(document).ready(function() {\r\n    new ListController ;\r\n}) ;"]}