{"version":3,"sources":["esf/list.min.js"],"names":["_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","_createClass","defineProperties","target","props","i","length","descriptor","defineProperty","key","protoProps","staticProps","ListController","_Controller","this","_this","getPrototypeOf","paramGenerator","ParamGenerator","setTimeout","$","slideDown","slideUp","lazyload","placeholder","staticDomain","require","BigData","Filter","init","visitedCityId","val","highPriceCityIds","prices","filter","cityId","LOWPRICES","extend","ESFDEFAULT","el","controller","near","filterChanged","result","param","generateParamObj","di","to","li","st","mapping","forEach","item","ConningTower","bigDataUtil","moduleType","cityClick","searchResultItemClick","data","id","sdi","sto","sli","sst","sid","lat","lon","m","type","locationCallback","setLocationInfo","window","bigData","pageName","pageUrl","location","origin","pathname","replace","tmpArr","split","obj","queryString2Object","bindEvent","pullload","insertTrendAndOldHouse","cityPinyin","url","object2QueryString","href","search","click","str","channel","encryptHouseId","encodeURIComponent","houseId","houseChild","houseImgUrl","areaStr","town","estateName","hasVideo","houseTitle","district","tagList","map","tag","unitPrice","join","totalPrice","count","hideNoData","hide","createHouseItems","html","text","showNoData","show","append","cityName","insertAfter","addClass","newBusiness","$list","JSON","stringify","eventName","eventParam","city_id","requestType","callback","apiUrl","esf","list","houselist","itemClass","queryStringObject","pa","threshold","ready","pageSizeKey","houseList","appendHouseList","Controller","document"],"mappings":"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","file":"list.min.js","sourcesContent":["/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n 1. 项目名称：悟空找房h5\r\n 2. 页面名称：esf/list(二手房列表)\r\n 3. 作者：zhaohuagang@lifang.com\r\n -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\nclass ListController extends Controller {\r\n    constructor() {        \r\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n        类的初始化，继承控制器基类\r\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n        super() ;        \r\n        var self = this;        \r\n        this.paramGenerator = new ParamGenerator();\r\n        setTimeout(function(){\r\n            $('.total').slideDown(function(){\r\n                setTimeout(function(){\r\n                    $('.total').slideUp();\r\n                },2000);\r\n            });// 隐藏查询总条数   \r\n        },100);   \r\n        \r\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n        图片懒加载实例化\r\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/        \r\n        $(\".lazy\").lazyload({ \r\n            \"placeholder\" : this.staticDomain + \"/wkh5_fe/images/common/loading.jpg\"\r\n        }) ;\r\n        \r\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n        加载相关页面组件逻辑\r\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n        require([ \"../components/bigdata.min\" , \"../components/filter.min\", \"../components/conning-tower.min\" ] , (BigData, Filter) => {\r\n            BigData.init(this) ;\r\n\r\n            // 城市不同总价选项不同，XFDEFAULT中prices是北京、上海、广州、深圳、杭州、苏州、廊坊、南京的价格选项，比较高，\r\n            // 因此需要区分\r\n            /*\r\n            *   北京\t3\r\n                上海\t43\r\n                广州\t1873\r\n                深圳\t1950\r\n                杭州\t873\r\n                苏州\t771\r\n                廊坊\t221\r\n                南京\t741\r\n            */\r\n\r\n            var visitedCityId = $('#visitedCityId').val();\r\n            var highPriceCityIds = [3,43,1873,1950,873,771,221,741];\r\n            var prices = highPriceCityIds.filter(function(cityId){return cityId == visitedCityId }).length == 0 ? Filter.LOWPRICES : null;\r\n\r\n            self.filter = new Filter($.extend({}, Filter.ESFDEFAULT,{\r\n                el: \".filter\",                \r\n                cityId: $('#visitedCityId').val(),                \r\n                BigData: BigData,                \r\n                controller: self,\r\n                near: true,\r\n                filterChanged: function(result){                         \r\n                    var param = self.paramGenerator.generateParamObj(result);\r\n                    if(param.di || param.to || param.li || param.st){\r\n                        // do nothing\r\n                    }else{// 判断是否有sid,sli,sst,sdi,sto\r\n                        var mapping = [\"sdi\",\"sto\",\"sli\",\"sst\",\"sid\"];\r\n                        mapping.forEach(function(item){\r\n                            if(self.param[item]){\r\n                                param[item] = self.param[item];\r\n                            }\r\n                        });                        \r\n                    }\r\n                    \r\n\r\n                    self.param = param;\r\n                    // 跳转\r\n                    self.goto();\r\n                }                \r\n            },prices));\r\n            new ConningTower({                \r\n                \"bigDataUtil\" : BigData ,               \r\n                \"moduleType\" : \"esf\" ,\r\n                \"cityClick\" : () => {\r\n                    \r\n                } ,                \r\n                \"searchResultItemClick\" : (data) => {\r\n                    // 与filter中的区域地铁互斥\r\n                    delete self.param.di;// 区域id\r\n                    delete self.param.to;// 板块id\r\n                    delete self.param.li;// 地铁线id\r\n                    delete self.param.st;// 地铁站id\r\n                    delete self.param.id;// 小区id\r\n                    delete self.param.sdi;// 区域id\r\n                    delete self.param.sto;// 板块id\r\n                    delete self.param.sli;// 地铁线id\r\n                    delete self.param.sst;// 地铁站id\r\n                    delete self.param.sid;// 小区id\r\n                    delete self.param.lat;\r\n                    delete self.param.lon;\r\n                    delete self.param.m;\r\n                    var mapping = [\"\",\"sdi\",\"sto\",\"sli\",\"sst\",\"sid\"];\r\n                    var key = mapping[data.type];\r\n                    if(key){\r\n                        self.param[key] = data.value;\r\n                        self.goto();\r\n                    }\r\n                },\r\n                \"locationCallback\": (data)=>{\r\n                    self.filter.setLocationInfo(data);\r\n                }\r\n            }) ;\r\n\r\n            \r\n\r\n            window.filter = self.filter;\r\n            self.BigData = BigData;\r\n            BigData.bigData({\r\n                \"pageName\": \"1068\",                       \r\n                \"type\": 1\r\n            });\r\n        }) ;\r\n\r\n        // 从url中解析参数\r\n        //var pageUrl = location.href;\r\n        var pageUrl = location.origin + location.pathname;\r\n        pageUrl = pageUrl.replace('//','');\r\n        var tmpArr = pageUrl.split('/');\r\n        self.param = {};\r\n        if(tmpArr[3]){// 有查询条件\r\n            var obj = ParamGenerator.queryString2Object(tmpArr[3]);\r\n            if(obj){\r\n                self.param = obj;\r\n            }\r\n        }                            \r\n\r\n        this.bindEvent();\r\n        this.pullload();\r\n        this.insertTrendAndOldHouse();\r\n    }        \r\n\r\n    // 根据查询条件进行相应的跳转\r\n    goto(){\r\n        var cityPinyin = $('#visitedCityPinyin').val();\r\n        var url = location.origin + \"/\" + cityPinyin + \"/esf/\" +ParamGenerator.object2QueryString(this.param);\r\n        location.href = url + location.search;\r\n    }\r\n\r\n    bindEvent(){\r\n        var self = this;\r\n        // 清空查询条件\r\n        $('.no-data button').click(function(){\r\n            // 跳转            \r\n            location.href = \"./\";\r\n        });\r\n    }\r\n    \r\n    createHouseItems(data){\r\n        var str = \"\";\r\n        var cityPinyin = $('#visitedCityPinyin').val();\r\n        var channel = $('#channel').val();\r\n        data.forEach(function(item){            \r\n            str += '<a href=\"/'+ cityPinyin + '/esf/' +  item.encryptHouseId+'.html' + (channel?'?channel='+channel:'') +'\" class=\"esf-item\" data-bigdata=\"'+ encodeURIComponent('{\"eventName\": \"1068028\", \"eventParam\": { \"house_id\": \"'+item.houseId+'\" }}')+'\">\\\r\n            <dl>\\\r\n                <dt><img src=\"'+item.houseImgUrl + '?x-oss-process=image/resize,w_150\" alt=\"'+item.estateName+'\" class=\"lazy\">'+(item.hasVideo == '1' && '<span class=\"play\"><i></i></span>' || '')+'</dt>\\\r\n                <dd class=\"title\">'+item.houseTitle+'</dd>\\\r\n                <dd>'+item.houseChild + \" \" + item.areaStr +' | ' + item.district + \" \" + item.town +' </dd>\\\r\n                <dd class=\"tags\">'\r\n                + (!item.tagList?\"\":item.tagList.map(function(tag){\r\n                    switch(tag){\r\n                        case \"降价\":\r\n                        return '<div class=\"promotion\"><span>降价</span></div>';\r\n                        case \"新上\":\r\n                        return '<div class=\"new\"><span>新上</span></div>';\r\n                        case \"满二\":\r\n                        return '<div class=\"over\"><span>满二</span></div>';\r\n                        case \"满五唯一\":\r\n                        return '<div class=\"over\"><span>满五唯一</span></div>';\r\n                        default:\r\n\r\n                        return '<div><span>'+tag+'</span></div>';\r\n                    }\r\n                    \r\n                }).join('') )\r\n                +                                  \r\n                '</dd>\\\r\n                <dd>\\\r\n                     <span class=\"money\">' + item.totalPrice + '万</span>\\\r\n                     <span class=\"price\">' + item.unitPrice + ' 元/㎡</span>\\\r\n                </dd>\\\r\n            </dl>\\\r\n        </a>';\r\n        });\r\n\r\n        return str;\r\n    }    \r\n\r\n    createHouseList(data,count){// 生成房源列表\r\n        this.hideNoData();\r\n        if(data && data.length){\r\n            $('.no-data').hide();\r\n            var str = this.createHouseItems(data);\r\n\r\n            $('#list').html(str);\r\n            $('.total .count').text(count);\r\n            $('.total').slideDown();\r\n            setTimeout(function(){\r\n                $('.total').slideUp();\r\n            }, 1500);\r\n\r\n            this.insertTrendAndOldHouse();\r\n        }else{// 没数据\r\n            this.showNoData();\r\n        }\r\n    }\r\n\r\n    appendHouseList(data){// 上拉滚动时加载数据\r\n        if(data&&data.length){\r\n            var str = this.createHouseItems(data);\r\n            $('#list').append(str);\r\n            this.insertTrendAndOldHouse();\r\n        }else{// 没有更多数据了\r\n            //this.showNoMore();\r\n        }\r\n    }\r\n\r\n    showNoData(){// 显示没有数据，并显示新房楼盘推荐\r\n        $('.no-data').show();\r\n        $('.total + div').html('');\r\n        $('.recommendation').show();// TODO:显示推荐楼盘\r\n    }\r\n\r\n    hideNoData(){\r\n        $('.no-data').hide();\r\n    }\r\n\r\n    hideNoMore(){\r\n        $('.reach-bottom').hide();\r\n    }\r\n\r\n    insertTrendAndOldHouse(){// 场景连篇       \r\n        var cityName = $('#visitedCityName').val();\r\n        var cityPinyin = $('#visitedCityPinyin').val();\r\n        var cityId = $('#visitedCityId').val();\r\n        var channel = $('#channel').val();\r\n        var $list = $('#list .esf-item');\r\n        var newBusiness = $('#newBusiness').val();\r\n        if($('#list .scene.house-price').length == 0 && $list.length>9){\r\n            $('<a data-bigdata=\"'+encodeURIComponent(JSON.stringify({eventName: \"1068074\", eventParam:{city_id: cityId}}))+'\" href=\"/'+cityPinyin+'/trend/esf'+(channel?\"?channel=\"+channel:\"\")+'\" class=\"scene house-price\">\\\r\n                <div class=\"img\"></div>\\\r\n                <div class=\"info\">\\\r\n                    <h3>'+cityName+'房价涨了还是跌了？</h3>\\\r\n                    <span class=\"detail\">去看看</span>\\\r\n                </div>\\\r\n            </a>').insertAfter($($list[9]).addClass('remove-baseline'));\r\n        }\r\n        if(newBusiness && $('#list .scene.house').length == 0 && $list.length>19){\r\n            $('<a data-bigdata=\"'+encodeURIComponent(JSON.stringify({eventName: \"1068075\", eventParam:{city_id: cityId}}))+'\" href=\"/'+cityPinyin+'/xflist/'+(channel?\"?channel=\"+channel:\"\")+'\" class=\"scene house\">\\\r\n                <div class=\"img\"></div>\\\r\n                <div class=\"info\">\\\r\n                    <h3>火爆高性价比新房</h3>\\\r\n                    <span class=\"detail\">去看看</span>\\\r\n                </div>\\\r\n            </a>').insertAfter($($list[19]).addClass('remove-baseline'));\r\n        }\r\n    }\r\n\r\n    showError(){// 接口报错，分为两种，1. 筛选条件变更刷新 2. 上拉加载\r\n\r\n    }\r\n\r\n    // 上拉加载\r\n    pullload(){\r\n        let self = this ;\r\n        // var cityId = $.cookie(\"xfSelectedCityId\");\r\n        // var cityPinyin = $.cookie(\"xfSelectedCityPinyin\");\r\n        // var cityName = $.cookie(\"xfSelectedCityName\");\r\n        \r\n        //二手房\r\n        $(\"#list\").pullload({\r\n            apiUrl : self.apiUrl.esf.list.houselist ,\r\n            itemClass: \".esf-item\",\r\n            queryStringObject : function(){\r\n                self.param && delete self.param.pa;\r\n                if(!self.param){\r\n                    self.param = {};\r\n                }\r\n                return $.extend({},self.param,{cityId: $('#visitedCityId').val()});\r\n            },   \r\n            requestType: \"POST\",\r\n            threshold : 50 ,\r\n            pageSize: 10,   \r\n            pageIndexKey: \"of\",\r\n            pageSizeKey: \"ps\",    \r\n            callback : function(data) {\r\n                \r\n                if( !data.data || !data.data.houseList || !data.data.houseList.length){\r\n                    data.count = 1;\r\n                    return;    \r\n                } \r\n\r\n                self.appendHouseList(data.data.houseList);                \r\n            }\r\n        }) ;\r\n    }\r\n}\r\n/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n类的初始化\r\n-----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n$(document).ready(function() {\r\n    new ListController ;\r\n}) ;"]}