{"version":3,"sources":["esf/list.min.js"],"names":["ListController","self","paramGenerator","ParamGenerator","$","slideUp","lazyload","staticDomain","require","BigData","Filter","init","ConningTower","data","param","di","to","li","st","id","mapping","key","type","value","goto","filter","extend","ESFDEFAULT","el","cityId","controller","near","filterChanged","result","console","log","generateParamObj","forEach","item","window","bigData","pageUrl","location","href","replace","tmpArr","split","obj","queryString2Object","bindEvent","pullload","insertTrendAndOldHouse","object2QueryString","click","str","cityPinyin","val","channel","encryptHouseId","encodeURIComponent","houseId","houseImgUrl","estateName","houseTitle","houseChild","areaStr","district","town","tagList","map","tag","join","totalPrice","unitPrice","count","hideNoData","length","hide","createHouseItems","html","text","slideDown","setTimeout","showNoData","append","show","cityName","$list","insertAfter","cookie","apiUrl","esf","list","houselist","queryStringObject","pa","requestType","threshold","pageSize","pageIndexKey","pageSizeKey","callback","houseList","appendHouseList","Controller","document","ready"],"mappings":"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","file":"list.min.js","sourcesContent":["/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n 1. 项目名称：悟空找房h5\r\n 2. 页面名称：esf/list(二手房列表)\r\n 3. 作者：zhaohuagang@lifang.com\r\n -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\nclass ListController extends Controller {\r\n    constructor() {        \r\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n        类的初始化，继承控制器基类\r\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n        super() ;        \r\n        var self = this;        \r\n        this.paramGenerator = new ParamGenerator();\r\n        $('.total').slideUp(1000);// 隐藏查询总条数   \r\n        \r\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n        图片懒加载实例化\r\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/        \r\n        $(\".lazy\").lazyload({ \r\n            \"placeholder\" : this.staticDomain + \"/wkh5_fe/images/common/loading.jpg\"\r\n        }) ;\r\n        \r\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n        加载相关页面组件逻辑\r\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n        require([ \"../components/bigdata.min\" , \"../components/filter.min\", \"../components/conning-tower.min\" ] , (BigData, Filter) => {\r\n            BigData.init(this) ;\r\n            new ConningTower({                \r\n                \"bigDataUtil\" : BigData ,               \r\n                \"moduleType\" : \"esf\" ,\r\n                \"cityClick\" : () => {\r\n                    \r\n                } ,                \r\n                \"searchResultItemClick\" : (data) => {\r\n                    // 与filter中的区域地铁互斥\r\n                    delete self.param.di;// 区域id\r\n                    delete self.param.to;// 板块id\r\n                    delete self.param.li;// 地铁线id\r\n                    delete self.param.st;// 地铁站id\r\n                    delete self.param.id;// 小区id\r\n                    var mapping = [\"\",\"sdi\",\"sto\",\"sli\",\"sst\",\"sid\"];\r\n                    var key = mapping[data.type];\r\n                    if(key){\r\n                        self.param[key] = data.value;\r\n                        self.goto();\r\n                    }\r\n                }\r\n            }) ;\r\n\r\n            self.filter = new Filter($.extend({}, Filter.ESFDEFAULT,{\r\n                el: \".filter\",                \r\n                cityId: 43,                \r\n                BigData: BigData,                \r\n                controller: self,\r\n                near: true,\r\n                filterChanged: function(result){     \r\n                    console.log(\"条件变了:\", result);\r\n                    debugger;\r\n                    var param = self.paramGenerator.generateParamObj(result);\r\n                    if(param.di || param.to || param.li || param.st){\r\n                        // do nothing\r\n                    }else{// 判断是否有sid,sli,sst,sdi,sto\r\n                        var mapping = [\"sdi\",\"sto\",\"sli\",\"sst\",\"sid\"];\r\n                        mapping.forEach(function(item){\r\n                            if(self.param[item]){\r\n                                param[item] = self.param[item];\r\n                            }\r\n                        });                        \r\n                    }\r\n\r\n                    self.param = param;\r\n                    // 跳转\r\n                    self.goto();\r\n                }                \r\n            }));\r\n\r\n            window.filter = self.filter;\r\n            self.BigData = BigData;\r\n            BigData.bigData({\r\n                \"pageName\": \"1068\",                       \r\n                \"type\": 1\r\n            });\r\n        }) ;\r\n\r\n        // 从url中解析参数\r\n        var pageUrl = location.href;\r\n        pageUrl = pageUrl.replace('//','');\r\n        var tmpArr = pageUrl.split('/');\r\n        self.param = {};\r\n        if(tmpArr[3]){// 有查询条件\r\n            var obj = ParamGenerator.queryString2Object(tmpArr[3]);\r\n            if(obj){\r\n                self.param = obj;\r\n            }\r\n        }                            \r\n\r\n        this.bindEvent();\r\n        this.pullload();\r\n        this.insertTrendAndOldHouse();\r\n    }        \r\n\r\n    // 根据查询条件进行相应的跳转\r\n    goto(){\r\n        location.href = './' +  ParamGenerator.object2QueryString(this.param);                    \r\n    }\r\n\r\n    bindEvent(){\r\n        var self = this;\r\n        // 清空查询条件\r\n        $('.no-data button').click(function(){\r\n            // 跳转            \r\n            location.href = \"./\";\r\n        });\r\n    }\r\n    \r\n    createHouseItems(data){\r\n        var str = \"\";\r\n        var cityPinyin = $('#visitedCityPinyin').val();\r\n        var channel = $('#channel').val();\r\n        data.forEach(function(item){            \r\n            str += '<a href=\"/'+ cityPinyin + '/esf/' +  item.encryptHouseId+'.html' + (channel?'?channel='+channel:'') +'\" class=\"esf-item\" data-bigdata=\"'+ encodeURIComponent('{\"eventName\": \"1068028\", \"eventParam\": { \"house_id\": \"'+item.houseId+'\" }}')+'\">\\\r\n            <dl>\\\r\n                <dt><img src=\"'+item.houseImgUrl + '?x-oss-process=image/resize,w_150\" alt=\"'+item.estateName+'\" class=\"lazy\"></dt>\\\r\n                <dd class=\"title\">'+item.houseTitle+'</dd>\\\r\n                <dd>'+item.houseChild + \" \" + item.areaStr +' | ' + item.district + \" \" + item.town +' </dd>\\\r\n                <dd class=\"tags\">'\r\n                + (!item.tagList?\"\":item.tagList.map(function(tag){\r\n                    switch(tag){\r\n                        case \"降价\":\r\n                        return '<div class=\"promotion\"><span>降价</span></div>';\r\n                        case \"新上\":\r\n                        return '<div class=\"new\"><span>新上</span></div>';\r\n                        case \"满二\":\r\n                        return '<div class=\"over\"><span>满二</span></div>';\r\n                        case \"满五唯一\":\r\n                        return '<div class=\"over\"><span>满五唯一</span></div>';\r\n                        default:\r\n\r\n                        return '<div><span>'+tag+'</span></div>';\r\n                    }\r\n                    \r\n                }).join('') )\r\n                +                                  \r\n                '</dd>\\\r\n                <dd>\\\r\n                     <span class=\"money\">' + item.totalPrice + '万</span>\\\r\n                     <span class=\"price\">' + item.unitPrice + ' 元/㎡</span>\\\r\n                </dd>\\\r\n            </dl>\\\r\n        </a>';\r\n        });\r\n\r\n        return str;\r\n    }    \r\n\r\n    createHouseList(data,count){// 生成房源列表\r\n        this.hideNoData();\r\n        if(data && data.length){\r\n            $('.no-data').hide();\r\n            var str = this.createHouseItems(data);\r\n\r\n            $('#list').html(str);\r\n            $('.total .count').text(count);\r\n            $('.total').slideDown();\r\n            setTimeout(function(){\r\n                $('.total').slideUp();\r\n            }, 1500);\r\n\r\n            this.insertTrendAndOldHouse();\r\n        }else{// 没数据\r\n            this.showNoData();\r\n        }\r\n    }\r\n\r\n    appendHouseList(data){// 上拉滚动时加载数据\r\n        if(data&&data.length){\r\n            var str = this.createHouseItems(data);\r\n            $('#list').append(str);\r\n            this.insertTrendAndOldHouse();\r\n        }else{// 没有更多数据了\r\n            //this.showNoMore();\r\n        }\r\n    }\r\n\r\n    showNoData(){// 显示没有数据，并显示新房楼盘推荐\r\n        $('.no-data').show();\r\n        $('.total + div').html('');\r\n        $('.recommendation').show();// TODO:显示推荐楼盘\r\n    }\r\n\r\n    hideNoData(){\r\n        $('.no-data').hide();\r\n    }\r\n\r\n    hideNoMore(){\r\n        $('.reach-bottom').hide();\r\n    }\r\n\r\n    insertTrendAndOldHouse(){// 场景连篇       \r\n        var cityName = $('#visitedCityName').val();\r\n        var $list = $('#list .esf-item');\r\n        if($('#list .scene.house-price').length == 0 && $list.length>9){\r\n            $('<a href=\"#\" class=\"scene house-price\">\\\r\n                <div class=\"img\"></div>\\\r\n                <div class=\"info\">\\\r\n                    <h3>'+cityName+'房价涨了还是跌了？</h3>\\\r\n                    <span class=\"detail\">去看看</span>\\\r\n                </div>\\\r\n            </a>').insertAfter($($list[9]));\r\n        }\r\n        if($('#list .scene.house').length == 0 && $list.length>19){\r\n            $('<a href=\"#\" class=\"scene house\">\\\r\n                <div class=\"img\"></div>\\\r\n                <div class=\"info\">\\\r\n                    <h3>火爆高性价比新房</h3>\\\r\n                    <span class=\"detail\">去看看</span>\\\r\n                </div>\\\r\n            </a>').insertAfter($list[19]);\r\n        }\r\n    }\r\n\r\n    showError(){// 接口报错，分为两种，1. 筛选条件变更刷新 2. 上拉加载\r\n\r\n    }\r\n\r\n    // 上拉加载\r\n    pullload(){\r\n        let self = this ;\r\n        var cityId = $.cookie(\"xfSelectedCityId\");\r\n        var cityPinyin = $.cookie(\"xfSelectedCityPinyin\");\r\n        var cityName = $.cookie(\"xfSelectedCityName\");\r\n        \r\n        //二手房\r\n        $(\"#list\").pullload({\r\n            apiUrl : self.apiUrl.esf.list.houselist ,\r\n            queryStringObject : function(){\r\n                self.param && delete self.param.pa;\r\n                if(!self.param){\r\n                    self.param = {};\r\n                }\r\n                return $.extend({},self.param,{cityId: $('#visitedCityId').val()});\r\n            },   \r\n            requestType: \"POST\",\r\n            threshold : 50 ,\r\n            pageSize: 10,   \r\n            pageIndexKey: \"of\",\r\n            pageSizeKey: \"ps\",    \r\n            callback : function(data) {\r\n                \r\n                if( !data.data || !data.data.houseList || !data.data.houseList.length){\r\n                    data.count = 1;\r\n                    return;    \r\n                } \r\n\r\n                self.appendHouseList(data.data.houseList);                \r\n            }\r\n        }) ;\r\n    }\r\n}\r\n/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n类的初始化\r\n-----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n$(document).ready(function() {\r\n    new ListController ;\r\n}) ;"]}