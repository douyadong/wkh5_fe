{"version":3,"sources":["esf/list.min.js"],"names":["ListController","self","paramGenerator","ParamGenerator","require","Filter","ConningTower","alert","data","filter","el","houseType","cityId","near","longitude","latitude","distances","value","text","sorts","id","houseTypes","name","title","items","exclusive","controller","filterChanged","result","total","count","console","log","param","generateParamObj","fetchData","success","error","request","apiUrl","esf","list","houselist","type","successCallback","errorCallback","Controller","$","document","ready"],"mappings":";;;;;;;;;;AAAA;;;;;IAKMA,c;;;AACF,8BAAc;AAAA;;AAKV;;;AALU;AACV;;;;;AAOA,YAAIC,YAAJ;AACAA,aAAKC,cAAL,GAAsB,IAAIC,cAAJ,EAAtB;AACAC,gBAAQ,CAAC,0BAAD,EAA6B,iCAA7B,CAAR,EAA2E,UAACC,MAAD,EAAY;AACnF,gBAAIC,YAAJ,CAAiB;AACb,8BAAe,KADF;AAEb,6BAAc,qBAAM;AAChBC,0BAAM,iBAAN;AACH,iBAJY;AAKb,yCAA0B,+BAACC,IAAD,EAAU;AAChCD,0BAAMC,IAAN;AACH;AAPY,aAAjB;;AAUAP,iBAAKQ,MAAL,GAAc,IAAIJ,MAAJ,CAAW;AACrBK,oBAAI,SADiB;AAErBC,2BAAW,CAFU;AAGrBC,wBAAQ,EAHa;AAIrBC,sBAAM,KAJe;AAKrBC,2BAAW,GALU;AAMrBC,0BAAU,GANW;AAOrBC,2BAAW,CAAC,EAACC,OAAO,MAAR,EAAgBC,MAAM,UAAtB,EAAD,EAAmC,EAACD,OAAO,KAAR,EAAeC,MAAM,MAArB,EAAnC,EAAgE,EAACD,OAAO,MAAR,EAAgBC,MAAM,OAAtB,EAAhE,EAA+F,EAACD,OAAO,MAAR,EAAgBC,MAAM,OAAtB,EAA/F,EAA8H,EAACD,OAAO,MAAR,EAAgBC,MAAM,OAAtB,EAA9H,CAPU;AAQrBC,uBAAO,CAAC;AACJD,0BAAM;AADF,iBAAD,EAEL;AACEE,wBAAI,GADN;AAEEF,0BAAM;AAFR,iBAFK,EAKL;AACEE,wBAAI,GADN;AAEEF,0BAAM;AAFR,iBALK,EAQL;AACEE,wBAAI,GADN;AAEEF,0BAAM;AAFR,iBARK,EAWL;AACEE,wBAAI,GADN;AAEEF,0BAAM;AAFR,iBAXK,EAcL;AACEE,wBAAI,GADN;AAEE,4BAAQ;AAFV,iBAdK,EAiBL;AACEA,wBAAI,GADN;AAEEF,0BAAM;AAFR,iBAjBK,EAoBL;AACEE,wBAAI,GADN;AAEEF,0BAAM;AAFR,iBApBK,CARc;AAgCrBG,4BAAY,CAAC;AACTC,0BAAM,OADG,EACK;AACdC,2BAAO,IAFE;AAGTC,2BAAO,CAAC;AACJJ,4BAAI,EADA;AAEJF,8BAAM,IAFF;AAGJO,mCAAW,IAHP,CAGY;AAHZ,qBAAD,EAIL;AACEL,4BAAI,GADN;AAEEF,8BAAM,IAFR;AAGEO,mCAAW,KAHb,CAGmB;AAHnB,qBAJK,EAQL;AACEL,4BAAI,GADN;AAEEF,8BAAM,IAFR;AAGEO,mCAAW,KAHb,CAGmB;AAHnB,qBARK,EAYL;AACEL,4BAAI,GADN;AAEEF,8BAAM,IAFR;AAGEO,mCAAW,KAHb,CAGmB;AAHnB,qBAZK,EAgBL;AACEL,4BAAI,GADN;AAEEF,8BAAM,IAFR;AAGEO,mCAAW,KAHb,CAGmB;AAHnB,qBAhBK,EAoBL;AACEL,4BAAI,GADN;AAEEF,8BAAM,OAFR;AAGEO,mCAAW,KAHb,CAGmB;AAHnB,qBApBK;AAHE,iBAAD,EA4BV;AACEH,0BAAM,UADR;AAEEC,2BAAO,IAFT;AAGEC,2BAAO,CAAC;AACJJ,4BAAI,IADA;AAEJF,8BAAM;AAFF,qBAAD,EAGL;AACEE,4BAAI,GADN;AAEEF,8BAAM;AAFR,qBAHK,EAML;AACEE,4BAAI,IADN;AAEEF,8BAAM;AAFR,qBANK,EASL;AACEE,4BAAI,IADN;AAEEF,8BAAM;AAFR,qBATK,EAYL;AACEE,4BAAI,IADN;AAEEF,8BAAM;AAFR,qBAZK,EAeL;AACEE,4BAAI,GADN;AAEEF,8BAAM;AAFR,qBAfK,EAkBL;AACEE,4BAAI,IADN;AAEEF,8BAAM;AAFR,qBAlBK,EAqBL;AACEE,4BAAI,IADN;AAEEF,8BAAM;AAFR,qBArBK;AAHT,iBA5BU,EAwDV;AACEI,0BAAM,OADR;AAEEC,2BAAO,IAFT;AAGEC,2BAAO,CAAC;AACJJ,4BAAI,GADA;AAEJF,8BAAM;AAFF,qBAAD,EAGL;AACEE,4BAAI,GADN;AAEEF,8BAAM;AAFR,qBAHK,EAML;AACEE,4BAAI,GADN;AAEEF,8BAAM;AAFR,qBANK,EASL;AACEE,4BAAI,GADN;AAEEF,8BAAM;AAFR,qBATK,EAYL;AACEE,4BAAI,GADN;AAEEF,8BAAM;AAFR,qBAZK,EAeL;AACEE,4BAAI,GADN;AAEEF,8BAAM;AAFR,qBAfK,EAkBL;AACEE,4BAAI,GADN;AAEEF,8BAAM;AAFR,qBAlBK,EAqBL;AACEE,4BAAI,GADN;AAEEF,8BAAM;AAFR,qBArBK,EAwBL;AACEE,4BAAI,GADN;AAEEF,8BAAM;AAFR,qBAxBK;AAHT,iBAxDU,EAuFV;AACEI,0BAAM,YADR;AAEEC,2BAAO,MAFT;AAGEC,2BAAO,CAAC;AACJJ,4BAAI,GADA;AAEJF,8BAAM;AAFF,qBAAD,EAGL;AACEE,4BAAI,GADN;AAEEF,8BAAM;AAFR,qBAHK;AAHT,iBAvFU,EAiGV;AACEI,0BAAM,aADR;AAEEC,2BAAO,IAFT;AAGEC,2BAAO,CAAC;AACJJ,4BAAI,GADA;AAEJF,8BAAM;AAFF,qBAAD,EAGL;AACEE,4BAAI,GADN;AAEEF,8BAAM;AAFR,qBAHK,EAML;AACEE,4BAAI,GADN;AAEEF,8BAAM;AAFR,qBANK,EASL;AACEE,4BAAI,GADN;AAEEF,8BAAM;AAFR,qBATK,EAYL;AACEE,4BAAI,GADN;AAEEF,8BAAM;AAFR,qBAZK;AAHT,iBAjGU,EAoHV;AACEI,0BAAM,MADR;AAEEC,2BAAO,IAFT;AAGEC,2BAAO,CAAC;AACJJ,4BAAI,GADA;AAEJF,8BAAM;AAFF,qBAAD,EAGL;AACEE,4BAAI,GADN;AAEEF,8BAAM;AAFR,qBAHK,EAML;AACEE,4BAAI,GADN;AAEEF,8BAAM;AAFR,qBANK,EASL;AACEE,4BAAI,GADN;AAEEF,8BAAM;AAFR,qBATK;AAHT,iBApHU,CAhCS;AAqKrBQ,4BAAYzB,IArKS;AAsKrB0B,+BAAe,uBAASC,MAAT,EAAgB;AAC3B,yBAAKC,KAAL,GAAa,CAAb;AACA,yBAAKC,KAAL,GAAa,CAAb;AACAC,4BAAQC,GAAR,CAAY,SAAZ,EAAuBJ,MAAvB;AACA,wBAAIK,QAAQhC,KAAKC,cAAL,CAAoBgC,gBAApB,CAAqCN,MAArC,CAAZ;AACA3B,yBAAKgC,KAAL,GAAaA,KAAb;AACA;AACA;AACAhC,yBAAKkC,SAAL,CAAeF,KAAf,EAAqB,UAASzB,IAAT,EAAc;AAC/B;AACA;AACA;AACA;AACA;AACA;AACH,qBAPD;AAQH;AAtLoB,aAAX,CAAd;AAwLH,SAnMD;AAVU;AA8Mb;;;;kCAESyB,K,EAAMG,O,EAAQC,K,EAAM;AAAC;AAC3B,iBAAKC,OAAL,CAAa,KAAKC,MAAL,CAAYC,GAAZ,CAAgBC,IAAhB,CAAqBC,SAAlC,EAA6CT,KAA7C,EAAoD;AAChDU,sBAAM,MAD0C;AAEhDC,iCAAiBR,OAF+B;AAGhDS,+BAAeR;AAHiC,aAApD;AAKH;;;;EAvNwBS,U;AAyN7B;;;;;AAGAC,EAAEC,QAAF,EAAYC,KAAZ,CAAkB,YAAW;AACzB,QAAIjD,cAAJ;AACH,CAFD","file":"list.min.js","sourcesContent":["/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n 1. 项目名称：悟空找房h5\r\n 2. 页面名称：esf/list(二手房列表)\r\n 3. 作者：zhaohuagang@lifang.com\r\n -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\nclass ListController extends Controller {\r\n    constructor() {        \r\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n        类的初始化，继承控制器基类\r\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n        super() ;        \r\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n        加载相关页面组件逻辑\r\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n        var self = this;\r\n        self.paramGenerator = new ParamGenerator();\r\n        require([\"../components/filter.min\", \"../components/conning-tower.min\" ] , (Filter) => {\r\n            new ConningTower({                \r\n                \"moduleType\" : \"esf\" ,\r\n                \"cityClick\" : () => {\r\n                    alert(\"在二手房城市选择器中点选了城市\") ;\r\n                } ,\r\n                \"searchResultItemClick\" : (data) => {\r\n                    alert(data) ;\r\n                }\r\n            }) ;\r\n\r\n            self.filter = new Filter({\r\n                el: \".filter\",\r\n                houseType: 1,\r\n                cityId: 43,\r\n                near: false,\r\n                longitude: 222,\r\n                latitude: 234,\r\n                distances: [{value: \"5000\", text: \"不限（智能范围）\"},{value: \"500\", text: \"500米\"},{value: \"1000\", text: \"1000米\"},{value: \"2000\", text: \"2000米\"},{value: \"5000\", text: \"5000米\"}],\r\n                sorts: [{                    \r\n                    text: \"默认排序\"\r\n                },{\r\n                    id: \"1\",\r\n                    text: \"单价从低到高\"\r\n                },{\r\n                    id: \"2\",\r\n                    text: \"单价从高到低\"\r\n                },{\r\n                    id: \"3\",\r\n                    text: \"总价从低到高\"\r\n                },{\r\n                    id: \"4\",\r\n                    text: \"总价从高到低\"\r\n                },{\r\n                    id: \"5\",\r\n                    \"text\": \"面积从小到大\"\r\n                },{\r\n                    id: \"6\",\r\n                    text: \"面积从大到小\"\r\n                },{\r\n                    id: \"7\",\r\n                    text: \"发布时间从近到远\"\r\n                }],\r\n                houseTypes: [{\r\n                    name: \"types\",//用来作为返回查询条件的key\r\n                    title: \"户型\",\r\n                    items: [{\r\n                        id: \"\",\r\n                        text: \"不限\",\r\n                        exclusive: true,//互斥\r\n                    },{\r\n                        id: \"1\",\r\n                        text: \"一室\",\r\n                        exclusive: false,//互斥\r\n                    },{\r\n                        id: \"2\",\r\n                        text: \"二室\",\r\n                        exclusive: false,//互斥\r\n                    },{\r\n                        id: \"3\",\r\n                        text: \"三室\",\r\n                        exclusive: false,//互斥\r\n                    },{\r\n                        id: \"4\",\r\n                        text: \"四室\",\r\n                        exclusive: false,//互斥\r\n                    },{\r\n                        id: \"5\",\r\n                        text: \"五室及以上\",\r\n                        exclusive: false,//互斥\r\n                    }]\r\n                },{\r\n                    name: \"features\",\r\n                    title: \"特色\",\r\n                    items: [{\r\n                        id: \"fd\",\r\n                        text: \"降价\"\r\n                    },{\r\n                        id: \"n\",\r\n                        text: \"新上\"\r\n                    },{\r\n                        id: \"m2\",\r\n                        text: \"满二\"  \r\n                    },{\r\n                        id: \"m5\",\r\n                        text: \"满五唯一\"\r\n                    },{\r\n                        id: \"f1\",\r\n                        text: \"地铁房\"\r\n                    },{\r\n                        id: \"s\",\r\n                        text: \"近学校\"\r\n                    },{\r\n                        id: \"f2\",\r\n                        text: \"有视频\"\r\n                    },{\r\n                        id: \"ns\",\r\n                        text: \"南北通透\"\r\n                    }]\r\n                },{\r\n                    name: \"areas\",\r\n                    title: \"面积\",\r\n                    items: [{\r\n                        id: \"1\",\r\n                        text: \"50以下\"\r\n                    },{\r\n                        id: \"2\",\r\n                        text: \"50-70\"\r\n                    },{\r\n                        id: \"3\",\r\n                        text: \"70-90\"\r\n                    },{\r\n                        id: \"4\",\r\n                        text: \"90-110\"\r\n                    },{\r\n                        id: \"5\",\r\n                        text: \"110-130\"\r\n                    },{\r\n                        id: \"6\",\r\n                        text: \"130-150\"\r\n                    },{\r\n                        id: \"7\",\r\n                        text: \"150-200\"\r\n                    },{\r\n                        id: \"8\",\r\n                        text: \"200-300\"\r\n                    },{\r\n                        id: \"9\",\r\n                        text: \"300以上\"\r\n                    }]\r\n                },{\r\n                    name: \"houseTypes\",\r\n                    title: \"房屋类型\",\r\n                    items: [{\r\n                        id: \"1\",\r\n                        text: \"公寓\"\r\n                    },{\r\n                        id: \"2\",\r\n                        text: \"别墅\"\r\n                    }]\r\n                },{\r\n                    name: \"decorations\",\r\n                    title: \"装修\",\r\n                    items: [{\r\n                        id: \"1\",\r\n                        text: \"毛坯\"\r\n                    },{\r\n                        id: \"2\",\r\n                        text: \"简装\"\r\n                    },{\r\n                        id: \"3\",\r\n                        text: \"中装\"\r\n                    },{\r\n                        id: \"4\",\r\n                        text: \"精装\"\r\n                    },{\r\n                        id: \"5\",\r\n                        text: \"豪装\"\r\n                    }]\r\n                },{\r\n                    name: \"ages\",\r\n                    title: \"房龄\",\r\n                    items: [{\r\n                        id: \"1\",\r\n                        text: \"5年以内\"\r\n                    },{\r\n                        id: \"2\",\r\n                        text: \"5-10年\"\r\n                    },{\r\n                        id: \"3\",\r\n                        text: \"10-20年\"\r\n                    },{\r\n                        id: \"4\",\r\n                        text: \"20年以上\"\r\n                    }]\r\n                }],\r\n                controller: self,\r\n                filterChanged: function(result){ \r\n                    this.total = 0;\r\n                    this.count = 0;                    \r\n                    console.log(\"筛选条件变了：\", result);                                      \r\n                    var param = self.paramGenerator.generateParamObj(result);\r\n                    self.param = param;\r\n                    // self.hideNoData();\r\n                    // self.hideNoMore();\r\n                    self.fetchData(param,function(data){\r\n                        // if(data.count!=0 && data.count<=self.pageSize){// 没有更多了\r\n                        //     self.showNoMore();\r\n                        // }\r\n                        // self.createHouseList(data.data,data.count);  \r\n                        // var qs = ParamGenerator.object2QueryString(param);                        \r\n                        // window.history.pushState(param, \"\", \"./\" + qs);       \r\n                    });\r\n                }                \r\n            });\r\n        }) ;\r\n    }        \r\n    \r\n    fetchData(param,success,error){// 获取列表数据\r\n        this.request(this.apiUrl.esf.list.houselist, param, {\r\n            type: \"POST\",\r\n            successCallback: success,\r\n            errorCallback: error\r\n        });\r\n    }\r\n}\r\n/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n类的初始化\r\n-----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n$(document).ready(function() {\r\n    new ListController ;\r\n}) ;"]}