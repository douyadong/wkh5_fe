{"version":3,"sources":["community/detail.min.js"],"names":["DetailController","self","$","on","window","history","go","require","Album","PreviewImage","that","encryptsubestateid","attr","request","apiUrl","community","chart","subEstateId","successCallback","data","status","dataRes","echartData","recombineM","echartFun","sortArray","seriesData","sort","a","b","parseFloat","maxPrice","Math","ceil","length","myChart","echarts","init","document","getElementById","width","houseId","subestateid","echartBigData","option","tooltip","trigger","triggerOn","position","backgroundColor","padding","textStyle","color","fontSize","formatter","params","ticket","callback","paramsValue","value","common","bigData","grid","bottom","left","right","containLabel","xAxis","monthList","splitLine","show","axisTick","type","boundaryGap","axisLine","lineStyle","axisLabel","interval","rotate","fontFamily","yAxis","inside","index","min","max","splitNumber","series","name","normal","itemStyle","emphasis","borderColor","borderWidth","connectNulls","setOption","forEach","item","month","date","split","indexOf","push","charAt","unitPrice","Controller","ready"],"mappings":";;;;;;;;;;AAAA;;;;;IAKOA,gB;;;AACH,gCAAc;AAAA;;AAAA;;AAEV,YAAIC,YAAJ;AACA;;;AAGAC,UAAE,YAAF,EAAgBC,EAAhB,CAAmB,OAAnB,EAA2B,YAAU;AACjCC,mBAAOC,OAAP,CAAeC,EAAf,CAAkB,CAAC,CAAnB;AACH,SAFD;AAGA;;;AAGAC,gBAAQ,CAAC,yBAAD,EAA2B,iCAA3B,CAAR,EAAsE,UAASC,KAAT,EAAgBC,YAAhB,EAA6B;AAC/FA,yBAAa,qBAAb;AACH,SAFD;AAGA;;;AAGA,YAAIC,YAAJ;AACA;AACA,YAAKC,qBAAqBT,EAAE,aAAF,EAAiBU,IAAjB,CAAsB,yBAAtB,CAA1B;AACA,cAAKC,OAAL,CAAa,MAAKC,MAAL,CAAYC,SAAZ,CAAsBC,KAAnC,EAAyC,EAACC,aAAYN,kBAAb,EAAzC,EAA0E;AAACO,2BAAD,2BAAiBC,IAAjB,EAAsB;AACxF,oBAAIA,KAAKC,MAAL,IAAe,CAAnB,EAAqB;AACjB,wBAAIC,UAAUF,IAAd;AACA,wBAAIG,aAAcZ,KAAKa,UAAL,CAAgBF,QAAQF,IAAxB,CAAlB;AACAT,yBAAKc,SAAL,CAAeF,UAAf;AACH;AACJ;AANqE,SAA1E;AArBU;AA4Bb;;;;;;AAEA;;;kCAGUA,U,EAAW;AACjB,gBAAIG,YAAYH,WAAWI,UAAX,CAAsBC,IAAtB,CAA2B,UAASC,CAAT,EAAYC,CAAZ,EAAe;AACtD,uBAAOC,WAAWF,CAAX,IAAgBE,WAAWD,CAAX,CAAvB;AACH,aAFe,CAAhB;AAGA,gBAAIE,WAAWC,KAAKC,IAAL,CAAWR,UAAUA,UAAUS,MAAV,GAAmB,CAA7B,IAAkC,KAAnC,GAA4C,CAAtD,IAA2D,KAA1E;AACA,gBAAIC,UAAUC,QAAQC,IAAR,CAAaC,SAASC,cAAT,CAAwB,MAAxB,CAAb,EAA6C,EAAEC,OAAO,KAAT,EAA7C,CAAd;AACA,gBAAI9B,OAAO,IAAX;AACA;AACA,gBAAI+B,UAAWvC,EAAE,aAAF,EAAiBU,IAAjB,CAAsB,cAAtB,CAAf;AACA,gBAAI8B,cAAexC,EAAE,aAAF,EAAiBU,IAAjB,CAAsB,kBAAtB,CAAnB;AACA,gBAAI+B,gBAAgB;AAChB,6BAAa,SADG;AAEhB,8BAAc,EAAE,YAAaF,OAAf,EAAyB,aAAaC,WAAtC,EAFE;AAGhB,wBAAQ;AAHQ,aAApB;AAKA;AACA,gBAAIE,SAAS;AACTC,yBAAS,EAAO;AACZC,6BAAS,MADJ;AAELC,+BAAW,OAFN;AAGLC,8BAAU,KAHL;AAILC,qCAAiB,SAJZ;AAKLC,6BAAS,CALJ;AAMLC,+BAAW;AACPC,+BAAO,MADA;AAEPC,kCAAU;AAFH,qBANN;AAULC,+BAAU,mBAAUC,MAAV,EAAkBC,MAAlB,EAA0BC,QAA1B,EAAoC;AAC1C,4BAAIC,cAAeH,OAAOI,KAAP,GAAe,GAAlC;AACAjD,6BAAKG,OAAL,CAAaH,KAAKI,MAAL,CAAY8C,MAAZ,CAAmBC,OAAhC,EAA0ClB,aAA1C,EAAyD,YAAY,CAEpE,CAFD;AAGA,+BAAOe,WAAP;AACH;AAhBI,iBADA;AAmBTI,sBAAM;AACFC,4BAAQ,EADN;AAEFC,0BAAM,IAFJ;AAGFC,2BAAO,KAHL;AAIFC,kCAAc;AAJZ,iBAnBG;AAyBTC,uBAAO;AACHhD,0BAAMG,WAAW8C,SADd,EAC2B;AAC9BC,+BAAW,EAACC,MAAM,KAAP,EAFR,EAEuB;AAC1BC,8BAAU,EAACD,MAAM,KAAP,EAHP,EAGuB;AAC1BtB,8BAAU,QAJP;AAKHwB,0BAAM,UALH;AAMHC,iCAAa,KANV;AAOHC,8BAAU;AACNC,mCAAW;AACPvB,mCAAO,SADA,CACW;AADX;AADL,qBAPP;AAYHwB,+BAAW;AACPC,kCAAU,CADH;AAEPC,gCAAQ,CAFD,EAEI;AACX3B,mCAAW;AACPC,mCAAO,MADA;AAEPC,sCAAU,EAFH;AAGP0B,wCAAY;AAHL;AAHJ;AAZR,iBAzBE;AA+CTC,uBAAO;AACHN,8BAAU,EAACJ,MAAM,KAAP,EADP,EACwB;AAC3BD,+BAAW;AACPC,8BAAM,IADC,EACM;AACbK,mCAAW;AACPvB,mCAAO,CAAC,SAAD,CADA,CACY;AADZ;AAFJ,qBAFR;AAQHmB,8BAAU,EAACD,MAAM,KAAP,EARP,EAQqB;AACxBM,+BAAU;AACNK,gCAAQ,KADF;AAEN9B,mCAAW;AACPC,mCAAO;AADA,yBAFL;AAKNE,mCAAW,mBAASK,KAAT,EAAgBuB,KAAhB,EAAuB;AAC9B,gCAAIvB,SAAS,CAAb,EAAgB;AACZ,uCAAO,EAAP;AACH,6BAFD,MAEO;AACH,uCAAOA,QAAQ,KAAR,GAAgB,GAAvB;AACH;AACJ;AAXK,qBATP;AAsBHwB,yBAAI,CAtBD;AAuBHC,yBAAIrD,QAvBD;AAwBHsD,iCAAa,CAxBV;AAyBHR,8BAAU9C,WAAW;AAzBlB,iBA/CE;AA0ETuD,wBAAQ,CAAC;AACLC,0BAAM,IADD;AAELf,0BAAM,MAFD;AAGLG,+BAAU;AACNa,gCAAO;AACHpC,mCAAM,SADH,CACc;AADd;;AADD,qBAHL;AASLqC,+BAAU;AACND,gCAAO;AACHpC,mCAAO,SADJ,CACc;AADd,yBADD;AAINsC,kCAAU,EAAE;AACRC,yCAAa,SADP;AAENC,yCAAa,CAFP;AAGNxC,mCAAO;AAHD;AAJJ,qBATL;AAmBLyC,kCAAa,IAnBR;AAoBL1E,0BAAMG,WAAWI;AApBZ,iBAAD;AA1EC,aAAb;AAiGAS,oBAAQ2D,SAAR,CAAkBlD,MAAlB;AACH;;;;AACD;;;mCAGWzB,I,EAAM;AACb,gBAAIG,aAAa;AACb8C,2BAAW,EADE;AAEb1C,4BAAY;AAFC,aAAjB;AAIA,gBAAIP,IAAJ,EAAU;AACNA,qBAAK4E,OAAL,CAAa,UAACC,IAAD,EAAU;AACnB,wBAAIC,QAAQD,KAAKE,IAAL,CAAUC,KAAV,CAAgB,GAAhB,EAAqB,CAArB,CAAZ;AACA,wBAAIF,MAAMG,OAAN,CAAc,GAAd,KAAsB,CAA1B,EAA6B;AACzB9E,mCAAW8C,SAAX,CAAqBiC,IAArB,CAA0BJ,MAAMK,MAAN,CAAa,CAAb,IAAgB,GAA1C;AACH,qBAFD,MAEO;AACHhF,mCAAW8C,SAAX,CAAqBiC,IAArB,CAA0BJ,QAAM,GAAhC;AACH;AACD3E,+BAAWI,UAAX,CAAsB2E,IAAtB,CAA2BL,KAAKO,SAAhC;AACH,iBARD;AASH;AACD,mBAAOjF,UAAP;AACH;;;;EAzK0BkF,U;AA2KhC;;;;;AAGAtG,EAAEoC,QAAF,EAAYmE,KAAZ,CAAkB,YAAW;AACzB,QAAIzG,gBAAJ;AACH,CAFD","file":"detail.min.js","sourcesContent":["/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n 1. 项目名称：悟空找房h5\r\n 2. 页面名称：subestate/detail(小区-详情)\r\n 3. 作者：tangxuyang@lifang.com\r\n -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n class DetailController extends Controller {\r\n    constructor() {\r\n        super() ;             \r\n        let self = this ;\r\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n        页面顶部的返回按钮\r\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n        $('.icon-back').on('click',function(){\r\n            window.history.go(-1) ;\r\n        }) ;\r\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n        相册集图片预览功能\r\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n        require(['../components/album.min','../components/preview-image.min'],function(Album, PreviewImage){\r\n            PreviewImage('.subestate-comments');\r\n        }) ;\r\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n        请求接口 获取折线图参数\r\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n        let that = this;\r\n        // 获取小区加密Id\r\n        let  encryptsubestateid = $('#estateName').attr('data-encryptsubestateid');\r\n        this.request(this.apiUrl.community.chart,{subEstateId:encryptsubestateid},{successCallback(data){\r\n                if (data.status == 1){\r\n                    let dataRes = data;\r\n                    let echartData =  that.recombineM(dataRes.data);\r\n                    that.echartFun(echartData) ;\r\n                }\r\n            }});\r\n    };\r\n\r\n     /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n     折线图函数异步操作\r\n     -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n     echartFun(echartData){\r\n         let sortArray = echartData.seriesData.sort(function(a, b) {\r\n             return parseFloat(a) - parseFloat(b);\r\n         });\r\n         let maxPrice = Math.ceil((sortArray[sortArray.length - 1] / 10000) + 1) * 10000;\r\n         let myChart = echarts.init(document.getElementById('main'),{ width: '88%' });\r\n         let that = this;\r\n         // 给折线图dome增加埋点\r\n         let houseId =  $('#estateName').attr('data-houseid');\r\n         let subestateid =  $('#estateName').attr('data-subestateid') ;\r\n         let echartBigData = {\r\n             \"eventName\": \"1067014\",\r\n             \"eventParam\": { \"house_id\" : houseId , \"estate_id\": subestateid },\r\n             \"type\": 2\r\n         };\r\n         // 指定图表的配置项和数据\r\n         let option = {\r\n             tooltip: {      // 提示框\r\n                 trigger: 'item',\r\n                 triggerOn: 'click',\r\n                 position: 'top',\r\n                 backgroundColor: '#92A7C3',\r\n                 padding: 4,\r\n                 textStyle: {\r\n                     color: '#fff',\r\n                     fontSize: '12'\r\n                 },\r\n                 formatter:function (params, ticket, callback) {\r\n                     let paramsValue =  params.value + \"元\";\r\n                     that.request(that.apiUrl.common.bigData , echartBigData ,function () {\r\n\r\n                     });\r\n                     return paramsValue;\r\n                 }\r\n             },\r\n             grid: {\r\n                 bottom: 20,\r\n                 left: '3%',\r\n                 right: '10%',\r\n                 containLabel: true,\r\n             },\r\n             xAxis: {\r\n                 data: echartData.monthList ,  // X坐标数据\r\n                 splitLine: {show: false}, // 控制网格线是否显示\r\n                 axisTick: {show: false},  // 去除x轴上的刻度线\r\n                 position: 'bottom',\r\n                 type: 'category',\r\n                 boundaryGap: false,\r\n                 axisLine: {\r\n                     lineStyle: {\r\n                         color: '#979797', // x轴颜色\r\n                     }\r\n                 },\r\n                 axisLabel: {\r\n                     interval: 0,\r\n                     rotate: 0, //60度角倾斜显示\r\n                     textStyle: {\r\n                         color: '#999',\r\n                         fontSize: 12,\r\n                         fontFamily: '微软雅黑'\r\n                     }\r\n                 },\r\n             },\r\n             yAxis: {\r\n                 axisLine: {show: false},   // y轴是否显示\r\n                 splitLine: {\r\n                     show: true,  // 控制网格线是否显示\r\n                     lineStyle: {\r\n                         color: ['#979797'] // y刻度颜色\r\n                     }\r\n                 },\r\n                 axisTick: {show: false},// 去除y轴上的刻度线\r\n                 axisLabel:{\r\n                     inside: false,\r\n                     textStyle: {\r\n                         color: '#999',\r\n                     },\r\n                     formatter: function(value, index) {\r\n                         if (value == 0) {\r\n                             return \"\";\r\n                         } else {\r\n                             return value / 10000 + '万';\r\n                         }\r\n                     }\r\n                 },\r\n                 min:0,\r\n                 max:maxPrice,\r\n                 splitNumber: 6,\r\n                 interval: maxPrice / 4\r\n             },\r\n             series: [{\r\n                 name: '销量',\r\n                 type: 'line',\r\n                 lineStyle:{\r\n                     normal:{\r\n                         color:'#92A7C3', // 折线条颜色\r\n                     }\r\n\r\n                 },\r\n                 itemStyle:{\r\n                     normal:{\r\n                         color: \"#92A7C3\" //图标颜色\r\n                     },\r\n                     emphasis: { //重点，强调时候的样式，即当鼠标悬停或点击上去的时候的拐点的样式\r\n                         borderColor: '#92A7C3',\r\n                         borderWidth: 2,\r\n                         color: '#92A7C3'\r\n                     }\r\n                 },\r\n                 connectNulls:true,\r\n                 data: echartData.seriesData,\r\n             }],\r\n         };\r\n         myChart.setOption(option);\r\n     };\r\n     /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n     处理得到的数据的函数  处理月份和数据\r\n     -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n     recombineM(data) {\r\n         let echartData = {\r\n             monthList: [],\r\n             seriesData: []\r\n         };\r\n         if (data) {\r\n             data.forEach((item) => {\r\n                 let month = item.date.split('-')[1];\r\n                 if (month.indexOf('0') == 0) {\r\n                     echartData.monthList.push(month.charAt(1)+'月')\r\n                 } else {\r\n                     echartData.monthList.push(month+'月')\r\n                 }\r\n                 echartData.seriesData.push(item.unitPrice)\r\n             });\r\n         }\r\n         return echartData ;\r\n     }\r\n}\r\n/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n类的初始化\r\n-----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n$(document).ready(function() {\r\n    new DetailController;\r\n}) ;\r\n"]}