{"version":3,"sources":["components/conning-tower.min.js"],"names":["ConningTower","apiUrl","moduleType","addEventListener","$","click","slideDown","children","length","request","requestData","success","result","cities","filterBusinessCity","data","$ul","Object","keys","domestic","overseas","append","$domesticFrame","document","createElement","addClass","key","forEach","city","cityId","pinyin","cityType","cityName","$overseasFrame","citySelectorEventDelegate","body","css","fadeIn","animate","right","fadeOut","history","back","show","hide","val","empty","nativeSchema","loadSchema","schema","protocal","loadWaiting","failUrl","apkInfo","PKG","CATEGORY","ACTION","$input","keyup","trim","noop","ajax","url","dataType","error","e","tips","status","toString","message","name","frameMarginTop","is","eq","$tabsHandles","removeClass","text","slideUp","typeMapper","typeValue","domesticCityList","has","businessList","business","businessId","shoupin","charAt","toUpperCase","hasOwnProperty","push","overseaCityList"],"mappings":";;;;;;AAAA;;;;;IAKOA,Y;AACF,gCAAqC;AAAA,YAAvBC,MAAuB,QAAvBA,MAAuB;AAAA,YAAdC,UAAc,QAAdA,UAAc;;AAAA;;AACjC,aAAKD,MAAL,GAAcA,MAAd,CADiC,CACT;AACxB,aAAKC,UAAL,GAAkBA,UAAlB,CAFiC,CAED;AAChC,aAAKC,gBAAL;AACH;AACD;;;;;;;2CAGmB;AAAA;;AACf;;;AAGDC,cAAE,sBAAF,EAA0BC,KAA1B,CAAgC,YAAM;AAClCD,kBAAE,gBAAF,EAAoBE,SAApB,CAA8B,GAA9B;AACA,oBAAGF,EAAE,4BAAF,EAAgCG,QAAhC,GAA2CC,MAA9C,EAAsD;AACrD;;;AAGD,sBAAKC,OAAL,CAAa;AACTR,4BAAS,0BADA;AAETS,iCAAc,EAFL;AAGTC,6BAAU,iBAACC,MAAD,EAAY;AAClB,4BAAIC,SAAS,MAAKC,kBAAL,CAAwBF,OAAOG,IAA/B,CAAb,CADkB,CACmC;AACrD;;;AAGA,4BAAIC,MAAM,kHAAV;AACA,4BAAI,CAAEC,OAAOC,IAAP,CAAYL,OAAOM,QAAnB,EAA6BX,MAA/B,IAAyC,CAAES,OAAOC,IAAP,CAAYL,OAAOO,QAAnB,EAA6BZ,MAA5E,EAAoF;AAChF,gCAAIS,OAAOC,IAAP,CAAYL,OAAOM,QAAnB,EAA6BX,MAAjC,EAA0CQ,MAAM,2IAAN,CAA1C,KACKA,MAAM,2IAAN;AACR;AACDZ,0BAAE,yBAAF,EAA6BiB,MAA7B,CAAoCL,GAApC;AACA;;;AAGA,4BAAIM,iBAAiBlB,EAAEmB,SAASC,aAAT,CAAuB,KAAvB,CAAF,EAAiCC,QAAjC,CAA0C,qBAA1C,CAArB;AACA,4BAAIR,OAAOC,IAAP,CAAYL,OAAOM,QAAnB,EAA6BX,MAAjC,EAA0C;AACtC,iCAAK,IAAIkB,GAAT,IAAgBb,OAAOM,QAAvB,EAAkC;AAC9BG,+CAAeD,MAAf,CAAsB,WAAWK,GAAX,GAAiB,SAAvC;AACAb,uCAAOM,QAAP,CAAgBO,GAAhB,EAAqBC,OAArB,CAA6B,UAACC,IAAD,EAAU;AACnCN,mDAAeD,MAAf,CAAsB,sBAAsBO,KAAKC,MAA3B,GAAoC,mBAApC,GAA0DD,KAAKE,MAA/D,GAAwE,qBAAxE,GAAgGF,KAAKG,QAArG,GAAgH,KAAhH,GAAwHH,KAAKI,QAA7H,GAAwI,MAA9J;AACH,iCAFD;AAGH;AACJ;AACD5B,0BAAE,gBAAF,EAAoBiB,MAApB,CAA2BC,cAA3B;;AAEA,4BAAIW,iBAAiB7B,EAAEmB,SAASC,aAAT,CAAuB,KAAvB,CAAF,EAAiCC,QAAjC,CAA0C,qBAA1C,CAArB;AACA,4BAAIR,OAAOC,IAAP,CAAYL,OAAOO,QAAnB,EAA6BZ,MAAjC,EAA0C;AACtC,iCAAK,IAAIkB,IAAT,IAAgBb,OAAOO,QAAvB,EAAkC;AAC9Ba,+CAAeZ,MAAf,CAAsB,WAAWK,IAAX,GAAiB,SAAvC;AACAb,uCAAOO,QAAP,CAAgBM,IAAhB,EAAqBC,OAArB,CAA6B,UAACC,IAAD,EAAU;AACnCK,mDAAeZ,MAAf,CAAsB,sBAAsBO,KAAKC,MAA3B,GAAoC,mBAApC,GAA0DD,KAAKE,MAA/D,GAAwE,qBAAxE,GAAgGF,KAAKG,QAArG,GAAgH,KAAhH,GAAwHH,KAAKI,QAA7H,GAAwI,MAA9J;AACH,iCAFD;AAGH;AACJ;AACD5B,0BAAE,gBAAF,EAAoBiB,MAApB,CAA2BY,cAA3B;AACA;;;AAGA,8BAAKC,yBAAL;AACH;AA1CQ,iBAAb;AA4CH,aAlDD;AAmDC;;;AAGD9B,cAAE,8BAAF,EAAkCC,KAAlC,CAAwC,YAAM;AAC1CD,kBAAEmB,SAASY,IAAX,EAAiBC,GAAjB,CAAqB,EAAE,cAAe,QAAjB,EAArB,EAD0C,CACW;AACrDhC,kBAAE,iBAAF,EAAqBiC,MAArB,CAA4B,GAA5B;AACAjC,kBAAE,gBAAF,EAAoBkC,OAApB,CAA6B;AACzBC,2BAAQ;AADiB,iBAA7B,EAEI,GAFJ;AAGH,aAND;AAOA;;;AAGAnC,cAAE,iBAAF,EAAqBC,KAArB,CAA2B,YAAM;AAC7BD,kBAAEmB,SAASY,IAAX,EAAiBC,GAAjB,CAAqB,EAAE,cAAe,MAAjB,EAArB,EAD6B,CACsB;AACnDhC,kBAAE,iBAAF,EAAqBoC,OAArB,CAA6B,GAA7B;AACApC,kBAAE,gBAAF,EAAoBkC,OAApB,CAA6B;AACzBC,2BAAQ;AADiB,iBAA7B,EAEI,GAFJ;AAGH,aAND;AAOA;;;AAGAnC,cAAE,sBAAF,EAA0BC,KAA1B,CAAgC,YAAM;AAClCoC,wBAAQC,IAAR;AACH,aAFD;AAGA;;;AAGAtC,cAAE,sBAAF,EAA0BC,KAA1B,CAAgC,YAAM;AAClCD,kBAAE,kBAAF,EAAsBuC,IAAtB,CAA2B,EAA3B;AACH,aAFD;AAGA;;;AAGAvC,cAAE,2CAAF,EAA+CC,KAA/C,CAAqD,YAAM;AACvDD,kBAAE,kBAAF,EAAsBwC,IAAtB,CAA2B,EAA3B;AACH,aAFD;AAGA;;;AAGAxC,cAAE,gEAAF,EAAoEC,KAApE,CAA0E,YAAM;AAC5ED,kBAAE,0DAAF,EAA8DyC,GAA9D,CAAkE,EAAlE;AACAzC,kBAAE,wBAAF,EAA4B0C,KAA5B;AACH,aAHD;AAIA;;;AAGA1C,cAAE,8BAAF,EAAkCC,KAAlC,CAAwC,YAAM;AAC1C0C,6BAAaC,UAAb,CAAwB;AACpBC,4BAAS,eADW,EACS;AAC7BC,8BAAW,MAFS,EAEA;AACpBC,iCAAc,MAHM,EAGG;AACvBC,6BAAU,kDAJU,EAI4C;AAChE;AACAC,6BAAU;AACNC,6BAAM,eADA;AAENC,kCAAW,iCAFL;AAGNC,gCAAS;AAHH;AANU,iBAAxB;AAYH,aAbD;AAcA;;;AAGA,gBAAIC,SAASrD,EAAE,0DAAF,CAAb;AACAqD,mBAAOC,KAAP,CAAa,YAAM;AACf,sBAAKjD,OAAL,CAAa;AACTR,4BAAS,MAAKA,MADL;AAETS,iCAAc,EAAE,WAAYN,EAAEuD,IAAF,CAAOF,OAAOZ,GAAP,EAAP,CAAd,EAFL;AAGTlC,6BAAU,mBAAM;AACZ;AACH;AALQ,iBAAb;AAOH,aARD;AAUF;AACD;;;;;;uCAGoD;AAAA,gBAA3CV,MAA2C,SAA3CA,MAA2C;AAAA,gBAAlCS,WAAkC,SAAlCA,WAAkC;AAAA,sCAApBC,OAAoB;AAAA,gBAApBA,QAAoB,iCAAVP,EAAEwD,IAAQ;;AACjD,gBAAI;AACAxD,kBAAEyD,IAAF,CAAO;AACHC,yBAAM7D,MADH;AAEHc,0BAAOL,WAFJ;AAGHqD,8BAAW,MAHR;AAIHC,2BAAQ,eAASC,CAAT,EAAY;AAChB7D,0BAAE8D,IAAF,CAAQ,YAAYjE,MAAZ,GAAqB,gBAA7B,EAAgD,CAAhD;AACH,qBANE;AAOHU,6BAAU,iBAASI,IAAT,EAAe;AACrB,4BAAIA,KAAKoD,MAAL,CAAYC,QAAZ,OAA2B,GAA/B,EAAqC;AACjC;AACAzD,qCAAQI,IAAR;AACH,yBAHD,MAIKX,EAAE8D,IAAF,CAAQnD,KAAKsD,OAAb,EAAuB,CAAvB;AACR;AAbE,iBAAP;AAeH,aAhBD,CAiBA,OAAMJ,CAAN,EAAS;AACL7D,kBAAE8D,IAAF,CAAQ,UAAUD,EAAEK,IAAZ,GAAmB,SAAnB,GAA+BL,EAAEI,OAAzC,EAAmD,CAAnD;AACH;AACJ;AACD;;;;;;oDAG6B;AACxB;;;AAGD,gBAAIE,iBAAiBnE,EAAE,sCAAF,EAA0CoE,EAA1C,CAA6C,UAA7C,IAA2D,MAA3D,GAAoE,MAAzF;AACApE,cAAE,4BAAF,EAAgCgC,GAAhC,CAAoC,EAAE,cAAemC,cAAjB,EAApC;AACC;;;AAGDnE,cAAE,gCAAgCA,EAAE,4CAAF,EAAgDqE,EAAhD,CAAmD,CAAnD,EAAsD1D,IAAtD,CAA2D,MAA3D,CAAlC,EAAsG4B,IAAtG;AACA;;;AAGA,gBAAI+B,eAAetE,EAAE,yCAAF,CAAnB;AACAsE,yBAAarE,KAAb,CAAmB,YAAU;AACzBqE,6BAAaC,WAAb,CAAyB,IAAzB;AACAvE,kBAAE,IAAF,EAAQqB,QAAR,CAAiB,IAAjB;AACArB,kBAAE,4BAAF,EAAgCwC,IAAhC;AACAxC,kBAAE,gCAAgCA,EAAE,IAAF,EAAQW,IAAR,CAAa,MAAb,CAAlC,EAAwD4B,IAAxD;AACH,aALD;AAMA;;;AAGAvC,cAAE,8BAAF,EAAkCC,KAAlC,CAAwC,YAAW;AAC/CD,kBAAE,2BAAF,EAA+BwE,IAA/B,CAAoCxE,EAAE,IAAF,EAAQwE,IAAR,EAApC;AACAxE,kBAAE,gBAAF,EAAoByE,OAApB,CAA4B,GAA5B;AACH,aAHD;AAIF;AACD;;;;;;2CAGkB9D,I,EAAM;AACrB,gBAAI+D,aAAa,EAAE,OAAQ,CAAV,EAAc,QAAS,CAAvB,EAA2B,MAAO,CAAlC,EAAjB;AACA,gBAAIC,YAAYD,WAAW,KAAK5E,UAAhB,CAAhB;AACA,gBAAIU,SAAS,EAAE,YAAa,EAAf,EAAoB,YAAa,EAAjC,EAAb;AACAG,oBAAQA,KAAKiE,gBAAb,IAAiCjE,KAAKiE,gBAAL,CAAsBrD,OAAtB,CAA8B,UAACC,IAAD,EAAU;AACrE,oBAAIqD,MAAM,KAAV;AACArD,qBAAKsD,YAAL,IAAqBtD,KAAKsD,YAAL,CAAkBvD,OAAlB,CAA0B,UAACwD,QAAD,EAAc;AACzD,wBAAGA,SAASC,UAAT,KAAwBL,SAA3B,EAAsCE,MAAM,IAAN;AACzC,iBAFoB,CAArB;AAGA,oBAAGA,GAAH,EAAQ;AACJ,wBAAII,UAAUzD,KAAKE,MAAL,CAAYwD,MAAZ,CAAmB,CAAnB,EAAsBC,WAAtB,EAAd;AACA,wBAAI,CAAE3E,OAAOO,QAAP,CAAgBqE,cAAhB,CAA+BH,OAA/B,CAAN,EAA+CzE,OAAOO,QAAP,CAAgBkE,OAAhB,IAA2B,EAA3B;AAC/CzE,2BAAOO,QAAP,CAAgBkE,OAAhB,EAAyBI,IAAzB,CAA8B,EAAE,UAAW7D,KAAKC,MAAlB,EAA2B,YAAaD,KAAKI,QAA7C,EAAwD,UAAWJ,KAAKE,MAAxE,EAAiF,YAAaF,KAAKG,QAAnG,EAA9B;AACH;AACJ,aAVgC,CAAjC;AAWAhB,oBAAQA,KAAK2E,eAAb,IAAgC3E,KAAK2E,eAAL,CAAqB/D,OAArB,CAA6B,UAACC,IAAD,EAAU;AACnE,oBAAIqD,MAAM,KAAV;AACArD,qBAAKsD,YAAL,IAAqBtD,KAAKsD,YAAL,CAAkBvD,OAAlB,CAA0B,UAACwD,QAAD,EAAc;AACzD,wBAAGA,SAASC,UAAT,KAAwBL,SAA3B,EAAsCE,MAAM,IAAN;AACzC,iBAFoB,CAArB;AAGA,oBAAGA,GAAH,EAAQ;AACJ,wBAAII,UAAUzD,KAAKE,MAAL,CAAYwD,MAAZ,CAAmB,CAAnB,EAAsBC,WAAtB,EAAd;AACA3E,2BAAOQ,QAAP,CAAgBiE,OAAhB,EAAyBI,IAAzB,CAA8B,EAAE,UAAW7D,KAAKC,MAAlB,EAA2B,YAAaD,KAAKI,QAA7C,EAAwD,UAAWJ,KAAKE,MAAxE,EAAiF,YAAaF,KAAKG,QAAnG,EAA9B;AACH;AACJ,aAT+B,CAAhC;AAUA,mBAAOnB,MAAP;AACH;AACD","file":"conning-tower.min.js","sourcesContent":["/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n 1. 项目名称：悟空找房h5\n 2. 页面名称：components -> conning-tower(列表页司令塔，包括返回、搜索、汉堡菜单等信息)\n 3. 作者：zhaohuagang@lifang.com\n -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n class ConningTower {\n     constructor({ apiUrl , moduleType }) {         \n         this.apiUrl = apiUrl ;  //搜索用的接口地址\n         this.moduleType = moduleType ;  //模块类型，可以是：xf | esf | rent\n         this.addEventListener() ;  \n     }\n     /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n    组件相关dom节点事件绑定\n     -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n     addEventListener() {\n         /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        点击城市选择入口弹出城市选择器并根据是否有了数据来决定是否需要请求接口渲染\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        $(\".conning-tower dl dt\").click(() => {\n            $(\".city-selector\").slideDown(200) ;\n            if($(\".city-selector .tabs-frame\").children().length) return ;\n             /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n            请求业务城市数据并绘制，绘制完后绑定事件\n            -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n            this.request({ \n                apiUrl : \"/api/common/businessCity\" , \n                requestData : { } , \n                success : (result) => {                    \n                    let cities = this.filterBusinessCity(result.data) ;  //取出所有满足条件的城市清单                    \n                    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n                    绘制tabs-handle\n                    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n                    let $ul = \"<ul class=\\\"tabs-handle\\\"><li class=\\\"on\\\" data-sign=\\\"domestic\\\">国内</li><li data-sign=\\\"overseas\\\">国际</li></ul>\" ;\n                    if( ! Object.keys(cities.domestic).length || ! Object.keys(cities.overseas).length) {                        \n                        if( Object.keys(cities.domestic).length ) $ul = \"<ul class=\\\"tabs-handle\\\" style=\\\"display : none\\\"><li class=\\\"on\\\" data-sign=\\\"domestic\\\">国内</li><li data-sign=\\\"overseas\\\">国际</li></ul>\" ;\n                        else $ul = \"<ul class=\\\"tabs-handle\\\" style=\\\"display : none\\\"><li data-sign=\\\"domestic\\\">国内</li><li class=\\\"on\\\" data-sign=\\\"overseas\\\">国际</li></ul>\" ;\n                    }                   \n                    $(\".city-selector .caption\").append($ul) ;\n                    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n                    绘制tabs-frame\n                    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/                    \n                    let $domesticFrame = $(document.createElement(\"DIV\")).addClass(\"tabs-frame domestic\") ;\n                    if( Object.keys(cities.domestic).length ) {\n                        for( let key in cities.domestic ) {\n                            $domesticFrame.append(\"<span>\" + key + \"</span>\") ;\n                            cities.domestic[key].forEach((city) => {\n                                $domesticFrame.append(\"<a data-cityid=\\\"\" + city.cityId + \"\\\" data-pinyin=\\\"\" + city.pinyin + \"\\\" data-cityType=\\\"\" + city.cityType + \"\\\">\" + city.cityName + \"</a>\") ;\n                            }) ;\n                        }\n                    }\n                    $(\".city-selector\").append($domesticFrame) ;\n\n                    let $overseasFrame = $(document.createElement(\"DIV\")).addClass(\"tabs-frame overseas\") ;\n                    if( Object.keys(cities.overseas).length ) {\n                        for( let key in cities.overseas ) {\n                            $overseasFrame.append(\"<span>\" + key + \"</span>\") ;\n                            cities.overseas[key].forEach((city) => {\n                                $overseasFrame.append(\"<a data-cityid=\\\"\" + city.cityId + \"\\\" data-pinyin=\\\"\" + city.pinyin + \"\\\" data-cityType=\\\"\" + city.cityType + \"\\\">\" + city.cityName + \"</a>\") ;\n                            }) ;\n                        }\n                    }\n                    $(\".city-selector\").append($overseasFrame) ;\n                    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n                    最后给dom节点绑定事件\n                    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n                    this.citySelectorEventDelegate() ;\n                } \n            }) ; \n        }) ;\n         /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        点击汉堡菜单弹出子菜单\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        $(\".conning-tower .hamburg-menu\").click(() => {\n            $(document.body).css({ \"overflow-y\" : \"hidden\" }) ;  //滚动条隐藏\n            $(\".navigator-mask\").fadeIn(100) ;\n            $(\".navigator-pop\").animate( {\n                right : 0\n            } , 100 ) ;\n        }) ;\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        点击子菜单遮罩关闭子菜单\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        $(\".navigator-mask\").click(() => {\n            $(document.body).css({ \"overflow-y\" : \"auto\" }) ;  //如果有滚动条就显示  \n            $(\".navigator-mask\").fadeOut(100) ;\n            $(\".navigator-pop\").animate( {\n                right : \"-200px\"\n            } , 100 ) ;              \n        }) ;\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        点击返回按钮回到假的搜索场景\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        $(\".conning-tower .back\").click(() => {\n            history.back() ;\n        }) ;\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        点击假的搜索区域出现真的搜索\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        $(\".conning-tower dl dd\").click(() => {\n            $(\".substitute-mask\").show(50) ;\n        }) ;\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        真搜索区域返回按钮事件监听\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        $(\".substitute-mask .search-substitute .back\").click(() => {\n            $(\".substitute-mask\").hide(50) ;\n        }) ;\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        真搜索区域清除输入图标事件监听\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        $(\".substitute-mask .search-substitute .input-section .icon-close\").click(() => {\n            $(\".substitute-mask .search-substitute .input-section input\").val(\"\") ;\n            $(\".substitute-mask .list\").empty() ;\n        }) ;\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        pop菜单中的下载APP菜单事件监听\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        $(\".navigator-pop .app-download\").click(() => {\n            nativeSchema.loadSchema({               \n                schema : \"external_call\"  ,  // 通过NN打开某个链接\n                protocal : \"wkzf\" , //schema头协议，实际情况填写\n                loadWaiting : \"1500\" , //发起唤醒请求后，会等待loadWaiting时间，超时则跳转到failUrl，默认3000ms                \n                failUrl : \"https://m.wkzf.com/download/transit?from=esfList\" ,  //唤起失败时的跳转链接，默认跳转到下载页\n                // apk信息,请根据实际情况填写\n                apkInfo : {\n                    PKG : \"com.wukong.ua\" ,\n                    CATEGORY : \"android.intent.category.DEFAULT\" ,\n                    ACTION : \"android.intent.action.VIEW\"\n                }\n            }) ;\n        }) ;\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        真搜索区域输入监听\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        let $input = $(\".substitute-mask .search-substitute .input-section input\") ;\n        $input.keyup(() => {\n            this.request({ \n                apiUrl : this.apiUrl , \n                requestData : { \"keyword\" : $.trim($input.val()) } , \n                success : () => {\n                    //对获取到的搜索结果列表进行绘制\n                } \n            }) ;            \n        }) ;\n        \n     }\n     /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n    本组件ajax请求封装\n    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n    request({ apiUrl , requestData , success = $.noop }) {\n        try {\n            $.ajax({\n                url : apiUrl ,                    \n                data : requestData ,\n                dataType : \"json\" ,                            \n                error : function(e) {\n                    $.tips( \"调用数据接口：\" + apiUrl + \" 失败！请测试您的数据接口！\" , 3 ) ;                                   \n                } ,\n                success : function(data) {                \n                    if (data.status.toString() === \"1\")  {\n                        //获取到接口数据，进行处理\n                        success(data) ;\n                    }\n                    else $.tips( data.message , 3 ) ;\n                }\n            }) ;\n        }\n        catch(e) {\n            $.tips( \"错误名称：\" + e.name + \"\\n错误描述：\" + e.message , 3 ) ;\n        }\n    }\n    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n    等渲染好城市选择器后进行的事件委托\n    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n     citySelectorEventDelegate() {\n         /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------         \n        根据tabs-handle的显示状态决定tabs-frame的margin-top值\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        let frameMarginTop = $(\".city-selector .caption .tabs-handle\").is(\":visible\") ? \"72px\" : \"28px\" ;\n        $(\".city-selector .tabs-frame\").css({ \"margin-top\" : frameMarginTop }) ;\n         /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------         \n        城市选择器中根据tabs-handle里面哪个句柄被选中来确定哪个tabs-frame显示\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/        \n        $(\".city-selector .tabs-frame.\" + $(\".city-selector .caption .tabs-handle li.on\").eq(0).data(\"sign\")).show() ;\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        城市选择器中tabs-handle的点击\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/ \n        let $tabsHandles = $(\".city-selector .caption .tabs-handle li\") ;\n        $tabsHandles.click(function(){\n            $tabsHandles.removeClass(\"on\") ;\n            $(this).addClass(\"on\") ;\n            $(\".city-selector .tabs-frame\").hide() ;\n            $(\".city-selector .tabs-frame.\" + $(this).data(\"sign\")).show() ;\n        }) ;\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        城市选择器中每个城市被点击后干什么\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        $(\".city-selector .tabs-frame a\").click(function() {\n            $(\".conning-tower dl dt span\").text($(this).text()) ;\n            $(\".city-selector\").slideUp(200) ;\n        }) ;\n     }\n     /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n    对接口拿到的业务开通城市进行处理\n    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n    filterBusinessCity(data) {\n        let typeMapper = { \"esf\" : 1 , \"rent\" : 2 , \"xf\" : 3 } ;\n        let typeValue = typeMapper[this.moduleType] ;\n        let result = { \"domestic\" : {} , \"overseas\" : {} } ;\n        data && data.domesticCityList && data.domesticCityList.forEach((city) => {\n            let has = false ;\n            city.businessList && city.businessList.forEach((business) => {\n                if(business.businessId === typeValue) has = true ;\n            }) ;\n            if(has) {\n                let shoupin = city.pinyin.charAt(0).toUpperCase() ;\n                if( ! result.domestic.hasOwnProperty(shoupin)) result.domestic[shoupin] = [] ;\n                result.domestic[shoupin].push({ \"cityId\" : city.cityId , \"cityName\" : city.cityName , \"pinyin\" : city.pinyin , \"cityType\" : city.cityType }) ;\n            }\n        }) ;\n        data && data.overseaCityList && data.overseaCityList.forEach((city) => {\n            let has = false ;\n            city.businessList && city.businessList.forEach((business) => {\n                if(business.businessId === typeValue) has = true ;\n            }) ;\n            if(has) {\n                let shoupin = city.pinyin.charAt(0).toUpperCase() ;\n                result.overseas[shoupin].push({ \"cityId\" : city.cityId , \"cityName\" : city.cityName , \"pinyin\" : city.pinyin , \"cityType\" : city.cityType }) ;\n            } \n        }) ;\n        return result ;\n    }\n    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n    整个组件定义结束\n    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n\n }\n"]}