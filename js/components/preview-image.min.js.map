{"version":3,"sources":["components/preview-image.min.js"],"names":["define","Swiper","addListener","$","on","e","window","preventDefault","stopPropagation","removeListener","off","container","swiper","data","$imgs","find","id","Date","getTime","str","each","index","img","attr","length","click","$preview","append","initialSlide","hide","removeClass","slideTo","addClass","show"],"mappings":";;AAAA;;;;;;AAMA;;;;;;AAMCA,OAAO,CAAC,uCAAD,CAAP,EAAiD,UAASC,MAAT,EAAgB;;AAE9D,aAASC,WAAT,GAAsB;AAClBC,UAAE,MAAF,EAAUC,EAAV,CAAa,WAAb,EAAyB,UAASC,CAAT,EAAW;AAChCA,gBAAIA,KAAKC,OAAOD,CAAhB;AACAA,cAAEE,cAAF;AACAF,cAAEG,eAAF;AACH,SAJD;AAKH;;AAED,aAASC,cAAT,GAAyB;AACrBN,UAAE,MAAF,EAAUO,GAAV,CAAc,WAAd;AACH;;AAED,WAAO,UAASC,SAAT,EAAmB;AACtB,YAAIC,SAAST,EAAEQ,SAAF,EAAaE,IAAb,CAAkB,gBAAlB,CAAb;AACA,YAAG,CAACD,MAAJ,EAAW;AACP,gBAAIE,QAAQX,EAAEQ,SAAF,EAAaI,IAAb,CAAkB,qBAAlB,CAAZ,CADO,CAC8C;AACrD,gBAAIC,KAAM,IAAIC,IAAJ,EAAD,CAAWC,OAAX,EAAT;;AAEA,gBAAIC,MAAM,qDAAmDH,EAAnD,GAAsD,IAAtD,GACE,8BADZ;AAEAF,kBAAMM,IAAN,CAAW,UAASC,KAAT,EAAeC,GAAf,EAAmB;AAC1BH,uBAAO,+BACK,4BADL,GAES,YAFT,GAEsBhB,EAAEmB,GAAF,EAAOC,IAAP,CAAY,KAAZ,CAFtB,GAEyC,IAFzC,GAGS,yBAHT,IAIUF,QAAQ,CAJlB,IAIuB,GAJvB,GAI8BP,MAAMU,MAJpC,GAKS,QALT,GAMK,QANL,GAOC,QAPR;AAQArB,kBAAEmB,GAAF,EAAOT,IAAP,CAAY,OAAZ,EAAoBQ,KAApB;AACH,aAVD;;AAYAF,mBAAO,cAAP;;AAEAL,kBAAMW,KAAN,CAAY,YAAU;AAClB,oBAAIJ,QAAQlB,EAAE,IAAF,EAAQU,IAAR,CAAa,OAAb,CAAZ;AACA,oBAAIa,WAAWvB,EAAE,MAAIa,EAAN,CAAf;AACA,oBAAGU,SAASF,MAAT,IAAmB,CAAtB,EAAwB;AACpBrB,sBAAE,MAAF,EAAUwB,MAAV,CAAiBR,GAAjB;AACAP,6BAASX,OAAO,MAAMe,EAAb,EAAiB;AACtBY,sCAAcP;AADQ,qBAAjB,CAAT;AAGAlB,sBAAEQ,SAAF,EAAaE,IAAb,CAAkB,gBAAlB,EAAmCD,MAAnC;;AAEA;AACAT,sBAAE,MAAMa,EAAR,EAAYZ,EAAZ,CAAe,OAAf,EAAuB,YAAU;AAC7BD,0BAAE,IAAF,EAAQ0B,IAAR;AACA1B,0BAAE,MAAF,EAAU2B,WAAV,CAAsB,oBAAtB,EAF6B,CAEe;AAC5C3B,0BAAE,MAAF,EAAU2B,WAAV,CAAsB,oBAAtB;AACArB;AACH,qBALD;AAMH;;AAEDG,uBAAOmB,OAAP,CAAeV,KAAf;AACAlB,kBAAE,MAAF,EAAU6B,QAAV,CAAmB,oBAAnB,EApBkB,CAoBuB;AACzC7B,kBAAE,MAAF,EAAU6B,QAAV,CAAmB,oBAAnB;AACA9B;AACAwB,yBAASO,IAAT;AACH,aAxBD;AAyBH,SA7CD,MA6CO,CAEN;AAGJ,KApDD;;AAsDA;;;;;;;;;;;;;;;;;;;;;;;;;AA4BF,CAhGD","file":"preview-image.min.js","sourcesContent":["/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n 1. 项目名称：悟空找房h5\n 2. 页面名称：components -> preview-image(图片预览)\n 3. 作者：tangxuyang@lifang.com\n 4. 依赖：swiper\n -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n/**\n * 用法：\n * PreviewImage(container)\n * container: 是包含有图片的容器，其中图片要有preview-image-item类\n */\n\n define(['../components/swiper-3.4.2.jquery.min'],function(Swiper){\n\n    function addListener(){\n        $('body').on('touchmove',function(e){\n            e = e || window.e;\n            e.preventDefault();\n            e.stopPropagation();\n        })\n    }\n\n    function removeListener(){\n        $('body').off('touchmove');\n    }\n\n    return function(container){\n        let swiper = $(container).data('preview-swiper');            \n        if(!swiper){\n            let $imgs = $(container).find('.preview-image-item');//获取所有要预览的图片\n            let id = (new Date).getTime();\n\n            let str = '<div class=\"swiper-container preview-image\" id=\"'+id+'\">' + \n                        '<div class=\"swiper-wrapper\">';\n            $imgs.each(function(index,img){\n                str += '<div class=\"swiper-slide\">' + \n                            '<div class=\"preview-item\">' +\n                                '<img src=\"'+$(img).attr('src')+'\">' + \n                                '<div class=\"indicator\">' + \n                                (index + 1) + '/' + ($imgs.length) + \n                                '</div>' + \n                            '</div>' +\n                        '</div>'; \n                $(img).data('index',index);           \n            });\n            \n            str += \"</div></div>\";         \n                \n            $imgs.click(function(){\n                let index = $(this).data('index');\n                let $preview = $('#'+id);\n                if($preview.length == 0){\n                    $('body').append(str);\n                    swiper = Swiper('#' + id, {\n                        initialSlide: index\n                    });\n                    $(container).data('preview-swiper',swiper);\n\n                    //退出预览模式\n                    $('#' + id).on('click',function(){                                     \n                        $(this).hide();\n                        $('body').removeClass('preview-image-open');//\n                        $('html').removeClass('preview-image-open');\n                        removeListener();\n                    });\n                }\n\n                swiper.slideTo(index);\n                $('body').addClass('preview-image-open');//去掉垂直滚动条\n                $('html').addClass('preview-image-open');\n                addListener();\n                $preview.show();                \n            });            \n        } else {\n            \n        }\n\n        \n    };\n\n    /*\n        <div class=\"swiper-container\">\n            <div class=\"swiper-wrapper\">\n                <%\n                    if(imgList && imgList.length> 0){\n                        for(let i = 0; i < imgList.length; i++){\n                            if(!imgList[i].isVideo){\n                %>\n                    <div class=\"swiper-slide\">\n                        <div class=\"preview-item\">\n                            <img src=\"\">\n                            <div class=\"indicator\">\n                                <%= i+1 - startIndex%>/<%= imgList.length - startIndex%>\n                            </div>             \n                        </div>\n                    </div>\n                <%\n                            }\n                        }\n                    }\n                %>\n                \n            </div>\n        </div>\n    */\n\n\n\n });"]}