"use strict";define(function(){var e=void 0,t="oldhouselist",a=function(e){$("."+e).click(function(){if($("#search").show(),JSON.parse(localStorage.getItem(t))){$(".history").show();var e=JSON.parse(localStorage.getItem(t)).reverse(),a="",i=encodeURIComponent(JSON.stringify({eventName:"1203005",channel:"channelFlag",type:2}));e.forEach(function(e,t){a+='<li data-bigdata="'+i+' " data-type="'+e.type+'" data-value="'+e.id+'" data-name="'+e.key+'" data-address="'+e.address+'"><p>'+e.key+"</p><span>"+e.address+"</span></li>"}),$("#resultHistory").empty().append(a),$("#resultHistory >li").click(function(){var e={key:$(this).attr("data-name"),id:$(this).attr("data-value"),address:$(this).attr("data-address"),type:$(this).attr("data-type")};s(e)})}else $(".history").hide()})};$(".icon-fanhui").click(function(){$("#search").hide()}),$(".icon-close").click(function(){$("#searchInput").val(""),$("#showResult").empty().append().parent().hide(),$(this).hide(),$(".no-result").hide()}),$(".input-kw-form").submit(function(e){e.preventDefault()}),$("#clearHistory").click(function(){localStorage.removeItem("searchTrendHistory"),$("#resultHistory").empty(),$(".history").hide()}),$("#searchInput").on("keyup input",function(){if($(this).val()){$(".icon-close").show(),$(".history").hide();var a=void 0,i="",n={key:$(this).val(),cityId:$.cookie("cityId")||43,pageName:t},o=encodeURIComponent(JSON.stringify({eventName:"1203004",channel:"channelFlag",type:2}));if(e.request(e.apiUrl.common.acWord,n,{successCallback:function(e){if(a=e.data,a.secondHouseList){$(".have-result").show(),$(".no-result").hide();var t="",n="";a.secondHouseList.forEach(function(e,a){1!=e.type&&2!=e.type&&5!=e.type||(t=e.estateDesc.replace(e.markname,"<span>"+e.markname+"</span>"),n=e.address.replace(e.markname,"<span>"+e.markname+"</span>"),i+='<li data-bigdata="'+o+' " data-type="'+e.type+'" data-value="'+e.value+'" data-name="'+e.estateDesc+'" data-address="'+e.address+'"><p>'+t+"</p><span>"+n+"</span></li>")}),$("#showResult").empty().append(i)}else $("#showResult").empty(),$(".have-result").hide(),$(".history").hide(),$(".no-result").show();$("#showResult > li").click(function(){var e={key:$(this).attr("data-name"),id:$(this).attr("data-value"),address:$(this).attr("data-address"),type:$(this).attr("data-type")};s(e)})}}),i&&13==event.keyCode){var r={key:$("#showResult>li:eq(0)").attr("data-name"),id:$("#showResult>li:eq(0)").attr("data-value"),address:$("#showResult>li:eq(0)").attr("data-address"),type:$("#showResult>li:eq(0)").attr("data-type")};s(r)}}else $("#showResult").empty().parent().hide(),$(".icon-close").hide(),localStorage.getItem(t)?$(".history").show():$(".history").hide()});var s=function(e){var a=JSON.parse(localStorage.getItem(t))?JSON.parse(localStorage.getItem(t)):[];a.forEach(function(t,s){t.id==e.id&&t.type==e.type&&a.splice(s,1)}),a.length>4&&a.reverse().splice(4);var s=a.reverse();s.push(e),localStorage.setItem(t,JSON.stringify(s));var i="oldhouselist"==t?"esf":"new",n=$.cookie("pinyin");1==e.type?window.location.href=n+"/trend/"+i+"/district/"+e.id:2==e.type?window.location.href=n+"/trend/"+i+"/town/"+e.id:5==e.type&&(window.location.href=n+"/trend/"+i+"/community/"+e.id)};return{init:function(a,s){e=a,t=s||"oldhouselist"},selectFun:a}});
//# sourceMappingURL=trend-search.min.js.map
