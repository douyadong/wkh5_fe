{"version":3,"sources":["xf/detail.min.js"],"names":["_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","_createClass","defineProperties","target","props","i","length","descriptor","defineProperty","key","protoProps","staticProps","DetailController","_Controller","this","_this","getPrototypeOf","$","lazyload","placeholder","staticDomain","addListenerToDownloadApp","addEventListener","require","album","BigData","PreviewImage","init","bigData","pageName","pageParam","new_house_id","val","channel","GetRequest","type","url","location","search","theRequest","indexOf","str","substr","strs","split","click","css","padding-bottom","animate","bottom","slideDown","document","body","overflow","slideUp","window","href","attr","nativeSchema","loadSchema","schema","protocal","loadWaiting","failUrl","apkInfo","PKG","CATEGORY","ACTION","Controller","ready"],"mappings":"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","file":"detail.min.js","sourcesContent":["/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n 1. 项目名称：悟空找房h5\r\n 2. 页面名称：xf/detail(新房-详情)\r\n 3. 作者：tangxuyang@lifang.com\r\n -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n class DetailController extends Controller {\r\n    constructor() {\r\n        super() ;        \r\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n        图片懒加载实例化\r\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/        \r\n        $(\".lazy\").lazyload({ \r\n            \"placeholder\" : this.staticDomain + \"/wkh5_fe/images/common/loading.jpg\"\r\n        }) ;  \r\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n        downloadApp条事件绑定\r\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n        this.addListenerToDownloadApp() ;\r\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n        给页面元素绑定事件\r\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n        this.addEventListener() ;\r\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n        组件逻辑的引入\r\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/    \r\n        let self = this ;\r\n        require([ '../components/album.min','../components/bigdata.min', '../components/preview-image.min'],function(album, BigData, PreviewImage){        \r\n            BigData.init(self) ;\r\n            BigData.bigData({\r\n                pageName: '1227',\r\n                pageParam: {\r\n                    new_house_id: $('#houseId').val()\r\n                },\r\n                channel:self.GetRequest()['channel'] || \"\",\r\n                type: 1\r\n            }) ;\r\n            //评论中图片添加预览功能\r\n            PreviewImage('.rent-comments');\r\n        }); \r\n        \r\n    }\r\n    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n    截取？后面的参数\r\n    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n    GetRequest() {\r\n        let url = location.search;\r\n        let theRequest = {};\r\n        if (url.indexOf(\"?\") !== -1) {\r\n            let str = url.substr(1);\r\n            let strs = str.split(\"&\");\r\n            for(var i = 0; i < strs.length; i ++) {\r\n                theRequest[strs[i].split(\"=\")[0]]=strs[i].split(\"=\")[1];\r\n            }\r\n        }\r\n        // console.log(theRequest);\r\n        return theRequest;\r\n    }\r\n    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n    给页面元素绑定事件\r\n    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n    addEventListener() {\r\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n        下载条的关闭按钮事件赋予\r\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n        $(\".download-app .icon-remove\").click(function(){\r\n            $(\".content-wrapper\").css({ \"padding-bottom\" : 0 }) ;\r\n            $(\".consult-phone\").animate({ \"bottom\" : 0 } , 100 ) ;\r\n        }) ;\r\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n        点击优惠活动部分弹出活动弹层及弹层关闭按钮\r\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n        $(\".content-wrapper .base-info .activity\").click(()=> {\r\n            $(\".activity-pop\").slideDown(100) ;\r\n            $(document.body).css({ \"overflow\" : \"hidden\" }) ;\r\n        }) ;\r\n        $(\".activity-pop .close span\").click(() => {\r\n            $(\".activity-pop\").slideUp(100) ;\r\n            $(document.body).css({ \"overflow\" : \"auto\" }) ;\r\n        }) ;\r\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n        点击电话咨询按钮，让页面跳转\r\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n        $(\".consult-phone\").click(function(){            \r\n            window.location.href = $(this).attr(\"data-href\") ;\r\n        }) ;\r\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n        打开app按钮点击处理\r\n        schemes参数规则请参照：http://confluence.wkzf/pages/viewpage.action?pageId=80329073\r\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n        $(\".download-app .download\").click(()=> {\r\n            nativeSchema.loadSchema({               \r\n                //schema : \"external_call/parameter?t=0&bt=1&houseId=\" + $(\"#houseId\").val()  ,  // 通过NN打开某个链接\r\n                schema : \"external_call\" ,  // 通过NN打开某个链接\r\n                protocal : \"wkzf\" , //schema头协议，实际情况填写\r\n                loadWaiting : \"1500\" , //发起唤醒请求后，会等待loadWaiting时间，超时则跳转到failUrl，默认3000ms                \r\n                failUrl:\"https://m.wkzf.com/download/transit?from=rentDetail\" ,  //唤起失败时的跳转链接，默认跳转到下载页\r\n                // apk信息,请根据实际情况填写\r\n                apkInfo : {\r\n                    PKG : \"com.wukong.ua\" ,\r\n                    CATEGORY : \"android.intent.category.DEFAULT\" ,\r\n                    ACTION : \"android.intent.action.VIEW\"\r\n                }\r\n            }) ;\r\n        }) ;\r\n        \r\n    }\r\n    \r\n}\r\n\r\n/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n类的初始化\r\n-----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n$(document).ready(function() {\r\n   new DetailController ;\r\n}) ;\r\n"]}