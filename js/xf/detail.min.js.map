{"version":3,"sources":["xf/detail.min.js"],"names":["DetailController","$","lazyload","staticDomain","addListenerToDownloadApp","addEventListener","self","require","album","BigData","PreviewImage","init","bigData","pageName","pageParam","new_house_id","val","channel","GetRequest","type","url","location","search","theRequest","indexOf","str","substr","strs","split","i","length","click","css","animate","slideDown","document","body","slideUp","window","href","attr","nativeSchema","loadSchema","schema","protocal","loadWaiting","failUrl","apkInfo","PKG","CATEGORY","ACTION","Controller","ready"],"mappings":"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","file":"detail.min.js","sourcesContent":["/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n 1. 项目名称：悟空找房h5\n 2. 页面名称：xf/detail(新房-详情)\n 3. 作者：tangxuyang@lifang.com\n -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n class DetailController extends Controller {\n    constructor() {\n        super() ;        \n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        图片懒加载实例化\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/        \n        $(\".lazy\").lazyload({ \n            \"placeholder\" : this.staticDomain + \"/wkh5_fe/images/common/loading.jpg\"\n        }) ;  \n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        downloadApp条事件绑定\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        this.addListenerToDownloadApp() ;\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        给页面元素绑定事件\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        this.addEventListener() ;\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        组件逻辑的引入\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/    \n        let self = this ;\n        require([ '../components/album.min','../components/bigdata.min', '../components/preview-image.min'],function(album, BigData, PreviewImage){        \n            BigData.init(self) ;\n            BigData.bigData({\n                pageName: '1045',\n                pageParam: {\n                    new_house_id: $('#houseId').val()\n                },\n                channel:self.GetRequest()['channel'] || \"\",\n                type: 1\n            }) ;\n            //评论中图片添加预览功能\n            PreviewImage('.rent-comments');\n        }); \n        \n    }\n    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n    截取？后面的参数\n    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n    GetRequest() {\n        let url = location.search;\n        let theRequest = {};\n        if (url.indexOf(\"?\") !== -1) {\n            let str = url.substr(1);\n            let strs = str.split(\"&\");\n            for(var i = 0; i < strs.length; i ++) {\n                theRequest[strs[i].split(\"=\")[0]]=strs[i].split(\"=\")[1];\n            }\n        }\n        // console.log(theRequest);\n        return theRequest;\n    }\n    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n    给页面元素绑定事件\n    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n    addEventListener() {\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        下载条的关闭按钮事件赋予\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        $(\".download-app .icon-remove\").click(function(){\n            $(\".content-wrapper\").css({ \"padding-bottom\" : 0 }) ;\n            $(\".consult-phone\").animate({ \"bottom\" : 0 } , 100 ) ;\n        }) ;\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        点击优惠活动部分弹出活动弹层及弹层关闭按钮\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        $(\".content-wrapper .base-info .activity\").click(()=> {\n            $(\".activity-pop\").slideDown(100) ;\n            $(document.body).css({ \"overflow\" : \"hidden\" }) ;\n        }) ;\n        $(\".activity-pop .close span\").click(() => {\n            $(\".activity-pop\").slideUp(100) ;\n            $(document.body).css({ \"overflow\" : \"auto\" }) ;\n        }) ;\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        点击电话咨询按钮，让页面跳转\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        $(\".consult-phone\").click(function(){            \n            window.location.href = $(this).attr(\"data-href\") ;\n        }) ;\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        打开app按钮点击处理\n        schemes参数规则请参照：http://confluence.wkzf/pages/viewpage.action?pageId=80329073\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        $(\".download-app .download\").click(()=> {\n            nativeSchema.loadSchema({               \n                //schema : \"external_call/parameter?t=0&bt=1&houseId=\" + $(\"#houseId\").val()  ,  // 通过NN打开某个链接\n                schema : \"external_call\" ,  // 通过NN打开某个链接\n                protocal : \"wkzf\" , //schema头协议，实际情况填写\n                loadWaiting : \"1500\" , //发起唤醒请求后，会等待loadWaiting时间，超时则跳转到failUrl，默认3000ms                \n                failUrl:\"https://m.wkzf.com/download/transit?from=rentDetail\" ,  //唤起失败时的跳转链接，默认跳转到下载页\n                // apk信息,请根据实际情况填写\n                apkInfo : {\n                    PKG : \"com.wukong.ua\" ,\n                    CATEGORY : \"android.intent.category.DEFAULT\" ,\n                    ACTION : \"android.intent.action.VIEW\"\n                }\n            }) ;\n        }) ;\n        \n    }\n    \n}\n\n/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n类的初始化\n-----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n$(document).ready(function() {\n   new DetailController ;\n}) ;\n"]}