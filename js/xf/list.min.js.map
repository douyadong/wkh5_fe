{"version":3,"sources":["xf/list.min.js"],"names":["ListController","self","paramGenerator","ParamGenerator","setTimeout","$","slideUp","lazyload","staticDomain","require","Filter","BigData","init","ConningTower","data","location","href","val","visitedCityId","highPriceCityIds","prices","filter","cityId","length","LOWPRICES","extend","XFDEFAULT","el","near","controller","filterChanged","result","param","generateParamObj","di","to","li","st","mapping","forEach","item","goto","bigData","pageUrl","origin","pathnam","replace","tmpArr","split","obj","queryString2Object","window","bindEvent","pullload","insertTrendAndOldHouse","cityPinyin","url","object2QueryString","search","click","str","channel","encryptSubEstateId","encodeURIComponent","subEstateId","imageUrl","hasVideo","activitys","title","estateName","districtName","townName","startSpace","endSpace","hasActivity","isSubwayEstate","isSoonOpen","unitPrice","count","hideNoData","hide","createHouseItems","html","text","slideDown","showNoData","append","show","cityName","$list","oldBusiness","insertAfter","apiUrl","xf","list","queryStringObject","pa","requestType","threshold","pageSize","pageIndexKey","pageSizeKey","callback","newHouseDataListModelList","appendHouseList","Controller","document","ready"],"mappings":";;;;;;;;;;AAAA;;;;;IAKOA,c;;;AACH,8BAAc;AAAA;;AAAA;;AAEV,YAAIC,YAAJ;AACA,cAAKC,cAAL,GAAsB,IAAIC,cAAJ,EAAtB;AACAC,mBAAW,YAAU;AACjBC,cAAE,QAAF,EAAYC,OAAZ,GADiB,CACK;AACzB,SAFD,EAEE,IAFF;;AAKA;;;AAGAD,UAAE,OAAF,EAAWE,QAAX,CAAoB;AAChB,2BAAgB,MAAKC,YAAL,GAAoB;AADpB,SAApB;AAGAC,gBAAQ,CAAC,0BAAD,EAA6B,2BAA7B,EAA0D,iCAA1D,CAAR,EAAsG,UAASC,MAAT,EAAiBC,OAAjB,EAAyB;AAC3HA,oBAAQC,IAAR,CAAaX,IAAb;AACA,gBAAIY,YAAJ,CAAiB;AACb,+BAAgBF,OADH;AAEb,8BAAe,IAFF;AAGb,6BAAc,mBAACG,IAAD,EAAU,CACvB,CAJY;AAKb,yCAA0B,+BAACA,IAAD,EAAU;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAC,6BAASC,IAAT,GAAgB,MAAMX,EAAE,oBAAF,EAAwBY,GAAxB,EAAN,GAAsC,MAAtD;AACH,iBAzBY;AA0Bb,oBAAI,aAAM,CAET;AA5BY,aAAjB;;AA+BA;AACA;AACA;;;;;;;;;;;AAWA,gBAAIC,gBAAgBb,EAAE,gBAAF,EAAoBY,GAApB,EAApB;AACA,gBAAIE,mBAAmB,CAAC,CAAD,EAAG,EAAH,EAAM,IAAN,EAAW,IAAX,EAAgB,GAAhB,EAAoB,GAApB,EAAwB,GAAxB,EAA4B,GAA5B,CAAvB;AACA,gBAAIC,SAASD,iBAAiBE,MAAjB,CAAwB,UAASC,MAAT,EAAgB;AAAC,uBAAOA,UAAUJ,aAAjB;AAAgC,aAAzE,EAA2EK,MAA3E,IAAqF,CAArF,GAAyFb,OAAOc,SAAhG,GAA4G,IAAzH;;AAEAvB,iBAAKoB,MAAL,GAAc,IAAIX,MAAJ,CAAWL,EAAEoB,MAAF,CAAS,EAAT,EAAYf,OAAOgB,SAAnB,EAA6B;AAClDC,oBAAI,SAD8C;AAElDL,wBAAQJ,aAF0C;AAGlDU,sBAAM,KAH4C;AAIlDC,4BAAY5B,IAJsC;AAKlDU,yBAASA,OALyC;AAMlDmB,+BAAe,uBAASC,MAAT,EAAgB;AAC3B,wBAAIC,QAAQ/B,KAAKC,cAAL,CAAoB+B,gBAApB,CAAqCF,MAArC,CAAZ;AACA,wBAAGC,MAAME,EAAN,IAAYF,MAAMG,EAAlB,IAAwBH,MAAMI,EAA9B,IAAoCJ,MAAMK,EAA7C,EAAgD;AAC5C;AACH,qBAFD,MAEK;AAAC;AACF,4BAAIC,UAAU,CAAC,KAAD,EAAO,KAAP,EAAa,KAAb,EAAmB,KAAnB,EAAyB,KAAzB,CAAd;AACAA,gCAAQC,OAAR,CAAgB,UAASC,IAAT,EAAc;AAC1B,gCAAGvC,KAAK+B,KAAL,CAAWQ,IAAX,CAAH,EAAoB;AAChBR,sCAAMQ,IAAN,IAAcvC,KAAK+B,KAAL,CAAWQ,IAAX,CAAd;AACH;AACJ,yBAJD;AAKH;;AAEDvC,yBAAK+B,KAAL,GAAaA,KAAb;AACA;AACA/B,yBAAKwC,IAAL;AACH;AAtBiD,aAA7B,EAuBtBrB,MAvBsB,CAAX,CAAd;;AAyBAnB,iBAAKU,OAAL,GAAeA,OAAf;AACAA,oBAAQ+B,OAAR,CAAgB;AACZ,4BAAY,MADA;AAEZ,wBAAQ;AAFI,aAAhB;AAIH,SAhFD;;AAkFA;AACA;AACA,YAAIC,UAAU5B,SAAS6B,MAAT,GAAkB7B,SAAS8B,OAAzC;AACAF,kBAAUA,QAAQG,OAAR,CAAgB,IAAhB,EAAqB,EAArB,CAAV;AACA,YAAIC,SAASJ,QAAQK,KAAR,CAAc,GAAd,CAAb;AACA/C,aAAK+B,KAAL,GAAa,EAAb;AACA,YAAGe,OAAO,CAAP,CAAH,EAAa;AAAC;AACV,gBAAIE,MAAM9C,eAAe+C,kBAAf,CAAkCH,OAAO,CAAP,CAAlC,CAAV;AACA,gBAAGE,GAAH,EAAO;AACHhD,qBAAK+B,KAAL,GAAaiB,GAAb;AACH;AACJ;;AAEDE,eAAO9B,MAAP,GAAgBpB,KAAKoB,MAArB;;AAEA,cAAK+B,SAAL;AACA,cAAKC,QAAL;AACA,cAAKC,sBAAL;AAlHU;AAmHb;;AAED;;;;;+BACM;AACF,gBAAIC,aAAalD,EAAE,oBAAF,EAAwBY,GAAxB,EAAjB;AACA,gBAAIuC,MAAMzC,SAAS6B,MAAT,GAAkB,GAAlB,GAAwBW,UAAxB,GAAqC,UAArC,GAAiDpD,eAAesD,kBAAf,CAAkC,KAAKzB,KAAvC,CAA3D;AACAjB,qBAASC,IAAT,GAAgBwC,MAAMzC,SAAS2C,MAA/B;AACH;;;oCAEU;AACP,gBAAIzD,OAAO,IAAX;AACA;AACAI,cAAE,iBAAF,EAAqBsD,KAArB,CAA2B,YAAU;AACjC;AACA5C,yBAASC,IAAT,GAAgB,IAAhB;AACH,aAHD;AAIH;;;yCAEgBF,I,EAAK;AAClB,gBAAI8C,MAAM,EAAV;AACA,gBAAIL,aAAalD,EAAE,oBAAF,EAAwBY,GAAxB,EAAjB;AACA,gBAAI4C,UAAUxD,EAAE,UAAF,EAAcY,GAAd,EAAd;AACAH,iBAAKyB,OAAL,CAAa,UAASC,IAAT,EAAc;AACvBoB,uBAAO,+BAA6BL,UAA7B,GAAwC,MAAxC,GAA+Cf,KAAKsB,kBAApD,GAAuE,OAAvE,IAAiFD,UAAS,cAAYA,OAArB,GAA+B,EAAhH,IAAoH,kBAApH,GAAuIE,mBAAmB,6DAA2DvB,KAAKwB,WAAhE,GAA4E,KAA/F,CAAvI,GAA6O;;+BAA7O,GAEaxB,KAAKyB,QAFlB,GAE2B,IAF3B,IAGIzB,KAAK0B,QAAL,IAAiB,GAAjB,IAAwB,mCAAxB,IAA+D,EAHnE,IAGwE;qCAHxE,IAIoB1B,KAAK2B,SAAL,IAAkB3B,KAAK2B,SAAL,CAAe,CAAf,CAAlB,IAAuC3B,KAAK2B,SAAL,CAAe,CAAf,EAAkBC,KAAzD,IAAkE,EAJtF,IAI0F;;;yBAJ1F,GAOO5B,KAAK6B,UAPZ,GAOuB;;+BAPvB,GASa7B,KAAK8B,YATlB,GAS+B,GAT/B,GASmC9B,KAAK+B,QATxC,GASiD,eATjD,GASiE/B,KAAKgC,UATtE,GASiF,KATjF,GASuFhC,KAAKiC,QAT5F,GASqG;;sCATrG,IAYAjC,KAAKkC,WAAL,IAAoB,yBAApB,IAAiD,EAZjD,KAYwDlC,KAAKmC,cAAL,IAAqB,yBAArB,IAAgD,EAZxG,KAY+G,CAACnC,KAAKoC,UAAN,IAAkB,eAAlB,IAAmC,eAZlJ,KAYsKpC,KAAK0B,QAAL,IAAe,cAAf,IAA+B,EAZrM,IAaC;iDAbD,GAc+B1B,KAAKqC,SAdpC,GAc8C;;iBAdrD;AAiBH,aAlBD;;AAoBA,mBAAOjB,GAAP;AACH;;;wCAEe9C,I,EAAKgE,K,EAAM;AAAC;AACxB,iBAAKC,UAAL;AACA,gBAAGjE,QAAQA,KAAKS,MAAhB,EAAuB;AACnBlB,kBAAE,UAAF,EAAc2E,IAAd;AACA,oBAAIpB,MAAM,KAAKqB,gBAAL,CAAsBnE,IAAtB,CAAV;;AAEAT,kBAAE,OAAF,EAAW6E,IAAX,CAAgBtB,GAAhB;AACAvD,kBAAE,eAAF,EAAmB8E,IAAnB,CAAwBL,KAAxB;AACAzE,kBAAE,QAAF,EAAY+E,SAAZ;AACAhF,2BAAW,YAAU;AACjBC,sBAAE,QAAF,EAAYC,OAAZ;AACH,iBAFD,EAEG,IAFH;;AAIA,qBAAKgD,sBAAL;AACH,aAZD,MAYK;AAAC;AACF,qBAAK+B,UAAL;AACH;AACJ;;;wCAEevE,I,EAAK;AAAC;AAClB,gBAAGA,QAAMA,KAAKS,MAAd,EAAqB;AACjB,oBAAIqC,MAAM,KAAKqB,gBAAL,CAAsBnE,IAAtB,CAAV;AACAT,kBAAE,OAAF,EAAWiF,MAAX,CAAkB1B,GAAlB;AACA,qBAAKN,sBAAL;AACH,aAJD,MAIK,CAAC;AACF;AACH;AACJ;;;qCAEW;AAAC;AACTjD,cAAE,UAAF,EAAckF,IAAd;AACAlF,cAAE,cAAF,EAAkB6E,IAAlB,CAAuB,EAAvB;AACA7E,cAAE,iBAAF,EAAqBkF,IAArB,GAHQ,CAGoB;AAC/B;;;qCAEW;AACRlF,cAAE,UAAF,EAAc2E,IAAd;AACH;;;qCAEW;AACR3E,cAAE,eAAF,EAAmB2E,IAAnB;AACH;;;iDAEuB;AAAC;AACrB,gBAAIQ,WAAWnF,EAAE,kBAAF,EAAsBY,GAAtB,EAAf;AACA,gBAAIsC,aAAalD,EAAE,oBAAF,EAAwBY,GAAxB,EAAjB;AACA,gBAAI4C,UAAUxD,EAAE,UAAF,EAAcY,GAAd,EAAd;AACA,gBAAIwE,QAAQpF,EAAE,gBAAF,CAAZ;AACA,gBAAIqF,cAAcrF,EAAE,cAAF,EAAkBY,GAAlB,EAAlB;AACA,gBAAGZ,EAAE,0BAAF,EAA8BkB,MAA9B,IAAwC,CAAxC,IAA6CkE,MAAMlE,MAAN,GAAa,CAA7D,EAA+D;AAC3DlB,kBAAE,eAAakD,UAAb,GAAwB,YAAxB,IAAsCM,UAAS,cAAcA,OAAvB,GAA+B,EAArE,IAAyE;;;yBAAzE,GAGY2B,QAHZ,GAGqB;;;iBAHvB,EAMOG,WANP,CAMmBtF,EAAEoF,MAAM,CAAN,CAAF,CANnB;AAOH;AACD,gBAAGC,eAAerF,EAAE,oBAAF,EAAwBkB,MAAxB,IAAkC,CAAjD,IAAsDkE,MAAMlE,MAAN,GAAa,EAAtE,EAAyE;AACrElB,kBAAE,eAAakD,UAAb,GAAwB,OAAxB,IAAiCM,UAAS,cAAcA,OAAvB,GAA+B,EAAhE,IAAoE;;;;;;iBAAtE,EAMO8B,WANP,CAMmBF,MAAM,EAAN,CANnB;AAOH;AACJ;;;oCAEU,CAEV,C,CAFW;;AAIZ;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;;mCACU;AACN,gBAAIxF,OAAO,IAAX;AACA;AACA;AACA;;AAEA;AACAI,cAAE,OAAF,EAAWgD,QAAX,CAAoB;AAChBuC,wBAAS3F,KAAK2F,MAAL,CAAYC,EAAZ,CAAeC,IADR;AAEhBC,mCAAoB,6BAAU;AAC1B9F,yBAAK+B,KAAL,IAAc,OAAO/B,KAAK+B,KAAL,CAAWgE,EAAhC;AACA,wBAAG,CAAC/F,KAAK+B,KAAT,EAAe;AACX/B,6BAAK+B,KAAL,GAAa,EAAb;AACH;AACD,2BAAO3B,EAAEoB,MAAF,CAAS,EAAT,EAAYxB,KAAK+B,KAAjB,EAAuB,EAACV,QAAQjB,EAAE,gBAAF,EAAoBY,GAApB,EAAT,EAAvB,CAAP;AACH,iBARe;AAShBgF,6BAAa,MATG;AAUhBC,2BAAY,EAVI;AAWhBC,0BAAU,EAXM;AAYhBC,8BAAc,IAZE;AAahBC,6BAAa,IAbG;AAchBC,0BAAW,kBAASxF,IAAT,EAAe;;AAEtB,wBAAI,CAACA,KAAKA,IAAN,IAAc,CAACA,KAAKA,IAAL,CAAUyF,yBAAzB,IAAsD,CAACzF,KAAKA,IAAL,CAAUyF,yBAAV,CAAoChF,MAA/F,EAAsG;AAClGT,6BAAKgE,KAAL,GAAa,CAAb;AACA;AACH;;AAED7E,yBAAKuG,eAAL,CAAqB1F,KAAKA,IAAL,CAAUyF,yBAA/B;AACH;AAtBe,aAApB;AAwBH;;;;EAnRyBE,U;;AAwR9B;;;;;AAGApG,EAAEqG,QAAF,EAAYC,KAAZ,CAAkB,YAAW;AACzB,QAAI3G,cAAJ;AACH,CAFD","file":"list.min.js","sourcesContent":["/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n 1. 项目名称：悟空找房h5\n 2. 页面名称：xf/list(新房-列表)\n 3. 作者：tangxuyang@lifang.com\n -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n class ListController extends Controller {\n    constructor() {\n        super();\n        var self = this;        \n        this.paramGenerator = new ParamGenerator();\n        setTimeout(function(){\n            $('.total').slideUp();// 隐藏查询总条数   \n        },3000);\n        \n        \n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        图片懒加载实例化\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/        \n        $(\".lazy\").lazyload({ \n            \"placeholder\" : this.staticDomain + \"/wkh5_fe/images/common/loading.jpg\"\n        }) ;\n        require(['../components/filter.min', '../components/bigdata.min', \"../components/conning-tower.min\"], function(Filter, BigData){   \n            BigData.init(self);         \n            new ConningTower({                \n                \"bigDataUtil\" : BigData ,               \n                \"moduleType\" : \"xf\" ,\n                \"cityClick\" : (data) => {\n                } ,\n                \"searchResultItemClick\" : (data) => {                    \n                    // 与filter中的区域地铁互斥\n                    // delete self.param.di;// 区域id\n                    // delete self.param.to;// 板块id\n                    // delete self.param.li;// 地铁线id\n                    // delete self.param.st;// 地铁站id\n                    // delete self.param.id;// 小区id\n                    // delete self.param.sdi;// 区域id\n                    // delete self.param.sto;// 板块id\n                    // delete self.param.sli;// 地铁线id\n                    // delete self.param.sst;// 地铁站id\n                    // delete self.param.sid;// 小区id\n                    // var mapping = [\"\",\"sdi\",\"sto\",\"sli\",\"sst\",\"sid\"];\n                    // var key = mapping[data.type];\n                    // if(key){\n                    //     self.param[key] = data.value;\n                    //     self.goto();\n                    // }\n                    // 跳转到新房详情\n                    location.href = \"/\" + $('#visitedCityPinyin').val() + \"/xf/\";\n                },\n                \"\": () => {\n\n                }\n            }) ;\n\n            // 城市不同总价选项不同，XFDEFAULT中prices是北京、上海、广州、深圳、杭州、苏州、廊坊、南京的价格选项，比较高，\n            // 因此需要区分\n            /*\n            *   北京\t3\n                上海\t43\n                广州\t1873\n                深圳\t1950\n                杭州\t873\n                苏州\t771\n                廊坊\t221\n                南京\t741\n            */\n\n            var visitedCityId = $('#visitedCityId').val();\n            var highPriceCityIds = [3,43,1873,1950,873,771,221,741];\n            var prices = highPriceCityIds.filter(function(cityId){return cityId == visitedCityId }).length == 0 ? Filter.LOWPRICES : null;\n\n            self.filter = new Filter($.extend({},Filter.XFDEFAULT,{\n                el: \".filter\",                \n                cityId: visitedCityId,\n                near: false,               \n                controller: self,\n                BigData: BigData,\n                filterChanged: function(result){   \n                    var param = self.paramGenerator.generateParamObj(result);\n                    if(param.di || param.to || param.li || param.st){\n                        // do nothing\n                    }else{// 判断是否有sid,sli,sst,sdi,sto\n                        var mapping = [\"sdi\",\"sto\",\"sli\",\"sst\",\"sid\"];\n                        mapping.forEach(function(item){\n                            if(self.param[item]){\n                                param[item] = self.param[item];\n                            }\n                        });                        \n                    }\n\n                    self.param = param;\n                    // 跳转\n                    self.goto();\n                }                \n            }, prices));   \n            \n            self.BigData = BigData;\n            BigData.bigData({\n                \"pageName\": \"1050\",                       \n                \"type\": 1\n            });\n        });\n\n        // 从url中解析参数\n        //var pageUrl = location.href;\n        var pageUrl = location.origin + location.pathnam;\n        pageUrl = pageUrl.replace('//','');\n        var tmpArr = pageUrl.split('/');\n        self.param = {};\n        if(tmpArr[3]){// 有查询条件\n            var obj = ParamGenerator.queryString2Object(tmpArr[3]);\n            if(obj){\n                self.param = obj;\n            }\n        }\n                    \n        window.filter = self.filter;\n\n        this.bindEvent();\n        this.pullload();\n        this.insertTrendAndOldHouse();\n    }\n\n    // 根据查询条件进行相应的跳转\n    goto(){    \n        var cityPinyin = $('#visitedCityPinyin').val();\n        var url = location.origin + \"/\" + cityPinyin + \"/xflist/\" +ParamGenerator.object2QueryString(this.param);\n        location.href = url + location.search;\n    }\n\n    bindEvent(){\n        var self = this;\n        // 清空查询条件\n        $('.no-data button').click(function(){\n            // 跳转            \n            location.href = \"./\";\n        });\n    }    \n\n    createHouseItems(data){\n        var str = \"\";\n        var cityPinyin = $('#visitedCityPinyin').val();\n        var channel = $('#channel').val();\n        data.forEach(function(item){\n            str += '<a class=\"xf-item\" href=\"/'+cityPinyin+'/xf/'+item.encryptSubEstateId+'.html' +(channel? '?channel='+channel : \"\")+'\" data-bigdata=\"'+encodeURIComponent('{\"eventName\": \"1050025\", \"eventParam\": {\"new_house_id\":\"'+item.subEstateId+'\"}}')+'\">\\\n                <div class=\"img\">\\\n                    <img src=\"'+item.imageUrl+'\">'\n                    + (item.hasVideo == '1' && '<span class=\"play\"><i></i></span>' || '') +'\\\n                    <div class=\"yh\">'+(item.activitys && item.activitys[0] && item.activitys[0].title || '')+'</div>\\\n                </div>\\\n                <div class=\"info\">\\\n                    <h3>'+item.estateName+'</h3>\\\n                    <p class=\"district-town-area\">\\\n                        <span>'+item.districtName+' '+item.townName+'</span><span>'+item.startSpace+'m²-'+item.endSpace+'m²</span>\\\n                    </p>\\\n                    <ul class=\"tags\">'\n                + (item.hasActivity && '<li class=\"yh\">有优惠</li>' || \"\") + (item.isSubwayEstate&&'<li class=\"dt\">近地铁</li>'||'') + (!item.isSoonOpen&&'<li>在售楼盘</li>'||'<li>即将开盘</li>') + (item.hasVideo&&'<li>有视频</li>'||'') +\n                    '</ul>\\\n                    <p class=\"unit-price\"><span>'+item.unitPrice+'</span> <span>元/m²</span></p>\\\n                </div>\\\n            </a>';\n        });\n\n        return str;\n    }    \n\n    createHouseList(data,count){// 生成房源列表\n        this.hideNoData();\n        if(data && data.length){\n            $('.no-data').hide();\n            var str = this.createHouseItems(data);\n\n            $('#list').html(str);\n            $('.total .count').text(count);\n            $('.total').slideDown();\n            setTimeout(function(){\n                $('.total').slideUp();\n            }, 1500);\n\n            this.insertTrendAndOldHouse();\n        }else{// 没数据\n            this.showNoData();\n        }\n    }\n\n    appendHouseList(data){// 上拉滚动时加载数据\n        if(data&&data.length){\n            var str = this.createHouseItems(data);\n            $('#list').append(str);\n            this.insertTrendAndOldHouse();\n        }else{// 没有更多数据了\n            //this.showNoMore();\n        }\n    }\n\n    showNoData(){// 显示没有数据，并显示新房楼盘推荐\n        $('.no-data').show();\n        $('.total + div').html('');\n        $('.recommendation').show();// TODO:显示推荐楼盘\n    }\n\n    hideNoData(){\n        $('.no-data').hide();\n    }\n\n    hideNoMore(){\n        $('.reach-bottom').hide();\n    }\n\n    insertTrendAndOldHouse(){// 场景连篇        \n        var cityName = $('#visitedCityName').val();\n        var cityPinyin = $('#visitedCityPinyin').val();\n        var channel = $('#channel').val();\n        var $list = $('#list .xf-item');\n        var oldBusiness = $('#oldBusiness').val();\n        if($('#list .scene.house-price').length == 0 && $list.length>9){\n            $('<a href=\"/'+cityPinyin+'/trend/new'+(channel? \"?channel=\" + channel:\"\")+'\" class=\"scene house-price\">\\\n                <div class=\"img\"></div>\\\n                <div class=\"info\">\\\n                    <h3>'+cityName+'房价涨了还是跌了？</h3>\\\n                    <span class=\"detail\">去看看</span>\\\n                </div>\\\n            </a>').insertAfter($($list[9]));\n        }\n        if(oldBusiness && $('#list .scene.house').length == 0 && $list.length>19){\n            $('<a href=\"/'+cityPinyin+'/esf/'+(channel? \"?channel=\" + channel:\"\")+'\" class=\"scene house\">\\\n                <div class=\"img\"></div>\\\n                <div class=\"info\">\\\n                    <h3>火爆高性价比二手房</h3>\\\n                    <span class=\"detail\">去看看</span>\\\n                </div>\\\n            </a>').insertAfter($list[19]);\n        }\n    }\n\n    showError(){// 接口报错，分为两种，1. 筛选条件变更刷新 2. 上拉加载\n\n    }\n\n    // 金箍棒loading效果，现在第一屏用同步输出 ，已经用不到了，先保留，后续删掉\n    // showLoading(){\n    //     $('.page-loading').show();\n    // }\n\n    // hideLoading(){\n    //     $('.page-loading').hide();\n    // }\n\n    // 上拉加载\n    pullload(){\n        let self = this ;\n        // var cityId = $.cookie(\"xfSelectedCityId\");\n        // var cityPinyin = $.cookie(\"xfSelectedCityPinyin\");\n        // var cityName = $.cookie(\"xfSelectedCityName\");\n        \n        //二手房\n        $(\"#list\").pullload({\n            apiUrl : self.apiUrl.xf.list ,\n            queryStringObject : function(){\n                self.param && delete self.param.pa;\n                if(!self.param){\n                    self.param = {};\n                }\n                return $.extend({},self.param,{cityId: $('#visitedCityId').val()});\n            },   \n            requestType: \"POST\",\n            threshold : 50 ,\n            pageSize: 10,   \n            pageIndexKey: \"of\",\n            pageSizeKey: \"ps\",    \n            callback : function(data) {\n                \n                if( !data.data || !data.data.newHouseDataListModelList || !data.data.newHouseDataListModelList.length){\n                    data.count = 1;\n                    return;    \n                } \n\n                self.appendHouseList(data.data.newHouseDataListModelList);                \n            }\n        }) ;\n    }\n}\n\n\n\n/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n类的初始化\n-----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n$(document).ready(function() {\n    new ListController;\n});"]}