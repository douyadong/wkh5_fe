{"version":3,"sources":["xf/list.min.js"],"names":["_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","_createClass","defineProperties","target","props","i","length","descriptor","defineProperty","key","protoProps","staticProps","ListController","_Controller","this","_this","getPrototypeOf","paramGenerator","ParamGenerator","setTimeout","$","slideDown","slideUp","lazyload","placeholder","staticDomain","require","Filter","BigData","init","ConningTower","bigDataUtil","moduleType","cityClick","data","searchResultItemClick","param","di","to","li","st","id","sdi","sto","sli","sst","sid","lat","lon","m","mapping","type","visitedCityId","val","highPriceCityIds","prices","filter","cityId","LOWPRICES","extend","XFDEFAULT","el","near","controller","filterChanged","result","generateParamObj","forEach","item","bigData","pageName","pageUrl","location","origin","pathname","replace","tmpArr","split","obj","queryString2Object","window","bindEvent","pullload","insertTrendAndOldHouse","cityPinyin","url","object2QueryString","href","search","click","str","channel","encryptSubEstateId","encodeURIComponent","subEstateId","imageUrl","hasVideo","estateName","activitys","title","districtName","townName","startSpace","endSpace","count","isSubwayEstate","isOnSale","isSoonOpen","avgPriceWou","hideNoData","showNoData","createHouseItems","html","text","append","show","hide","cityName","insertAfter","oldBusiness","$list","JSON","stringify","eventName","eventParam","city_id","requestType","pageSizeKey","callback","apiUrl","xf","list","itemClass","queryStringObject","pa","ready","pageIndexKey","newHouseDataListModelList","appendHouseList","Controller","document"],"mappings":"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","file":"list.min.js","sourcesContent":["/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n 1. 项目名称：悟空找房h5\r\n 2. 页面名称：xf/list(新房-列表)\r\n 3. 作者：tangxuyang@lifang.com\r\n -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n class ListController extends Controller {\r\n    constructor() {\r\n        super();\r\n        var self = this;        \r\n        this.paramGenerator = new ParamGenerator();\r\n        setTimeout(function(){\r\n            $('.total').slideDown(function(){\r\n                setTimeout(function(){\r\n                    $('.total').slideUp();\r\n                },2000);\r\n            });// 隐藏查询总条数   \r\n        },100);\r\n        \r\n        \r\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n        图片懒加载实例化\r\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/        \r\n        $(\".lazy\").lazyload({ \r\n            \"placeholder\" : this.staticDomain + \"/wkh5_fe/images/common/loading.jpg\"\r\n        }) ;\r\n        require(['../components/filter.min', '../components/bigdata.min', \"../components/conning-tower.min\"], function(Filter, BigData){   \r\n            BigData.init(self);         \r\n            new ConningTower({                \r\n                \"bigDataUtil\" : BigData ,               \r\n                \"moduleType\" : \"xf\" ,\r\n                \"cityClick\" : (data) => {\r\n                } ,\r\n                \"searchResultItemClick\" : (data) => {                    \r\n                    // 与filter中的区域地铁互斥\r\n                    delete self.param.di;// 区域id\r\n                    delete self.param.to;// 板块id\r\n                    delete self.param.li;// 地铁线id\r\n                    delete self.param.st;// 地铁站id\r\n                    delete self.param.id;// 小区id\r\n                    delete self.param.sdi;// 区域id\r\n                    delete self.param.sto;// 板块id\r\n                    delete self.param.sli;// 地铁线id\r\n                    delete self.param.sst;// 地铁站id\r\n                    delete self.param.sid;// 小区id\r\n                    delete self.param.lat;\r\n                    delete self.param.lon;\r\n                    delete self.param.m;\r\n                    var mapping = [\"\",\"sdi\",\"sto\",\"sli\",\"sst\",\"sid\"];\r\n                    var key = mapping[data.type];\r\n                    if(key){\r\n                        self.param[key] = data.value;\r\n                        self.goto();\r\n                    }                    \r\n                },\r\n            }) ;\r\n\r\n            // 城市不同总价选项不同，XFDEFAULT中prices是北京、上海、广州、深圳、杭州、苏州、廊坊、南京的价格选项，比较高，\r\n            // 因此需要区分\r\n            /*\r\n            *   北京\t3\r\n                上海\t43\r\n                广州\t1873\r\n                深圳\t1950\r\n                杭州\t873\r\n                苏州\t771\r\n                廊坊\t221\r\n                南京\t741\r\n            */\r\n\r\n            var visitedCityId = $('#visitedCityId').val();\r\n            var highPriceCityIds = [3,43,1873,1950,873,771,221,741];\r\n            var prices = highPriceCityIds.filter(function(cityId){return cityId == visitedCityId }).length == 0 ? Filter.LOWPRICES : null;\r\n\r\n            self.filter = new Filter($.extend({},Filter.XFDEFAULT,{\r\n                el: \".filter\",                \r\n                cityId: visitedCityId,\r\n                near: false,               \r\n                controller: self,\r\n                BigData: BigData,\r\n                filterChanged: function(result){   \r\n                    var param = self.paramGenerator.generateParamObj(result);\r\n                    if(param.di || param.to || param.li || param.st || param.lat || param.lon){\r\n                        // do nothing\r\n                    }else{// 判断是否有sid,sli,sst,sdi,sto\r\n                        var mapping = [\"sdi\",\"sto\",\"sli\",\"sst\",\"sid\"];\r\n                        mapping.forEach(function(item){\r\n                            if(self.param[item]){\r\n                                param[item] = self.param[item];\r\n                            }\r\n                        });                        \r\n                    }\r\n\r\n                    self.param = param;\r\n                    // 跳转\r\n                    self.goto();\r\n                }                \r\n            }, prices));   \r\n            \r\n            self.BigData = BigData;\r\n            BigData.bigData({\r\n                \"pageName\": \"1050\",                       \r\n                \"type\": 1\r\n            });\r\n        });\r\n\r\n        // 从url中解析参数\r\n        //var pageUrl = location.href;\r\n        var pageUrl = location.origin + location.pathname;\r\n        pageUrl = pageUrl.replace('//','');\r\n        var tmpArr = pageUrl.split('/');\r\n        self.param = {};\r\n        if(tmpArr[3]){// 有查询条件\r\n            var obj = ParamGenerator.queryString2Object(tmpArr[3]);\r\n            if(obj){\r\n                self.param = obj;\r\n            }\r\n        }\r\n                    \r\n        window.filter = self.filter;\r\n\r\n        this.bindEvent();\r\n        this.pullload();\r\n        this.insertTrendAndOldHouse();\r\n    }\r\n\r\n    // 根据查询条件进行相应的跳转\r\n    goto(){    \r\n        var cityPinyin = $('#visitedCityPinyin').val();\r\n        var url = location.origin + \"/\" + cityPinyin + \"/xflist/\" +ParamGenerator.object2QueryString(this.param);\r\n        location.href = url + location.search;\r\n    }\r\n\r\n    bindEvent(){\r\n        var self = this;\r\n        // 清空查询条件\r\n        $('.no-data button').click(function(){\r\n            // 跳转            \r\n            location.href = \"./\";\r\n        });\r\n    }    \r\n\r\n    createHouseItems(data){\r\n        var str = \"\";\r\n        var cityPinyin = $('#visitedCityPinyin').val();\r\n        var channel = $('#channel').val();\r\n        data.forEach(function(item){\r\n            str += '<a class=\"xf-item\" href=\"/'+cityPinyin+'/xf/'+item.encryptSubEstateId+'.html' +(channel? '?channel='+channel : \"\")+'\" data-bigdata=\"'+encodeURIComponent('{\"eventName\": \"1050025\", \"eventParam\": {\"new_house_id\":\"'+item.subEstateId+'\"}}')+'\">\\\r\n                <div class=\"img\">\\\r\n                    <img src=\"'+item.imageUrl+'\">'\r\n                    + (item.hasVideo == '1' && '<span class=\"play\"><i></i></span>' || '') +'\\\r\n                    <div class=\"yh\">'+(item.activitys && item.activitys[0] && item.activitys[0].title || '')+'</div>\\\r\n                </div>\\\r\n                <div class=\"info\">\\\r\n                    <h3>'+item.estateName+'</h3>\\\r\n                    <p class=\"district-town-area\">\\\r\n                        <span>'+item.districtName+' '+item.townName+'</span><span>'+item.startSpace+'m²-'+item.endSpace+'m²</span>\\\r\n                    </p>\\\r\n                    <ul class=\"tags\">'\r\n                + (item.hasActivity =='1' && '<li class=\"yh\">有优惠</li>' || \"\") + (item.isSubwayEstate == '1'&&'<li class=\"dt\">近地铁</li>'||'') + (item.isOnSale == '1' && item.isSoonOpen != '2' &&'<li>在售楼盘</li>'||'<li>即将开盘</li>') + (item.hasVideo == '1' &&'<li>有视频</li>'||'') +\r\n                    '</ul>\\\r\n                    <p class=\"unit-price\"><span>'+(item.avgPriceWou!='0'?item.avgPriceWou:'价格待定')+'</span> '+ (item.avgPriceWou!='0' && '<span>元/m²</span>' || '') +'</p>\\\r\n                </div>\\\r\n            </a>';\r\n        });\r\n\r\n        return str;\r\n    }    \r\n\r\n    createHouseList(data,count){// 生成房源列表\r\n        this.hideNoData();\r\n        if(data && data.length){\r\n            $('.no-data').hide();\r\n            var str = this.createHouseItems(data);\r\n\r\n            $('#list').html(str);\r\n            $('.total .count').text(count);\r\n            $('.total').slideDown();\r\n            setTimeout(function(){\r\n                $('.total').slideUp();\r\n            }, 1500);\r\n\r\n            this.insertTrendAndOldHouse();\r\n        }else{// 没数据\r\n            this.showNoData();\r\n        }\r\n    }\r\n\r\n    appendHouseList(data){// 上拉滚动时加载数据\r\n        if(data&&data.length){\r\n            var str = this.createHouseItems(data);\r\n            $('#list').append(str);\r\n            this.insertTrendAndOldHouse();\r\n        }else{// 没有更多数据了\r\n            //this.showNoMore();\r\n        }\r\n    }\r\n\r\n    showNoData(){// 显示没有数据，并显示新房楼盘推荐\r\n        $('.no-data').show();\r\n        $('.total + div').html('');        \r\n    }\r\n\r\n    hideNoData(){\r\n        $('.no-data').hide();\r\n    }\r\n\r\n    hideNoMore(){\r\n        $('.reach-bottom').hide();\r\n    }\r\n\r\n    insertTrendAndOldHouse(){// 场景连篇        \r\n        var cityName = $('#visitedCityName').val();\r\n        var cityPinyin = $('#visitedCityPinyin').val();\r\n        var cityId = $('#visitedCityId').val();\r\n        var channel = $('#channel').val();\r\n        var $list = $('#list .xf-item');\r\n        var oldBusiness = $('#oldBusiness').val();\r\n        if($('#list .scene.house-price').length == 0 && $list.length>9){\r\n            $('<a data-bigdata=\"'+encodeURIComponent(JSON.stringify({eventName:\"1050056\", eventParam:{city_id: cityId}}))+'\" href=\"/'+cityPinyin+'/trend/new'+(channel? \"?channel=\" + channel:\"\")+'\" class=\"scene house-price\">\\\r\n                <div class=\"img\"></div>\\\r\n                <div class=\"info\">\\\r\n                    <h3>'+cityName+'房价涨了还是跌了？</h3>\\\r\n                    <span class=\"detail\">去看看</span>\\\r\n                </div>\\\r\n            </a>').insertAfter($($list[9]));\r\n        }\r\n        if(oldBusiness && $('#list .scene.house').length == 0 && $list.length>19){\r\n            $('<a data-bigdata=\"'+encodeURIComponent(JSON.stringify({eventName: \"1050057\", eventParam: {city_id: cityId}}))+'\" href=\"/'+cityPinyin+'/esf/'+(channel? \"?channel=\" + channel:\"\")+'\" class=\"scene house\">\\\r\n                <div class=\"img\"></div>\\\r\n                <div class=\"info\">\\\r\n                    <h3>火爆高性价比二手房</h3>\\\r\n                    <span class=\"detail\">去看看</span>\\\r\n                </div>\\\r\n            </a>').insertAfter($list[19]);\r\n        }\r\n    }\r\n\r\n    showError(){// 接口报错，分为两种，1. 筛选条件变更刷新 2. 上拉加载\r\n\r\n    }\r\n\r\n    // 上拉加载\r\n    pullload(){\r\n        let self = this ;\r\n\r\n        //二手房\r\n        $(\"#list\").pullload({\r\n            apiUrl : self.apiUrl.xf.list ,\r\n            itemClass: \".xf-item\",\r\n            queryStringObject : function(){\r\n                self.param && delete self.param.pa;\r\n                if(!self.param){\r\n                    self.param = {};\r\n                }\r\n                return $.extend({},self.param,{cityId: $('#visitedCityId').val()});\r\n            },   \r\n            requestType: \"POST\",\r\n            threshold : 50 ,\r\n            pageSize: 10,   \r\n            pageIndexKey: \"of\",\r\n            pageSizeKey: \"ps\",    \r\n            callback : function(data) {\r\n                \r\n                if( !data.data || !data.data.newHouseDataListModelList || !data.data.newHouseDataListModelList.length){\r\n                    data.count = 1;\r\n                    return;    \r\n                } \r\n\r\n                self.appendHouseList(data.data.newHouseDataListModelList);                \r\n            }\r\n        }) ;\r\n    }\r\n}\r\n\r\n\r\n\r\n/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n类的初始化\r\n-----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n$(document).ready(function() {\r\n    new ListController;\r\n});"]}