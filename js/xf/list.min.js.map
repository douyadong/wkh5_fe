{"version":3,"sources":["xf/list.min.js"],"names":["ListController","self","$","slideUp","require","Filter","filter","el","houseType","cityId","controller","filterChanged","result","console","log","param","subWayLineId","metroKey","districtAndTown","districtPinyin","pinyin","request","successCallback","data","createHouseList","bindEvent","click","clear","length","hide","str","forEach","item","imageUrl","estateName","districtName","townName","startSpace","endSpace","unitPrice","html","slideDown","setTimeout","showNoData","show","Controller","document","ready"],"mappings":";;;;;;;;;;AAAA;;;;;;IAOOA,c;;;AACH,8BAAc;AAAA;;AAAA;;AAEV,YAAIC,YAAJ;AACAC,UAAE,QAAF,EAAYC,OAAZ;AACAC,gBAAQ,CAAC,0BAAD,CAAR,EAAsC,UAASC,MAAT,EAAgB;AAClDJ,iBAAKK,MAAL,GAAc,IAAID,MAAJ,CAAW;AACrBE,oBAAI,SADiB;AAErBC,2BAAW,CAFU;AAGrBC,wBAAQ,EAHa;AAIrBC,4BAAYT,IAJS;AAKrBU,+BAAe,uBAASC,MAAT,EAAgB;AAC3BC,4BAAQC,GAAR,CAAY,SAAZ,EAAuBF,MAAvB;AACA,wBAAIG,QAAQ;AACRC,sCAAcJ,OAAOK,QADb;AAERC,yCAAiBN,OAAOO,cAFhB;AAGRC,gCAAQ;AAHA,qBAAZ;AAKAP,4BAAQC,GAAR,CAAY,KAAZ,EAAkBC,KAAlB;AACAd,yBAAKoB,OAAL,CAAa,0CAAb,EAAwDN,KAAxD,EAA+D;AAC3DO,yCAAiB,yBAASC,IAAT,EAAc;AAC3BtB,iCAAKuB,eAAL,CAAqBD,KAAKA,IAA1B;AACH;AAH0D,qBAA/D;AAKH;AAlBoB,aAAX,CAAd;AAoBH,SArBD;;AAuBA,cAAKE,SAAL;AA3BU;AA4Bb;;;;oCAEU;AACP,gBAAIxB,OAAO,IAAX;AACAC,cAAE,iBAAF,EAAqBwB,KAArB,CAA2B,YAAU;AACjCzB,qBAAKK,MAAL,CAAYqB,KAAZ;AACH,aAFD;AAGH;;;wCAEeJ,I,EAAK;AAAC;AAClB,gBAAGA,QAAQA,KAAKK,MAAhB,EAAuB;AACnB1B,kBAAE,UAAF,EAAc2B,IAAd;AACA,oBAAIC,MAAM,EAAV;AACAP,qBAAKQ,OAAL,CAAa,UAASC,IAAT,EAAc;AACvBF,2BAAO;;+BAAA,GAESE,KAAKC,QAFd,GAEuB;;;;yBAFvB,GAMGD,KAAKE,UANR,GAMmB;;+BANnB,GAQSF,KAAKG,YARd,GAQ2B,GAR3B,GAQ+BH,KAAKI,QARpC,GAQ6C,eAR7C,GAQ6DJ,KAAKK,UARlE,GAQ6E,IAR7E,GAQkFL,KAAKM,QARvF,GAQgG;;;;;iDARhG,GAa2BN,KAAKO,SAbhC,GAa0C;;iBAbjD;AAgBH,iBAjBD;;AAmBArC,kBAAE,cAAF,EAAkBsC,IAAlB,CAAuBV,GAAvB;AACA5B,kBAAE,QAAF,EAAYuC,SAAZ;AACAC,2BAAW,YAAU;AACjBxC,sBAAE,QAAF,EAAYC,OAAZ;AACH,iBAFD,EAEG,IAFH;AAGH,aA3BD,MA2BK;AAAC;AACF,qBAAKwC,UAAL;AACH;AACJ;;;qCAEW;AAAC;AACTzC,cAAE,UAAF,EAAc0C,IAAd;AACA1C,cAAE,cAAF,EAAkBsC,IAAlB,CAAuB,EAAvB;AACAtC,cAAE,iBAAF,EAAqBsC,IAArB,CAA0B,EAA1B;AACH;;;;EA3EyBK,U;;AA+E9B;;;;;AAGA3C,EAAE4C,QAAF,EAAYC,KAAZ,CAAkB,YAAW;AACzB,QAAI/C,cAAJ;AACH,CAFD","file":"list.min.js","sourcesContent":["/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n 1. 项目名称：悟空找房h5\r\n 2. 页面名称：rent/list(租房-列表)\r\n 3. 作者：liyang@lifang.com\r\n -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n class ListController extends Controller {\r\n    constructor() {\r\n        super();\r\n        var self = this;\r\n        $('.total').slideUp();\r\n        require(['../components/filter.min'], function(Filter){\r\n            self.filter = new Filter({\r\n                el: \".filter\",\r\n                houseType: 1,\r\n                cityId: 43,\r\n                controller: self,\r\n                filterChanged: function(result){\r\n                    console.log(\"筛选条件变了：\", result);\r\n                    var param = {\r\n                        subWayLineId: result.metroKey,\r\n                        districtAndTown: result.districtPinyin,\r\n                        pinyin: \"shanghai\"                        \r\n                    };\r\n                    console.log(\"参数：\",param);\r\n                    self.request(\"https://m.wkzf.com/xflist/houselist.rest\",param, {\r\n                        successCallback: function(data){\r\n                            self.createHouseList(data.data);                            \r\n                        }\r\n                    });\r\n                }                \r\n            });\r\n        });\r\n\r\n        this.bindEvent();\r\n    }\r\n\r\n    bindEvent(){\r\n        var self = this;\r\n        $('.no-data button').click(function(){\r\n            self.filter.clear();\r\n        });\r\n    }\r\n\r\n    createHouseList(data){// 生成房源列表\r\n        if(data && data.length){\r\n            $('.no-data').hide();\r\n            var str = \"\";\r\n            data.forEach(function(item){\r\n                str += '<a class=\"xf-item\">\\\r\n                <div class=\"img\">\\\r\n                    <img src=\"'+item.imageUrl+'\">\\\r\n                    <div class=\"yh\">团购享 20万抵50万</div>\\\r\n                </div>\\\r\n                <div class=\"info\">\\\r\n                    <h3>'+item.estateName+'</h3>\\\r\n                    <p class=\"district-town-area\">\\\r\n                        <span>'+item.districtName+' '+item.townName+'</span><span>'+item.startSpace+'m-'+item.endSpace+'m</span>\\\r\n                    </p>\\\r\n                    <ul class=\"tags\">\\\r\n                        <li class=\"yh\">有优惠</li><li class=\"dt\">进地铁</li><li class=\"\">在售楼盘</li><li class=\"\">即将开盘</li><li class=\"\">即将开盘</li>\\\r\n                    </ul>\\\r\n                    <p class=\"unit-price\"><span>'+item.unitPrice+'</span> <span>元/m</span></p>\\\r\n                </div>\\\r\n            </a>';\r\n            });\r\n\r\n            $('.total + div').html(str);\r\n            $('.total').slideDown();\r\n            setTimeout(function(){\r\n                $('.total').slideUp();\r\n            }, 1500);\r\n        }else{// 没数据\r\n            this.showNoData();\r\n        }\r\n    }\r\n\r\n    showNoData(){// 显示没有数据，并显示新房楼盘推荐\r\n        $('.no-data').show();\r\n        $('.total + div').html('');\r\n        $('.recommendation').html('');\r\n    }\r\n}\r\n\r\n\r\n/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n类的初始化\r\n-----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n$(document).ready(function() {\r\n    new ListController;\r\n});"]}