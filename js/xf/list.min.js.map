{"version":3,"sources":["xf/list.min.js"],"names":["ListController","self","total","count","pageSize","$","slideUp","require","Filter","filter","el","houseType","cityId","near","longitude","latitude","distances","value","text","controller","filterChanged","result","console","log","param","convertParam","hideNoData","hideNoMore","fetchData","data","showNoMore","createHouseList","qs","object2QueryString","window","history","pushState","onpopstate","event","location","href","state","tempArr","split","str","startsWith","substring","queryString2Object","bindEvent","pullload","click","clear","forEach","item","imageUrl","estateName","districtName","townName","startSpace","endSpace","unitPrice","obj","tmpArr","key","Object","prototype","toString","call","i","length","push","join","ret","funcs","sort","so","price","cp","district","di","town","to","metro","li","station","st","meter","m","features","ta","propertyTypes","ty","decorations","dt","types","la","func","hide","createHouseItems","html","slideDown","setTimeout","insertTrendAndOldHouse","showNoData","append","show","success","error","request","successCallback","errorCallback","cityName","$list","insertAfter","parseInt","val","apiUrl","queryStringObject","threshold","callback","appendHouseList","replaceState","Controller","document","ready"],"mappings":"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","file":"list.min.js","sourcesContent":["/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n 1. 项目名称：悟空找房h5\n 2. 页面名称：xf/list(新房-列表)\n 3. 作者：tangxuyang@lifang.com\n -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n class ListController extends Controller {\n    constructor() {\n        super();\n        var self = this;\n        this.total = 0;//总数\n        this.count = 0;//当前数量\n        this.pageSize = 10;//\n        $('.total').slideUp();\n        require(['../components/filter.min'], function(Filter){            \n            self.filter = new Filter({\n                el: \".filter\",\n                houseType: 1,\n                cityId: 43,\n                near: false,\n                longitude: 222,\n                latitude: 234,\n                distances: [{value: \"5000\", text: \"不限（智能范围）\"},{value: \"500\", text: \"500米\"},{value: \"1000\", text: \"1000米\"},{value: \"2000\", text: \"2000米\"},{value: \"5000\", text: \"5000米\"}],\n                controller: self,\n                filterChanged: function(result){\n                    this.total = 0;\n                    this.count = 0;                    \n                    console.log(\"筛选条件变了：\", result);                                        \n\n                    var param = self.convertParam(result);\n                    self.param = param;\n                    self.hideNoData();\n                    self.hideNoMore();\n                    self.fetchData(param,function(data){\n                        if(data.count!=0 && data.count<=self.pageSize){// 没有更多了\n                            self.showNoMore();\n                        }\n                        self.createHouseList(data.data,data.count);  \n                        var qs = self.object2QueryString(param);                        \n                        window.history.pushState(param, \"\", \"./\" + qs);       \n                    });\n                }                \n            });\n\n            window.filter = self.filter;\n        });\n\n        window.onpopstate = function(event){\n            console.log('onpopstate');\n            console.log(event);\n            console.log(location.href);\n            var param;\n            if(event.state){\n                param = event.state;\n            }else{\n                var tempArr = location.href.split('xflist');\n                var str = tempArr[1];\n                if(str.startsWith('/')){\n                    str = str.substring(1);\n                }\n\n                param = self.queryString2Object(str);\n            }\n\n            self.fetchData(param,function(data){\n                if(data.count!=0 && data.count<=self.pageSize){// 没有更多了\n                    self.showNoMore();\n                }\n                self.createHouseList(data.data,data.count);       \n            });            \n        };\n\n        this.bindEvent();\n        this.pullload();\n    }\n\n    bindEvent(){\n        var self = this;\n        $('.no-data button').click(function(){\n            self.filter.clear();\n        });\n    }    \n\n    createHouseItems(data){\n        var str = \"\";\n        data.forEach(function(item){\n            str += '<a class=\"xf-item\" href=\"/shanghai/rent/b5463d25fbc09ea7.html?channel=undefined\">\\\n                <div class=\"img\">\\\n                    <img src=\"'+item.imageUrl+'\">\\\n                    <div class=\"yh\">团购享 20万抵50万</div>\\\n                </div>\\\n                <div class=\"info\">\\\n                    <h3>'+item.estateName+'</h3>\\\n                    <p class=\"district-town-area\">\\\n                        <span>'+item.districtName+' '+item.townName+'</span><span>'+item.startSpace+'m-'+item.endSpace+'m</span>\\\n                    </p>\\\n                    <ul class=\"tags\">\\\n                        <li class=\"yh\">有优惠</li><li class=\"dt\">近地铁</li><li class=\"\">在售楼盘</li><li class=\"\">即将开盘</li><li class=\"\">即将开盘</li>\\\n                    </ul>\\\n                    <p class=\"unit-price\"><span>'+item.unitPrice+'</span> <span>元/m</span></p>\\\n                </div>\\\n            </a>';\n        });\n\n        return str;\n    }\n\n    object2QueryString(obj){\n        console.log(obj);\n        var tmpArr = [];\n\n        for(var key in obj){\n            if(typeof(obj[key]) === 'undefined') continue;\n            if(Object.prototype.toString.call(obj[key]) == \"[object Array]\"){// 数组\n                for(var i = 0; i < obj[key].length; i++){\n                    tmpArr.push(key);\n                    tmpArr.push(obj[key][i]);\n                }\n            }else{\n                tmpArr.push(key);\n                tmpArr.push(obj[key]);\n            }\n        }\n\n        return tmpArr.join('-');\n    }\n\n    queryString2Object(str){\n        if(str){\n            var tmpArr = str.split('-');\n            var ret = {};\n\n            if(tmpArr.length % 2 == 1){\n                return {};// 参数有问题\n            }\n\n            for(var i = 0; i < tmpArr.length / 2; i+=2){\n                if(typeof ret[tmpArr[i]] === 'undefined'){\n                    ret[tmpArr[i]] = tmpArr[i+1];\n                }else if(Object.prototype.call(ret[tmpArr[i]]) === '[object Array]'){\n                    ret[tmpArr[i]].push(tmpArr[i+1]);\n                } else {\n                    ret[tmpArr[i]] = [tmpArr[i+1]];\n                }\n            }\n        }\n\n        return {};\n    }\n\n    convertParam(obj){\n        // 把从filter中获得的查询条件转化成后端接口需要的格式\n        var funcs = {\n            sort: function(ret, data){\n                ret.so = data;\n            },\n\n            price: function(ret, data){\n                ret.cp = data; \n            },\n\n            district: function(ret, data){\n                ret.di = data;\n            },\n\n            town: function(ret, data){\n                ret.to = data;\n            },\n\n            metro: function(ret, data){\n                ret.li = data;\n            },\n\n            station: function(ret, data){\n                ret.st = data;\n            },\n\n            meter: function(ret, data){\n                ret.m = data;\n            },\n\n            features: function(ret, data){// 特色\n                ret.ta = data;\n            },\n\n            propertyTypes: function(ret, data){// 物业类型\n                ret.ty = data;\n            },\n\n            decorations: function(ret, data){// 装修\n                ret.dt = data;\n            },\n\n            types: function(ret, data){// 户型\n                ret.la = data;\n            }            \n        };\n\n        var ret = {};\n        for(var key in obj) {\n            var func = funcs[key];\n            if(func){\n                func(ret, obj[key]);\n            }\n        }\n\n        return ret;\n    }\n\n    createHouseList(data,count){// 生成房源列表\n        this.hideNoData();\n        if(data && data.length){\n            $('.no-data').hide();\n            var str = this.createHouseItems(data);\n\n            $('.list').html(str);\n            $('.total .count').text(count);\n            $('.total').slideDown();\n            setTimeout(function(){\n                $('.total').slideUp();\n            }, 1500);\n\n            this.insertTrendAndOldHouse();\n        }else{// 没数据\n            this.showNoData();\n        }\n    }\n\n    appendHouseList(data){// 上拉滚动时加载数据\n        if(data&&data.length){\n            var str = this.createHouseItems(data);\n            $('.list').append(str);\n            this.insertTrendAndOldHouse();\n        }else{// 没有更多数据了\n            this.showNoMore();\n        }\n    }\n\n    showNoData(){// 显示没有数据，并显示新房楼盘推荐\n        $('.no-data').show();\n        $('.total + div').html('');\n        $('.recommendation').show();// TODO:显示推荐楼盘\n    }\n\n    hideNoData(){\n        $('.no-data').hide();\n    }\n\n    showNoMore(){// 显示没有更多\n        $('.reach-bottom').show();\n    }\n\n    hideNoMore(){\n        $('.reach-bottom').hide();\n    }\n\n    loadMore(){// 加载更多数据\n        \n    }\n\n    fetchData(param,success,error){// 获取列表数据\n        this.request(\"https://m.wkzf.com/xflist/houselist.rest\",param, {\n            successCallback: success,\n            errorCallback: error\n        });\n    }\n\n    insertTrendAndOldHouse(){// 插入跳转到价格行情和二手房的链接\n        //$('.list .xf-item').length()\n        var cityName = \"上海\";\n        var $list = $('.list .xf-item:not(.house):not(.house-price)');\n        if($('.list .house-price').length == 0 && $list.length>9){\n            $('<a href=\"#\" class=\"xf-item house-price\">\\\n                <div class=\"img\"></div>\\\n                <div class=\"info\">\\\n                    <h3>'+cityName+'房价涨了还是跌了？</h3>\\\n                    <span class=\"detail\">去看看</span>\\\n                </div>\\\n            </a>').insertAfter($($list[9]));\n        }\n        if($('.list .price').length == 0 && $list.length>19){\n            $('<a href=\"#\" class=\"xf-item house\">\\\n                <div class=\"img\"></div>\\\n                <div class=\"info\">\\\n                    <h3>火爆高性价比二手房</h3>\\\n                    <span class=\"detail\">去看看</span>\\\n                </div>\\\n            </a>').insertAfter($list[19]);\n        }\n    }\n\n    showError(){// 接口报错，分为两种，1. 筛选条件变更刷新 2. 上拉加载\n\n    }\n\n    pullload(){\n        let self = this ;\n        var i = parseInt($('#count').val() || 0);\n        //二手房\n        $(\".list\").pullload({\n            apiUrl : \"https://m.wkzf.com/xflist/houselist.rest\" ,\n            queryStringObject : function(){\n                return self.param;\n            },   \n            threshold : 50 ,\n            pageSize: 10,       \n            callback : function(data) {\n                if( ! data.data) return ;                \n                self.appendHouseList(data.data);\n                window.history.replaceState(null, \"\", \"\" + (++i));\n            }\n        }) ;\n    }\n}\n\n\n/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n类的初始化\n-----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n$(document).ready(function() {\n    new ListController;\n});"]}