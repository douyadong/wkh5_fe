"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
 1. 项目名称：悟空找房h5
 2. 页面名称：xf/ads(新房-广告)
 3. 作者：zhaohuagang@lifang.com
 -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/
var XfAds = function () {
    function XfAds() {
        _classCallCheck(this, XfAds);

        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
        定义常量
        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/
        this.consts = {
            "$adsContainer": $(".xf-ads"),
            "$xfItemsContainer": $(".container"),
            "$conningTower": $(".conning-tower"),
            "duration": 100
        };
        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
        实例化swiper
        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/
        require(["../components/swiper-3.4.2.jquery.min"], function () {
            var pictAds = new Swiper(".xf-ads .pict-ads", {
                autoplay: 4000,
                pagination: ".swiper-pagination",
                paginationClickable: true
            });
            var textAds = new Swiper(".xf-ads .text-ads .items", {
                autoplay: 3000,
                direction: "vertical"
            });
        });
        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
        图片广告如果只有一个，就不显示圆点导航
        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/
        if ($(".xf-ads .pict-ads .swiper-wrapper .swiper-slide").length <= 1) $(".xf-ads .pict-ads .swiper-pagination").hide();
        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
        根据隐藏域routerConditionParams是否有值来决定广告的显示隐藏
        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/
        this.evaluateAdsStatus();
    }
    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
    展示广告
    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/


    _createClass(XfAds, [{
        key: "open",
        value: function open() {
            this.consts.$adsContainer.slideDown(this.consts.duration);
            this.consts.$conningTower.css({ "padding-bottom": "10px" });
            this.consts.$xfItemsContainer.animate({ paddingTop: "313px" }, this.consts.duration);
        }
        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
        关闭广告
        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/

    }, {
        key: "close",
        value: function close() {
            this.consts.$adsContainer.slideUp(this.consts.duration);
            this.consts.$conningTower.css({ "padding-bottom": 0 });
            this.consts.$xfItemsContainer.animate({ paddingTop: 97 + $(window).scrollTop() + "px" }, this.consts.duration);
        }
        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
        根据滚动条位置决定广告是打开
        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/

    }, {
        key: "swapAdsWithScrollTop",
        value: function swapAdsWithScrollTop() {
            var st = $(window).scrollTop();
            if (st <= 50 && !this.consts.$adsContainer.is(":visible")) this.open();else if (st > 50 && this.consts.$adsContainer.is(":visible")) this.close();
        }

        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
        根据隐藏域routerConditionParams是否有值来决定广告的显示隐藏
        1. 如果有值是肯定不显示
        2. 如果没值就看滚动条位置并给window绑定scroll，还要给筛选区域绑定click
        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/

    }, {
        key: "evaluateAdsStatus",
        value: function evaluateAdsStatus() {
            var _this = this;

            var condition = $("#routerConditionParams").val();
            if (condition) return;
            $(window).on("scroll", function () {
                _this.swapAdsWithScrollTop();
            });
            this.swapAdsWithScrollTop();
        }
    }]);

    return XfAds;
}();

/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
类的初始化
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/


$(document).ready(function () {
    new XfAds();
});
//# sourceMappingURL=ads.min.js.map
