"use strict";function _classCallCheck(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,i){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!i||"object"!=typeof i&&"function"!=typeof i?e:i}function _inherits(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function, not "+typeof i);e.prototype=Object.create(i&&i.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(e,i):e.__proto__=i)}var _createClass=function(){function e(e,i){for(var t=0;t<i.length;t++){var s=i[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(i,t,s){return t&&e(i.prototype,t),s&&e(i,s),i}}(),ListController=function(e){function i(){_classCallCheck(this,i);var e=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));$(".lazy").lazyload({placeholder:e.staticDomain+"/wkh5_fe/images/common/loading.jpg"}),new Location({businessType:"rent",cityApiUrl:e.apiUrl.common.getCityByLatLon,identical:function(e){console.log(e)}}),e.readyFun();var t=e,s=43;localStorage.cookieId=$.cookie("cookieId"),s=$.cookie("cityId")?$.cookie("cityId"):43;var a=location.href.slice(0,location.href.lastIndexOf("/")+1),o=location.href.slice(location.href.lastIndexOf("/")+1,location.href.length),l="",c="",n="";if(""==o?a=a:"rent"==o&&(a+="rent/",o=""),o.indexOf("?")<0)l=o;else{l=o.slice(0,o.indexOf("?")),c=o.slice(o.indexOf("?"));var r=e.GetRequest();r.districtId?delete r.districtId:r.townId?delete r.townId:r.subwayLine?delete r.subwayLine:r.subwayStation?delete r.subwayStation:r.subEstateId&&delete r.subEstateId,r&&(n="?"+$.param(r))}var d=e.GetRequest().channel||"",h=e.parseCondition({condition:l});if(e.choseFun(h),e.request(e.apiUrl.rent.list.cityAreas,{houseType:3,cityId:s},{successCallback:function(e){if(1==e.status){var i=e,s=i.data,o="",l="",c="",r="";h.di?($(".dic-content").show(),o="<li>不限</li>",s.forEach(function(e){e.id==h.di?(o+='<li class="areas-subway" data-id ="'+e.id+'" data-di="di-'+e.id+'">'+e.name+"</li>",h.to?(l="<li>不限</li>",e.townList.forEach(function(e){e.id==h.to?(l+='<li class="chosed" data-id ="'+e.id+'" data-to="to-'+e.id+'">'+e.name+"</li>",$("#dic>p").html(e.name)):l+='<li  data-id ="'+e.id+'" data-to="to-'+e.id+'">'+e.name+"</li>"})):(l="<li class='chosed'>不限</li>",e.townList.forEach(function(e){l+='<li  data-id ="'+e.id+'" data-to="to-'+e.id+'">'+e.name+"</li>"}),c=e.name,$("#dic>p").html(e.name)),r="di-"+e.id):o+='<li data-id ="'+e.id+'" data-di="di-'+e.id+'">'+e.name+"</li>"}),$("#dic").find("i").addClass("bacchosed"),$("#dic").addClass("chosed")):(o="<li class='areas-subway'>不限</li>",s.forEach(function(e){o+='<li data-id ="'+e.id+'" data-di="di-'+e.id+'">'+e.name+"</li>"})),$("#dicAreas").append(o),$("#town").append(l),$("#dicAreas>li").click(function(){var e=$(this).attr("data-id");if(r=$(this).attr("data-di"),c=$(this).html(),$(this).siblings().removeClass("areas-subway"),$(this).addClass("areas-subway"),"不限"==c){$("#dic>p").html("区域"),$(".bac").hide(),$("#dic").children("span").removeClass("direction"),$("#dic").find("i").removeClass("bacchosed"),$("#dic").removeClass("active-color-top"),$("#dic").removeClass("chosed"),$(".dic").slideToggle(),delete h.di,delete h.to,delete h.li,delete h.st;var i=t.objectToString(h);window.location.href=a+i+n}else s.forEach(function(i){h.di?(h.di==i.id&&e==i.id?h.to?(l="<li>不限</li>",i.townList.forEach(function(e){l+=h.to==e.id?'<li class="chosed" data-id ="'+e.id+'" data-to="to-'+e.id+'">'+e.name+"</li>":'<li data-id ="'+e.id+'" data-to="to-'+e.id+'">'+e.name+"</li>"})):(l="<li class='chosed'>不限</li>",i.townList.forEach(function(e){l+='<li data-id ="'+e.id+'" data-to="to-'+e.id+'">'+e.name+"</li>"})):e==i.id&&i.townList&&(l="<li>不限</li>",i.townList.forEach(function(e){l+='<li data-id ="'+e.id+'" data-to="to-'+e.id+'">'+e.name+"</li>"})),$("#town").empty().append(l)):e==i.id&&i.townList&&(l="<li>不限</li>",i.townList.forEach(function(e){l+='<li data-id ="'+e.id+'" data-to="to-'+e.id+'">'+e.name+"</li>"}),$("#town").empty().append(l))})}),$("#town").on("click","li",function(){$(this).siblings().removeClass("chosed"),$(this).addClass("chosed");var e=($(this).attr("data-id"),$(this).attr("data-to")),i=$(this).html();if(delete h.li,delete h.st,"不限"==i){$("#dic > p").html(c);var s=t.parseCondition({condition:r});$.extend(h,s),delete h.to;var o=t.objectToString(h);console.log(o),window.location.href=a+o+n}else{$("#dic > p").html(i);var l=r+"-"+e,d=t.parseCondition({condition:l});$.extend(h,d);var u=t.objectToString(h);console.log(u),window.location.href=a+u+n}$(".bac").hide(),$("#dic").children("span").removeClass("direction"),$("#dic").find("i").addClass("bacchosed"),$("#dic").addClass("chosed"),$(".dic").slideToggle()})}}}),e.request(e.apiUrl.rent.list.citySubway,{cityId:s},{successCallback:function(e){if(1==e.status&&e.data.length){var i=e,s=i.data,o="",l="",c="",r="";s.forEach(function(e){h.li&&h.li==e.id?($(".dic-content").hide(),$(".metro-content").show(),$(".tabs > ul > li:eq(0)").removeClass("active-color-dic"),$(".tabs > ul > li:eq(1)").addClass("active-color-dic"),o+='<li class="areas-subway" data-id ="'+e.id+'" data-li="li-'+e.id+'">'+e.name+"</li>",h.st?(l="<li>不限</li>",e.subList.forEach(function(e){h.st==e.id?(l+="<li  class='chosed' data-id =\""+e.id+'" data-st="st-'+e.id+'">'+e.name+"</li>",$("#dic > p").html(e.name)):l+='<li data-id ="'+e.id+'" data-st="st-'+e.id+'">'+e.name+"</li>"})):(l="<li class='chosed'>不限</li>",e.subList.forEach(function(e){l+='<li data-id ="'+e.id+'" data-st="st-'+e.id+'">'+e.name+"</li>"}),c=e.name,$("#dic > p").html(c)),r="li-"+e.id,$("#dic").find("i").addClass("bacchosed"),$("#dic").addClass("chosed")):o+='<li data-id ="'+e.id+'" data-li="li-'+e.id+'">'+e.name+"</li>"}),$("#metroStation").append(l),$("#metroLine").append(o),$("#metroLine > li").click(function(){var e=$(this).attr("data-id");r=$(this).attr("data-li"),c=$(this).html(),$(this).siblings().removeClass("areas-subway"),$(this).addClass("areas-subway"),s.forEach(function(i){e==i.id&&i.subList&&(h.li==i.id&&h.st?(l="<li>不限</li>",i.subList.forEach(function(e){l+=h.st==e.id?'<li class="chosed"  data-id ="'+e.id+'" data-st="st-'+e.id+'">'+e.name+"</li>":'<li data-id ="'+e.id+'" data-st="st-'+e.id+'">'+e.name+"</li>"})):h.li!=i.id||h.st?h.li!=i.id&&(l="<li>不限</li>",i.subList.forEach(function(e){l+='<li data-id ="'+e.id+'" data-st="st-'+e.id+'">'+e.name+"</li>"})):(l="<li class='chosed'>不限</li>",i.subList.forEach(function(e){l+='<li data-id ="'+e.id+'" data-st="st-'+e.id+'">'+e.name+"</li>"})),$("#metroStation").empty().append(l))})}),$("#metroStation ").on("click","li",function(){$(this).siblings().removeClass("chosed"),$(this).addClass("chosed");var e=($(this).attr("data-id"),$(this).attr("data-st")),i=$(this).html();if(delete h.di,delete h.to,"不限"==$(this).html()){$("#dic > p").html(c);var s=t.parseCondition({condition:r});$.extend(h,s),delete h.st;var o=t.objectToString(h);console.log(o),window.location.href=a+o+n}else{$("#dic > p").html(i);var l=r+"-"+e,d=t.parseCondition({condition:l});$.extend(h,d);var u=t.objectToString(h);window.location.href=a+u+n}$(".bac").hide(),$("#dic").children("span").removeClass("direction"),$("#dic").find("i").addClass("bacchosed"),$("#dic").addClass("chosed"),$(".dic").slideToggle()})}else $(".subway").hide()}}),e.firstGivePage(h),$(".price-list > ul >li").click(function(){if($(this).siblings().removeClass("chosed"),$(this).addClass("chosed"),$(".bac").hide(),$("#price").children("span").removeClass("direction"),delete h.cp,"不限"==$(this).html()){$("#price>p").html("租金"),$("#price").find("i").removeClass("bacchosed"),$("#price").removeClass("active-color-top"),$("#price").removeClass("chosed"),delete h.pr;var e=t.objectToString(h);console.log(e),window.location.href=a+e+c}else{$("#price>p").html($(this).html().replace(/\s|\xA0/g,"")),$("#price").find("i").addClass("bacchosed"),$("#price").addClass("active-color-top");var i=$(this).attr("data-pr"),s=t.parseCondition({condition:i});$.extend(h,s);var o=t.objectToString(h);window.location.href=a+o+c}$(".price-total").slideToggle()}),$("#selfPrConf").click(function(e){e.preventDefault();var i=$("#lowPr").val(),s=$("#topPr").val();if($(".wrong").hide(),i&&s)if(parseInt(i)>parseInt(s))$(".wrong").show(),setTimeout(function(){$(".wrong").hide()},2e3);else{$("#price>p").html(i+"-"+s),$("#price").find("i").addClass("bacchosed"),$("#price").addClass("active-color-top"),delete h.pr;var o={cp:i+"to"+s};$.extend(h,o);var l=t.objectToString(h);console.log(l),window.location.href=a+l+c,$(".bac").hide(),$("#price").children("span").removeClass("direction"),$(".price-total").slideToggle()}else{if(""==i&&s){$("#price>p").html(s+"以下"),$("#price").find("i").addClass("bacchosed"),$("#price").addClass("active-color-top"),delete h.pr;var n={cp:"0to"+s};$.extend(h,n);var r=t.objectToString(h);console.log(r),window.location=a+r+c}else if(""==s&&i){$("#price>p").html(i+"以上"),$("#price").find("i").addClass("bacchosed"),$("#price").addClass("active-color-top"),delete h.pr;var d={cp:i+"to0"};$.extend(h,d);var u=t.objectToString(h);console.log(u),window.location.href=a+u+c}else{$("#price>p").html("租金"),$("#price").find("i").removeClass("bacchosed"),$("#price").removeClass("active-color-top"),$("#price").removeClass("chosed"),delete h.pr,delete h.cp;var p=t.objectToString(h);console.log(p),window.location.href=a+p+c}$(".bac").hide(),$("#price").children("span").removeClass("direction"),$(".price-total").slideToggle()}}),$("#houseCmfir").click(function(){var e=$(".house-list  > ul > li "),i="",s=[],o=[];if(e.each(function(e,i){1==i.classList.length?s.push(e):o.push(e)}),s.length>0){if(s.forEach(function(e,t){i=0==t?$(".house-list  > ul > li:eq("+e+")").attr("data-la"):i+"-"+$(".house-list  > ul > li:eq("+e+")").attr("data-la")}),1==s.length)if("不限"==$(".house-list  > ul > li:eq("+s[0]+")").html())$("#type >p").html("户型");else{var l=$(".house-list  > ul > li:eq("+s[0]+")").html();$("#type >p").html(l),$("#type").find("i").addClass("bacchosed")}else $("#type >p").html("多选"),$("#type").find("i").addClass("bacchosed");var n=t.parseCondition({condition:i});$.extend(h,n);var r=t.objectToString(h);console.log(r),console.log(a+r),window.location.href=a+r+c}5==o.length&&0==s[0]&&($("#type").find("i").removeClass("bacchosed"),$("#type").removeClass("active-color-top"),$("#type").removeClass("chosed")),$(".bac").hide(),$("#type").children("span").removeClass("direction"),$(".house-type").slideToggle()}),$("#moreComf").click(function(){var e=$(".more-spec > ul >li"),i=$(".area > ul >li"),s=$(".decoration > ul >li"),o="",l="",n="",r=[],d={},u={},p={},f=[];e.each(function(e,i){1==i.classList.length?0==e?o="ta-1":o+="-ta-1":0==e?o="ta-0":o+="-ta-0"}),i.each(function(e,i){1==i.classList.length&&f.push(e)}),f.length>0&&f.forEach(function(e,i){l=0==i?$(".area > ul >li:eq("+e+")").attr("data-ar"):l+"-"+$(".area > ul >li:eq("+e+")").attr("data-ar")}),s.each(function(e,i){1==i.classList.length&&r.push(e)}),r.length>0&&r.forEach(function(e,i){n=0==i?$(".decoration > ul >li:eq("+e+")").attr("data-dt"):n+"-"+$(".decoration > ul >li:eq("+e+")").attr("data-dt")}),o?d=t.parseCondition({condition:o}):delete h.ta,l?u=t.parseCondition({condition:l}):delete h.ar,n?p=t.parseCondition({condition:n}):delete h.dt,u.ar||p.dt||d.ta?($("#more").find("i").addClass("bacchosed"),$("#more").removeClass("active-color-top"),$("#more").addClass("chosed")):($("#more").find("i").removeClass("bacchosed"),$("#more").removeClass("active-color-top"),$("#more").removeClass("chosed")),$(".bac").hide(),$("#more").children("span").removeClass("direction"),$(".more").slideToggle(),$.extend(h,d,u,p);var v=t.objectToString(h);window.location.href=a+v+c}),h.so){var u=$(".sort-chose>ul>li"),p=t.objectToString({so:h.so});u.each(function(e,i){p==$(".sort-chose>ul>li:eq("+e+")").attr("data-so")&&($(".sort-chose>ul>li:eq("+e+")").siblings().removeClass("chosed"),$(".sort-chose>ul>li:eq("+e+")").addClass("chosed"))}),"so-0"!=p?$(".sort").addClass("sort-change"):$(".sort").removeClass("sort-change")}return $(".sort-chose>ul>li").click(function(){$(".bac").css({"z-index":"10",top:"4.5rem"}),$(".bac").hide(),$(this).siblings().removeClass("chosed"),$(this).addClass("chosed"),$(".sort-chose").slideToggle();var e=$(this).attr("data-so"),i=t.parseCondition({condition:e});console.log(i),$.extend(h,i);var s=t.objectToString(h);console.log(s),window.location.href=a+s+c}),$(".clearOption").click(function(){window.location.href=a+n}),e.pullData(l,s),require(["../components/list-search.min"],function(e){e.init(t),e.searchInputClick(d,h,a,n,s)}),$(".icon-hanbao").click(function(){$(".bac").css({"z-index":"16",top:"0"}),$(".bac").show(),$(".slide-right").show(),$(".slide-right").animate({right:"0"})}),require(["../components/bigdata.min"],function(e){e.init(t),e.bigData({pageName:"1202",channel:d,type:1})}),$(".writ-price").click(function(e){e.stopPropagation()}),$(".price-list > ul").scroll(function(e){e.stopPropagation()}),e}return _inherits(i,e),_createClass(i,[{key:"readyFun",value:function(){setTimeout(function(){$(".total-num").hide(),$(".all-control").css("margin-top","8.5rem")},1500),$(".content-hight").height(.7*$(window).height()-$(".tabs").height())}},{key:"choseFun",value:function(e){var i=this;$(".rent-list > ul > li").click(function(){$(this).siblings().removeClass("active-color-top"),$(this).toggleClass("active-color-top");var t=$(".rent-list > ul > li > span >i");t.each(function(e,i){1==i.classList.length?$(".rent-list > ul > li:eq("+e+")").addClass("chosed"):$(".rent-list > ul > li:eq("+e+")").removeClass("chosed")}),$(this).siblings().children("span").removeClass("direction"),$(this).children("span").toggleClass("direction");var s=$(".rent-list > ul > li > span");$(".bac").hide(),i.GetRequest().channel?$("#sort").hide():$("#sort").show(),s.each(function(e,i){1==i.classList.length&&($(".bac").show(),$("#sort").hide())});var a=$(this).index();0==a?($(".dic").stop(),$(".price-total").hide(),$(".house-type").hide(),$(".more").hide(),$(".dic").slideToggle("fast")):1==a?($(".bac").stop(),$(".dic").hide(),$(".house-type").hide(),$(".more").hide(),$(".price-total").slideToggle("fast")):2==a?($(".bac").stop(),$(".dic").hide(),$(".price-total").hide(),$(".more").hide(),$(".house-type").slideToggle("fast")):3==a&&($(".bac").stop(),$(".dic").hide(),$(".price-total").hide(),$(".house-type").slideUp(),$(".more").slideToggle("fast")),$(".sort-chose").hide(),$(".bac").css({"z-index":"10",top:"4.5rem"}),i.firstGivePage(e)}),$(".tabs > ul > li").click(function(){$(this).siblings().removeClass("active-color-dic"),$(this).addClass("active-color-dic");var e=$(this).index();0==e?($(".metro-content").hide(),$(".dic-content").slideDown()):1==e&&($(".dic-content").hide(),$(".metro-content").slideDown())}),$(".more-spec > ul >li").click(function(){$(this).toggleClass("active-house")}),$(".area > ul >li").click(function(){$(this).toggleClass("active-house")}),$(".decoration > ul >li").click(function(){$(this).toggleClass("active-house")}),$(".house-list > ul > li").click(function(){var e=$(this).index();if(0==e)$(this).siblings().removeClass("active-house"),$(this).addClass("active-house");else{$(this).toggleClass("active-house");var i=$(".house-list > ul > li"),t=[];i.each(function(e,i){1==i.classList.length?0==e&&$(".house-list > ul > li:eq(0)").removeClass("active-house"):t.push(e)}),t.length>5&&$(".house-list > ul > li:eq(0)").addClass("active-house")}}),$("#sort").click(function(){$(".bac").css({"z-index":"13",top:"0"}),$(".bac").show(),$(".sort-chose").slideToggle()}),$(".bac").click(function(){$(".dic").slideUp(),$(".price-total").slideUp(),$(".house-type").slideUp(),$(".more").slideUp(),$(".rent-list > ul > li").children("span").removeClass("direction"),$(".rent-list > ul > li").removeClass("active-color-top"),$(".bac").css({"z-index":"10",top:"4.5rem"}),$(".bac").hide(),$(".slide-right").animate({right:"-50%"}),$(".slide-right").hide(),i.GetRequest().channel?$("#sort").hide():$("#sort").show(),$(".sort-chose").hide()}),$("#cancelMore").click(function(){$(".more-spec > ul >li").removeClass("active-house"),$(".area > ul >li").removeClass("active-house"),$(".decoration > ul >li").removeClass("active-house")})}},{key:"firstGivePage",value:function(e){var i=this;if(e.la){var t=($(".house-list>ul>li"),[0,1,2,3,4,5]);e.la.length>1?(e.la.forEach(function(e){$(".house-list>ul>li:eq("+e+")").addClass("active-house"),t.forEach(function(i,s){e==i&&t.splice(s,1)})}),t.forEach(function(e){$(".house-list>ul>li:eq("+e+")").removeClass("active-house")}),$("#type >p").html("多选"),$("#type").find("i").addClass("bacchosed"),$("#type").addClass("chosed")):(0==e.la?($("#type >p").html("户型"),$("#type").find("i").removeClass("bacchosed"),$("#type").removeClass("chosed")):($("#type >p").html($(".house-list>ul>li:eq("+e.la+")").html()),$("#type").find("i").addClass("bacchosed"),$("#type").addClass("chosed")),$(".house-list>ul>li:eq("+e.la+")").addClass("active-house"),$(".house-list>ul>li:eq("+e.la+")").siblings().removeClass("active-house"))}else $(".house-list>ul>li:eq(0)").addClass("active-house"),$(".house-list>ul>li:eq(0)").siblings().removeClass("active-house");if(e.pr){var s=$(".price-list>ul>li"),a=i.objectToString({pr:e.pr});s.each(function(e,i){a==$(".price-list>ul>li:eq("+e+")").attr("data-pr")&&($(".price-list>ul>li:eq("+e+")").addClass("chosed"),$("#price>p").html($(".price-list>ul>li:eq("+e+")").html().replace(" - ","-")),$("#price").find("i").addClass("bacchosed"),$("#price").addClass("chosed"))})}else if(e.cp){var o=e.cp.split("to");0!=o[0]&&0!=o[1]?($("#lowPr").val(o[0]),$("#topPr").val(o[1]),$("#price>p").html(o[0]+"-"+o[1])):0==o[0]&&0!=o[1]?($("#topPr").val(o[1]),$("#price>p").html(o[1]+"以下")):0!=o[0]&&0==o[1]&&($("#lowPr").val(o[0]),$("#price>p").html(o[0]+"以上")),$("#price").find("i").addClass("bacchosed"),$("#price").addClass("chosed")}else $(".price-list>ul>li:eq(0)").addClass("chosed");var l="ta-0-ta-0-ta-0-ta-0";if(e.ta&&(l=i.objectToString({ta:e.ta})),"ta-0-ta-0-ta-0-ta-0"!=l||e.ar||e.dt?($("#more").find("i").addClass("bacchosed"),$("#more").addClass("chosed")):($("#more").find("i").removeClass("bacchosed"),$("#more").removeClass("chosed")),e.ta?e.ta.forEach(function(e,i){1==e?$(".more-spec > ul >li:eq("+i+")").addClass("active-house"):$(".more-spec > ul >li:eq("+i+")").removeClass("active-house")}):$(".more-spec > ul >li").removeClass("active-house"),e.ar){var c=[0,1,2,3,4,5,6];e.ar.length>1?e.ar.forEach(function(e,i){$(".area>ul>li:eq("+e+")").addClass("active-house"),c.forEach(function(i,t){e==i&&c.splice(t,1)})}):($(".area>ul>li:eq("+e.ar+")").addClass("active-house"),c.forEach(function(i,t){e.ar==i&&c.splice(t,1)})),c.forEach(function(e){$(".area>ul>li:eq("+e+")").removeClass("active-house")})}else $(".area>ul>li").removeClass("active-house");if(e.dt){var n=[1,2,3,4,5];e.dt.length>1?e.dt.forEach(function(e,i){$(".decoration> ul >li:eq("+(e-1)+")").addClass("active-house"),n.forEach(function(i,t){e==i&&n.splice(t,1)})}):($(".decoration> ul >li:eq("+(e.dt-1)+")").addClass("active-house"),n.forEach(function(i,t){e.dt==i&&n.splice(t,1)})),n.forEach(function(e){$(".decoration> ul >li:eq("+(e-1)+")").removeClass("active-house")})}else $(".decoration> ul >li").removeClass("active-house")}},{key:"parseCondition",value:function(e){var i=e.condition,t=e.separator,s=void 0===t?"-":t,a={};if(!i)return a;var o=i.split(s);return 1===o.length?o[0]:(o.forEach(function(e,i){var t=o.length<i+2?"":o[i+1];i%2==0&&(a.hasOwnProperty(e)?(a[e].constructor!=Array&&(a[e]=[a[e]]),a[e].push(t)):a[e]=t)}),a)}},{key:"objectToString",value:function(e){var i=[],t=[];for(var s in e)i.push(s),t.push(e[s]);var a="";return i.forEach(function(e,i){0==i?t[i].constructor==Array?t[i].forEach(function(i,t){a=0==t?e+"-"+i:a+"-"+e+"-"+i}):a=e+"-"+t[i]:t[i].constructor==Array?t[i].forEach(function(i,t){a=a+"-"+e+"-"+i}):a=a+"-"+e+"-"+t[i]}),a}},{key:"creatRent",value:function(e){var i=[];e.houseTag.isSubwayHouse&&i.push("近地铁"),e.houseTag.isPriceDown&&i.push("降价"),e.houseTag.isNewHouse&&i.push("新上"),1==e.houseTag.isHardcover&&i.push("精装"),2==e.houseTag.isHardcover&&i.push("豪装"),e.houseTag.isSouth&&i.push("朝南");var t="";i&&i.forEach(function(e,i){0==i?t='<span class="tag">'+e+"</span>":t+='<span class="tag">'+e+"</span>"});var s='<a  class="rent-item box" href=" '+e.url+'">\n            <div class="left">\n                <img src="'+e.firstImageUrl+'?x-oss-process=image/resize,w_120" alt="'+e.estateName+' " class="lazy">\n            </div>\n            <div class="right">\n                <h4> '+e.houseTitle+'</h4>\n                <p class="base-info">                    \n                   '+e.houseTypeStr+" "+e.spaceArea+"㎡ | "+e.districtAndTownName+'\n                </p>\n                <p class="tags">'+t+'</p>\n                <p class="unit-price"> '+e.rentPriceStr+" 元/月</p>\n            </div>\n        </a>";return s}},{key:"pullload",value:function(e){var i=this;$(".rent-items").pullload({apiUrl:this.apiUrl.rent.list.rentHouseList,requestType:"post",queryStringObject:e,traditional:!0,pageSize:10,threshold:50,callback:function(e){e.data&&$.each(e.data,function(e,t){t.url="/shanghai/rent/"+t.encryptHouseId+".html",$(".rent-items").append(i.creatRent(t))})}})}},{key:"pullData",value:function(e,i){var t={};if(e){var s=this.parseCondition({condition:e}),a=["0-50","50-70","70-90","90-110","110-130","130-150","150-0"];if(t={cityId:i,bedRoomSumLists:[],renovations:[],spaceAreas:[]},s.di&&(t.districtId=s.di),s.to&&(t.townId=s.to),s.li&&(t.subwayLine=s.li),s.st&&(t.subwayStation=s.st),s.la&&(s.la.constructor==Array?t.bedRoomSumLists=s.la:0==s.la?t.bedRoomSumLists=[]:t.bedRoomSumLists.push(s.la)),s.pr&&(s.pr.constructor==Array?(t.rentPriceStart=s.pr[0],t.rentPriceEnd=s.pr[1]):t.rentPriceStart=s.pr),s.cp){var o=s.cp.split("to");t.rentPriceStart=o[0],t.rentPriceEnd=o[1]}s.ta&&(t.isSubWay=s.ta[0],t.priceDown=s.ta[1],t.isNewOnStore=s.ta[2],t.orientation=s.ta[3]),s.ar&&(s.ar.constructor==Array?s.ar.forEach(function(e){t.spaceAreas.push(a[e])}):t.spaceAreas.push(a[s.ar])),s.dt&&(s.dt.constructor==Array?t.renovations=s.dt:t.renovations.push(s.dt)),s.so&&(t.orderType=s.so)}else t={cityId:i};this.GetRequest().districtId&&(t.districtId=this.GetRequest().districtId),this.GetRequest().townId&&(t.townId=this.GetRequest().townId),this.GetRequest().subwayLine&&(t.subwayLine=this.GetRequest().subwayLine),this.GetRequest().subwayStation&&(t.subwayStation=this.GetRequest().subwayStation),this.GetRequest().subEstateId&&(t.subEstateId=this.GetRequest().subEstateId),this.pullload(t)}},{key:"GetRequest",value:function(){var e=location.search,i={};if(e.indexOf("?")!==-1)for(var t=e.substr(1),s=t.split("&"),a=0;a<s.length;a++)i[s[a].split("=")[0]]=s[a].split("=")[1];return i}}]),i}(Controller);$(document).ready(function(){new ListController});
//# sourceMappingURL=list.min.js.map
