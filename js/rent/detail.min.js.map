{"version":3,"sources":["rent/detail.min.js"],"names":["DetailController","$","lazyload","staticDomain","addListenerToDownloadApp","WakeupApp","element","androidSchemes","val","isoSchemes","androidDownloadLink","iosDownloadLink","addListenerToAssistant","self","require","album","BigData","PreviewImage","init","bigData","pageName","pageParam","rent_house_id","channel","GetRequest","type","click","css","$externalSellPoint","length","lineNum","parseInt","after","remove","url","location","search","theRequest","indexOf","str","substr","strs","split","i","Controller","document","ready"],"mappings":";;;;;;;;;;AAAA;;;;;IAKMA,gB;;;AACF,gCAAc;AAAA;;AAEV;;;AAFU;;AAKVC,UAAE,OAAF,EAAWC,QAAX,CAAoB;AAChB,2BAAgB,MAAKC,YAAL,GAAoB;AADpB,SAApB;AAGA;;;AAGA,cAAKC,wBAAL;AACA;;;;AAIA,YAAIC,SAAJ,CAAc;AACVC,qBAAU,yBADA;AAEVC,4BAAiB,qDAAqDN,EAAE,UAAF,EAAcO,GAAd,EAF5D;AAGVC,wBAAa,qDAAqDR,EAAE,UAAF,EAAcO,GAAd,EAHxD;AAIVE,iCAAsB,qDAJZ;AAKVC,6BAAkB;AALR,SAAd;AAOA;;;AAGA,cAAKC,sBAAL;AACA;;;AAGA,YAAIC,YAAJ;AACAC,gBAAQ,CAAE,yBAAF,EAA4B,2BAA5B,EAAyD,iCAAzD,CAAR,EAAoG,UAASC,KAAT,EAAgBC,OAAhB,EAAyBC,YAAzB,EAAsC;AACtID,oBAAQE,IAAR,CAAaL,IAAb;;AAEAG,oBAAQG,OAAR,CAAgB;AACZC,0BAAU,MADE;AAEZC,2BAAW;AACPC,mCAAerB,EAAE,UAAF,EAAcO,GAAd;AADR,iBAFC;AAKZe,yBAAQV,KAAKW,UAAL,GAAkB,SAAlB,KAAgC,EAL5B;AAMZC,sBAAM;AANM,aAAhB;;AASA;AACAR,yBAAa,gBAAb;AACH,SAdD;AAeA;;;AAGAhB,UAAE,4BAAF,EAAgCyB,KAAhC,CAAsC,YAAU;AAC5CzB,cAAE,kBAAF,EAAsB0B,GAAtB,CAA0B,EAAE,kBAAmB,CAArB,EAA1B;AACH,SAFD;;AAIA;AACA,YAAIC,qBAAqB3B,EAAE,qBAAF,CAAzB;AACA,YAAG2B,mBAAmBC,MAAnB,GAA0B,CAA7B,EAA+B;AAC3B,gBAAIC,UAAUC,SAASH,mBAAmBD,GAAnB,CAAuB,QAAvB,CAAT,IAA6CI,SAASH,mBAAmBD,GAAnB,CAAuB,aAAvB,CAAT,CAA3D;AACA,gBAAGG,UAAU,CAAb,EAAe;AAAC;AACZF,mCAAmBD,GAAnB,CAAuB,YAAvB,EAAoCI,SAASH,mBAAmBD,GAAnB,CAAuB,aAAvB,CAAT,IAAgD,CAAhD,GAAoD,IAAxF;AACAC,mCAAmBI,KAAnB,CAAyB/B,EAAE,8BAAF,EAAkCyB,KAAlC,CAAwC,YAAU;AACvEE,uCAAmBD,GAAnB,CAAuB,YAAvB,EAAoC,MAApC;AACA1B,sBAAE,IAAF,EAAQgC,MAAR;AACH,iBAHwB,CAAzB;AAIH;AACJ;;AAhES;AAkEb;;;;;AACD;;;qCAGa;AACT,gBAAIC,MAAMC,SAASC,MAAnB;AACA,gBAAIC,aAAa,EAAjB;AACA,gBAAIH,IAAII,OAAJ,CAAY,GAAZ,MAAqB,CAAC,CAA1B,EAA6B;AACzB,oBAAIC,MAAML,IAAIM,MAAJ,CAAW,CAAX,CAAV;AACA,oBAAIC,OAAOF,IAAIG,KAAJ,CAAU,GAAV,CAAX;AACA,qBAAI,IAAIC,IAAI,CAAZ,EAAeA,IAAIF,KAAKZ,MAAxB,EAAgCc,GAAhC,EAAsC;AAClCN,+BAAWI,KAAKE,CAAL,EAAQD,KAAR,CAAc,GAAd,EAAmB,CAAnB,CAAX,IAAkCD,KAAKE,CAAL,EAAQD,KAAR,CAAc,GAAd,EAAmB,CAAnB,CAAlC;AACH;AACJ;AACD;AACA,mBAAOL,UAAP;AACH;;;;EAnF0BO,U;;AAsF/B;;;;;AAGA3C,EAAE4C,QAAF,EAAYC,KAAZ,CAAkB,YAAW;AAC1B,QAAI9C,gBAAJ;AACF,CAFD","file":"detail.min.js","sourcesContent":["/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n 1. 项目名称：悟空找房h5\n 2. 页面名称：rent/detail(租房-详情)\n 3. 作者：tangxuyang@lifang.com\n -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\nclass DetailController extends Controller {\n    constructor() {\n        super() ;        \n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        图片懒加载实例化\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/        \n        $(\".lazy\").lazyload({ \n            \"placeholder\" : this.staticDomain + \"/wkh5_fe/images/common/loading.jpg\"\n        }) ;  \n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        downloadApp条事件绑定\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        this.addListenerToDownloadApp() ;\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        打开app按钮点击处理\n        schemes参数规则请参照：http://confluence.wkzf/pages/viewpage.action?pageId=80329073\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        new WakeupApp({\n            element : \".download-app .download\" ,\n            androidSchemes : \"wkzf://external_call/parameter?t=0&bt=1&houseId=\" + $(\"#houseId\").val() ,\n            isoSchemes : \"wkzf://external_call/parameter?t=0&bt=1&houseId=\" + $(\"#houseId\").val() ,\n            androidDownloadLink : \"https://m.wkzf.com/download/transit?from=rentDetail\" ,\n            iosDownloadLink : \"https://m.wkzf.com/download/transit?from=rentDetail\"\n        }) ;\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        底部经纪人助手条处理\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        this.addListenerToAssistant() ;     \n        /*\n            使用requirejs引入组件\n        */        \n        let self = this;\n        require([ '../components/album.min','../components/bigdata.min', '../components/preview-image.min'],function(album, BigData, PreviewImage){        \n            BigData.init(self);\n\n            BigData.bigData({\n                pageName: '1204',\n                pageParam: {\n                    rent_house_id: $('#houseId').val()\n                },\n                channel:self.GetRequest()['channel'] || \"\",\n                type: 1\n            });\n\n            //评论中图片添加预览功能\n            PreviewImage('.rent-comments');\n        }); \n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        下载条的关闭按钮事件赋予\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        $(\".download-app .icon-remove\").click(function(){\n            $(\".content-wrapper\").css({ \"padding-bottom\" : 0 }) ;\n        }) ;\n\n        //外来房源基本信息\n        var $externalSellPoint = $('.external-sellpoint');\n        if($externalSellPoint.length>0){\n            let lineNum = parseInt($externalSellPoint.css('height')) / parseInt($externalSellPoint.css('line-height'));\n            if(lineNum > 5){//超过五行了\n                $externalSellPoint.css('max-height',parseInt($externalSellPoint.css('line-height'))*5 + 'px');\n                $externalSellPoint.after($('<div class=\"more\">查看更多</div>').click(function(){\n                    $externalSellPoint.css('max-height','100%');\n                    $(this).remove();\n                }));\n            }\n        }\n\n    };\n    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n   截取？后面的参数\n   -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n    GetRequest() {\n        let url = location.search;\n        let theRequest = {};\n        if (url.indexOf(\"?\") !== -1) {\n            let str = url.substr(1);\n            let strs = str.split(\"&\");\n            for(var i = 0; i < strs.length; i ++) {\n                theRequest[strs[i].split(\"=\")[0]]=strs[i].split(\"=\")[1];\n            }\n        }\n        // console.log(theRequest);\n        return theRequest;\n    }\n}\n\n/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n类的初始化\n-----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n$(document).ready(function() {\n   new DetailController;\n});\n"]}