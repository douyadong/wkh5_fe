{"version":3,"sources":["rent/detail.min.js"],"names":["_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","_createClass","defineProperties","target","props","i","length","descriptor","defineProperty","key","protoProps","staticProps","DetailController","_Controller","this","_this","getPrototypeOf","$","lazyload","placeholder","staticDomain","addListenerToDownloadApp","click","nativeSchema","loadSchema","schema","protocal","loadWaiting","failUrl","apkInfo","PKG","CATEGORY","ACTION","addListenerToAssistant","require","album","BigData","PreviewImage","init","bigData","pageName","pageParam","rent_house_id","val","channel","GetRequest","type","css","padding-bottom","$externalSellPoint","lineNum","parseInt","after","remove","url","location","search","theRequest","indexOf","str","substr","strs","split","Controller","document","ready"],"mappings":"AAAA,YAIA,SAASA,iBAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASC,4BAA2BC,EAAMC,GAAQ,IAAKD,EAAQ,KAAM,IAAIE,gBAAe,4DAAgE,QAAOD,GAAyB,gBAATA,IAAqC,kBAATA,GAA8BD,EAAPC,EAElO,QAASE,WAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIP,WAAU,iEAAoEO,GAAeD,GAASE,UAAYC,OAAOC,OAAOH,GAAcA,EAAWC,WAAaG,aAAeC,MAAON,EAAUO,YAAY,EAAOC,UAAU,EAAMC,cAAc,KAAeR,IAAYE,OAAOO,eAAiBP,OAAOO,eAAeV,EAAUC,GAAcD,EAASW,UAAYV,GANje,GAAIW,cAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAIC,GAAI,EAAGA,EAAID,EAAME,OAAQD,IAAK,CAAE,GAAIE,GAAaH,EAAMC,EAAIE,GAAWX,WAAaW,EAAWX,aAAc,EAAOW,EAAWT,cAAe,EAAU,SAAWS,KAAYA,EAAWV,UAAW,GAAML,OAAOgB,eAAeL,EAAQI,EAAWE,IAAKF,IAAiB,MAAO,UAAUzB,EAAa4B,EAAYC,GAAiJ,MAA9HD,IAAYR,EAAiBpB,EAAYS,UAAWmB,GAAiBC,GAAaT,EAAiBpB,EAAa6B,GAAqB7B,MAG1hB8B,iBAUiB,SAAUC,GAT7B,QAAAD,KAAchC,gBAAAkC,KAAAF,EAAA,IAAAG,GAAA/B,2BAAA8B,MAAAF,EAAAZ,WAAAR,OAAAwB,eAAAJ,IAAA1B,KAAA4B,MAKVG,GAAE,SAASC,UACPC,YAAgBJ,EAAKK,aAAe,uCAKxCL,EAAKM,2BAKLJ,EAAE,2BAA2BK,MAAM,WAC/BC,aAAaC,YAETC,OAAS,gBACTC,SAAW,OACXC,YAAc,OACdC,QAAQ,sDAERC,SACIC,IAAM,gBACNC,SAAW,kCACXC,OAAS,kCAgBrBjB,EAAKkB,wBAIL,IAAIhD,GAAAA,CACJiD,UAAU,0BAA0B,4BAA6B,mCAAmC,SAASC,EAAOC,EAASC,GACzHD,EAAQE,KAAKrD,GAEbmD,EAAQG,SACJC,SAAU,OACVC,WACIC,cAAezB,EAAE,YAAY0B,OAEjCC,QAAQ3D,EAAK4D,aAAL,SAAgC,GACxCC,KAAM,IAIVT,EAAa,oBAKjBpB,EAAE,8BAA8BK,MAAM,WAClCL,EAAE,oBAAoB8B,KAAMC,iBAAmB,KAInD,IAAIC,GAAqBhC,EAAE,sBAC3B,IAAGgC,EAAmB3C,OAAO,EAAE,CAC3B,GAAI4C,GAAUC,SAASF,EAAmBF,IAAI,WAAaI,SAASF,EAAmBF,IAAI,eACxFG,GAAU,IACTD,EAAmBF,IAAI,aAA6D,EAAhDI,SAASF,EAAmBF,IAAI,gBAAoB,MACxFE,EAAmBG,MAAMnC,EAAE,gCAAgCK,MAAM,WAC7D2B,EAAmBF,IAAI,aAAa,QACpC9B,EAAEH,MAAMuC,aA9EV,MAAAtC,GA2Hd,MAjHA3B,WAAUwB,EAAkBC,GA4F5BZ,aAAaW,IACTH,IAAK,aAKLd,MAAO,WApBP,GAAI2D,GAAMC,SAASC,OACfC,IACJ,IAAIH,EAAII,QAAQ,UAGZ,IAAI,GAFAC,GAAML,EAAIM,OAAO,GACjBC,EAAOF,EAAIG,MAAM,KACbzD,EAAI,EAAGA,EAAIwD,EAAKvD,OAAQD,IAC5BoD,EAAWI,EAAKxD,GAAGyD,MAAM,KAAK,IAAID,EAAKxD,GAAGyD,MAAM,KAAK,EAI7D,OAAOL,OAyBJ7C,GA5HoBmD,WA0G/B9C,GAAE+C,UAAUC,MAAM,WACf,GAAIrD","file":"detail.min.js","sourcesContent":["/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n 1. 项目名称：悟空找房h5\n 2. 页面名称：rent/detail(租房-详情)\n 3. 作者：tangxuyang@lifang.com\n -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\nclass DetailController extends Controller {\n    constructor() {\n        super() ;        \n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        图片懒加载实例化\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/        \n        $(\".lazy\").lazyload({ \n            \"placeholder\" : this.staticDomain + \"/wkh5_fe/images/common/loading.jpg\"\n        }) ;  \n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        downloadApp条事件绑定\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        this.addListenerToDownloadApp() ;\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        打开app按钮点击处理\n        schemes参数规则请参照：http://confluence.wkzf/pages/viewpage.action?pageId=80329073\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        $(\".download-app .download\").click(()=> {\n            nativeSchema.loadSchema({               \n                //schema : \"external_call/parameter?t=0&bt=1&houseId=\" + $(\"#houseId\").val()  ,  // 通过NN打开某个链接\n                schema : \"external_call\" ,  // 通过NN打开某个链接\n                protocal : \"wkzf\" , //schema头协议，实际情况填写\n                loadWaiting : \"1500\" , //发起唤醒请求后，会等待loadWaiting时间，超时则跳转到failUrl，默认3000ms                \n                failUrl:\"https://m.wkzf.com/download/transit?from=rentDetail\" ,  //唤起失败时的跳转链接，默认跳转到下载页\n                // apk信息,请根据实际情况填写\n                apkInfo : {\n                    PKG : \"com.wukong.ua\" ,\n                    CATEGORY : \"android.intent.category.DEFAULT\" ,\n                    ACTION : \"android.intent.action.VIEW\"\n                }\n            }) ;\n        }) ;\n        /*\n        new WakeupApp({\n            element : \".download-app .download\" ,\n            androidSchemes : \"wkzf://external_call/parameter?t=0&bt=1&houseId=\" + $(\"#houseId\").val() ,\n            isoSchemes : \"wkzf://external_call/parameter?t=0&bt=1&houseId=\" + $(\"#houseId\").val() ,\n            androidDownloadLink : \"https://m.wkzf.com/download/transit?from=rentDetail\" ,\n            iosDownloadLink : \"https://m.wkzf.com/download/transit?from=rentDetail\"\n        }) ;\n        *\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        底部经纪人助手条处理\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        this.addListenerToAssistant() ;     \n        /*\n            使用requirejs引入组件\n        */        \n        let self = this;\n        require([ '../components/album.min','../components/bigdata.min', '../components/preview-image.min'],function(album, BigData, PreviewImage){        \n            BigData.init(self);\n\n            BigData.bigData({\n                pageName: '1204',\n                pageParam: {\n                    rent_house_id: $('#houseId').val()\n                },\n                channel:self.GetRequest()['channel'] || \"\",\n                type: 1\n            });\n\n            //评论中图片添加预览功能\n            PreviewImage('.rent-comments');\n        }); \n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        下载条的关闭按钮事件赋予\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        $(\".download-app .icon-remove\").click(function(){\n            $(\".content-wrapper\").css({ \"padding-bottom\" : 0 }) ;\n        }) ;\n\n        //外来房源基本信息\n        var $externalSellPoint = $('.external-sellpoint');\n        if($externalSellPoint.length>0){\n            let lineNum = parseInt($externalSellPoint.css('height')) / parseInt($externalSellPoint.css('line-height'));\n            if(lineNum > 5){//超过五行了\n                $externalSellPoint.css('max-height',parseInt($externalSellPoint.css('line-height'))*5 + 'px');\n                $externalSellPoint.after($('<div class=\"more\">查看更多</div>').click(function(){\n                    $externalSellPoint.css('max-height','100%');\n                    $(this).remove();\n                }));\n            }\n        }\n\n    };\n    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n   截取？后面的参数\n   -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n    GetRequest() {\n        let url = location.search;\n        let theRequest = {};\n        if (url.indexOf(\"?\") !== -1) {\n            let str = url.substr(1);\n            let strs = str.split(\"&\");\n            for(var i = 0; i < strs.length; i ++) {\n                theRequest[strs[i].split(\"=\")[0]]=strs[i].split(\"=\")[1];\n            }\n        }\n        // console.log(theRequest);\n        return theRequest;\n    }\n}\n\n/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n类的初始化\n-----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n$(document).ready(function() {\n   new DetailController;\n});\n"]}