{"version":3,"sources":["rent/detail.min.js"],"names":["DetailController","$","lazyload","staticDomain","hide","click","nameL","html","show","addListenerToDownloadApp","nativeSchema","loadSchema","schema","protocal","loadWaiting","failUrl","apkInfo","PKG","CATEGORY","ACTION","addListenerToAssistant","self","require","album","BigData","PreviewImage","init","bigData","pageName","pageParam","rent_house_id","val","channel","GetRequest","type","css","$externalSellPoint","length","lineNum","parseInt","after","remove","url","location","search","theRequest","indexOf","str","substr","strs","split","i","Controller","document","ready"],"mappings":"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","file":"detail.min.js","sourcesContent":["/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n 1. 项目名称：悟空找房h5\r\n 2. 页面名称：rent/detail(租房-详情)\r\n 3. 作者：tangxuyang@lifang.com\r\n -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\nclass DetailController extends Controller {\r\n    constructor() {\r\n        super() ;        \r\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n        图片懒加载实例化\r\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/        \r\n        $(\".lazy\").lazyload({ \r\n            \"placeholder\" : this.staticDomain + \"/wkh5_fe/images/common/loading.jpg\"\r\n        }) ;  \r\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n        距离地铁的站点初步处理\r\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n        $('.subway > ul >li:gt(0)').hide();\r\n        $('.more-line').click(function () {\r\n            let nameL = $(this).html();\r\n           if(nameL == \"更多\"){\r\n               $('.subway > ul >li:gt(0)').show();\r\n               $(this).html(\"收起\");\r\n           }else {\r\n               $('.subway > ul >li:gt(0)').hide();\r\n               $(this).html(\"更多\");\r\n           }\r\n        });\r\n\r\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n        downloadApp条事件绑定\r\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n        this.addListenerToDownloadApp() ;\r\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n        打开app按钮点击处理\r\n        schemes参数规则请参照：http://confluence.wkzf/pages/viewpage.action?pageId=80329073\r\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n        $(\".download-app .download\").click(()=> {\r\n            nativeSchema.loadSchema({               \r\n                //schema : \"external_call/parameter?t=0&bt=1&houseId=\" + $(\"#houseId\").val()  ,  // 通过NN打开某个链接\r\n                schema : \"external_call\" ,  // 通过NN打开某个链接\r\n                protocal : \"wkzf\" , //schema头协议，实际情况填写\r\n                loadWaiting : \"1500\" , //发起唤醒请求后，会等待loadWaiting时间，超时则跳转到failUrl，默认3000ms                \r\n                failUrl:\"https://m.wkzf.com/download/transit?from=rentDetail\" ,  //唤起失败时的跳转链接，默认跳转到下载页\r\n                // apk信息,请根据实际情况填写\r\n                apkInfo : {\r\n                    PKG : \"com.wukong.ua\" ,\r\n                    CATEGORY : \"android.intent.category.DEFAULT\" ,\r\n                    ACTION : \"android.intent.action.VIEW\"\r\n                }\r\n            }) ;\r\n        }) ;\r\n        /*\r\n        new WakeupApp({\r\n            element : \".download-app .download\" ,\r\n            androidSchemes : \"wkzf://external_call/parameter?t=0&bt=1&houseId=\" + $(\"#houseId\").val() ,\r\n            isoSchemes : \"wkzf://external_call/parameter?t=0&bt=1&houseId=\" + $(\"#houseId\").val() ,\r\n            androidDownloadLink : \"https://m.wkzf.com/download/transit?from=rentDetail\" ,\r\n            iosDownloadLink : \"https://m.wkzf.com/download/transit?from=rentDetail\"\r\n        }) ;\r\n        *\r\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n        底部经纪人助手条处理\r\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n        this.addListenerToAssistant() ;     \r\n        /*\r\n            使用requirejs引入组件\r\n        */        \r\n        let self = this;\r\n        require([ '../components/album.min','../components/bigdata.min', '../components/preview-image.min'],function(album, BigData, PreviewImage){        \r\n            BigData.init(self);\r\n\r\n            BigData.bigData({\r\n                pageName: '1204',\r\n                pageParam: {\r\n                    rent_house_id: $('#houseId').val()\r\n                },\r\n                channel:self.GetRequest()['channel'] || \"\",\r\n                type: 1\r\n            });\r\n\r\n            //评论中图片添加预览功能\r\n            PreviewImage('.rent-comments');\r\n        }); \r\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n        下载条的关闭按钮事件赋予\r\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n        $(\".download-app .icon-remove\").click(function(){\r\n            $(\".content-wrapper\").css({ \"padding-bottom\" : 0 }) ;\r\n        }) ;\r\n\r\n        //外来房源基本信息\r\n        var $externalSellPoint = $('.external-sellpoint');\r\n        if($externalSellPoint.length>0){\r\n            let lineNum = parseInt($externalSellPoint.css('height')) / parseInt($externalSellPoint.css('line-height'));\r\n            if(lineNum > 5){//超过五行了\r\n                $externalSellPoint.css('max-height',parseInt($externalSellPoint.css('line-height'))*5 + 'px');\r\n                $externalSellPoint.after($('<div class=\"more\">查看更多</div>').click(function(){\r\n                    $externalSellPoint.css('max-height','100%');\r\n                    $(this).remove();\r\n                }));\r\n            }\r\n        }\r\n\r\n    };\r\n    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n   截取？后面的参数\r\n   -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n    GetRequest() {\r\n        let url = location.search;\r\n        let theRequest = {};\r\n        if (url.indexOf(\"?\") !== -1) {\r\n            let str = url.substr(1);\r\n            let strs = str.split(\"&\");\r\n            for(var i = 0; i < strs.length; i ++) {\r\n                theRequest[strs[i].split(\"=\")[0]]=strs[i].split(\"=\")[1];\r\n            }\r\n        }\r\n        // console.log(theRequest);\r\n        return theRequest;\r\n    }\r\n}\r\n\r\n/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n类的初始化\r\n-----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n$(document).ready(function() {\r\n   new DetailController;\r\n});\r\n"]}