"use strict";function _classCallCheck(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,a){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?e:a}function _inherits(e,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);e.prototype=Object.create(a&&a.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(e,a):e.__proto__=a)}var _createClass=function(){function e(e,a){for(var t=0;t<a.length;t++){var n=a[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(a,t,n){return t&&e(a.prototype,t),n&&e(a,n),a}}(),IndexController=function(e){function a(){_classCallCheck(this,a);var e=_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this));return $(".wk-tabs .tabs-handle li").first().addClass("on"),require(["../components/bigdata.min","../components/tabs.min"],function(a){a.init(e),a.bigData({pageName:"1222",pageParam:{store_id:$("#storeId").val()},type:1}),$(".wk-tabs").tabs({fixedWhenScroll:!1,effect:"fadeIn",duration:200,onSwap:function(e){$(".tabs-frame .list-container").attr("data-requestable","false"),$(".tabs-frame").eq(e).find(".list-container").attr("data-requestable","true")}})}),e.addEventListener(),e.pullload(),e}return _inherits(a,e),_createClass(a,[{key:"addEventListener",value:function(){var e=this;$(window).on("scroll",function(){var e=$("header"),a=$("header .banner .store-name");$(window).scrollTop()>=20?(e.hasClass("fixed")||e.addClass("fixed"),$(".tabs-frame").addClass("header-margin"),a.hide()):$(window).scrollTop()<20&&(e.hasClass("fixed")&&e.removeClass("fixed"),$(".tabs-frame").removeClass("header-margin"),a.show())}),$(".tabs-frame.agent-items .wechat").click(function(){$.modal({id:"addWechatModal",title:"扫码加微信",content:'<img src="'+$(e).data("agentwchartqrimgurl")+'" style="width : 12rem ; height : 12rem ; "><p>微信号：'+$(e).data("agentwchatid")+"</p>",buttons:[{text:"确定",clickCallback:function(){$.modal.close("addWechatModal")}}]})})}},{key:"createEsf",value:function(e){var a=$(document.createElement("A")).attr("href",e.url).attr("data-bigdata",e.bigDataParams).addClass("esf-item"),t=$(document.createElement("DL"));t.append('<dt><img src="'+e.houseImgUrl+'?x-oss-process=image/resize,w_150" alt="'+e.estateName+'" class="lazy"></dt>'),t.append('<dd class="title">'+e.houseTitle+"</dd>"),t.append('<dd><span class="layout">'+e.houseChild+" "+e.areaStr+'</span><span class="money">'+e.totalPrice+" 万</span></dd>"),t.append('<dd><span class="location">'+e.district+" "+e.town+'</span><span class="price">'+e.unitPrice+" 元/㎡</span></dd>");var n=$(document.createElement("DD"));return e.isTopHouse>1?n.append('<span class="selected">精选</span>'):1===e.isStorePush?n.append("<span>店长推荐</span>"):e.commAgent>0&&n.append("<span>急售</span>"),e.fullYears>=5&&1==e.onlyOne&&n.append("<span>满五唯一</span>"),e.fullYears>=2&&n.append("<span>满二</span>"),1===e.isSubwayHouse&&n.append("<span>地铁</span>"),1===e.isSchoolHouse&&n.append("<span>近学校</span>"),1===e.isNewOnStore&&n.append("<span>新上</span>"),9===e.orientation&&n.append("<span>南北通透</span>"),t.append(n),a.append(t),a}},{key:"createAgent",value:function(e){var a=$(document.createElement("DL")).addClass("agent"),t=$(document.createElement("DD")).addClass("tel").append('<span><i class="iconfont icon-tel"></i></span><span class="memo">电话咨询</span>'),n=$(document.createElement("DD")).addClass("wechat").append('<span><i class="iconfont icon-wechat"></i></span><span class="memo">添加微信</span>'),s=$(document.createElement("DT")).append('<a href="#"><img src="'+e.agentHeadImgUrl+'?x-oss-process=image/resize,w_120" class="lazy"><div class="summary"><p class="name">'+e.agentName+'</p><p class="seniority">加入悟空：'+e.serviceYears+"</p></div></a>");return a.append(t).append(n).append(s),a}},{key:"pullload",value:function(){var e=this;$(".tabs-frame.esf-items .list-container").pullload({apiUrl:this.apiUrl.store.house,queryStringObject:{storeId:$("#storeId").val()},callback:function(a){a.data&&$.each(a.data,function(a,t){$(".tabs-frame.esf-items .list-container").append(e.createEsf(t))})}}),$(".tabs-frame.agent-items .list-container").pullload({apiUrl:this.apiUrl.store.agent,queryStringObject:{storeId:$("#storeId").val()},callback:function(a){a.data&&$.each(a.data,function(a,t){$(".tabs-frame.agent-items .list-container").append(e.createAgent(t))})}})}}]),a}(Controller);$(document).ready(function(){new IndexController});
//# sourceMappingURL=index.min.js.map
