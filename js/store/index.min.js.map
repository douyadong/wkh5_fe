{"version":3,"sources":["store/index.min.js"],"names":["_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","_createClass","defineProperties","target","props","i","length","descriptor","defineProperty","key","protoProps","staticProps","IndexController","_Controller","this","_this","getPrototypeOf","$","first","addClass","require","BigData","init","bigData","pageName","pageParam","store_id","val","type","tabs","fixedWhenScroll","effect","duration","onSwap","index","attr","eq","find","addEventListener","pullload","window","on","$header","$storeName","scrollTop","hasClass","hide","removeClass","show","click","modal","id","title","content","data","buttons","text","clickCallback","close","esf","aNode","document","createElement","url","bigDataParams","dlNode","append","houseImgUrl","estateName","houseTitle","houseChild","areaStr","totalPrice","district","town","unitPrice","tagNode","isTopHouse","isStorePush","commAgent","fullYears","onlyOne","isSubwayHouse","isSchoolHouse","isNewOnStore","orientation","agent","telNode","wechatNode","dtNode","agentHeadImgUrl","agentName","serviceYears","apiUrl","store","house","queryStringObject","storeId","callback","each","createEsf","createAgent","Controller","ready"],"mappings":"AAAA,YAIA,SAASA,iBAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASC,4BAA2BC,EAAMC,GAAQ,IAAKD,EAAQ,KAAM,IAAIE,gBAAe,4DAAgE,QAAOD,GAAyB,gBAATA,IAAqC,kBAATA,GAA8BD,EAAPC,EAElO,QAASE,WAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIP,WAAU,iEAAoEO,GAAeD,GAASE,UAAYC,OAAOC,OAAOH,GAAcA,EAAWC,WAAaG,aAAeC,MAAON,EAAUO,YAAY,EAAOC,UAAU,EAAMC,cAAc,KAAeR,IAAYE,OAAOO,eAAiBP,OAAOO,eAAeV,EAAUC,GAAcD,EAASW,UAAYV,GANje,GAAIW,cAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAIC,GAAI,EAAGA,EAAID,EAAME,OAAQD,IAAK,CAAE,GAAIE,GAAaH,EAAMC,EAAIE,GAAWX,WAAaW,EAAWX,aAAc,EAAOW,EAAWT,cAAe,EAAU,SAAWS,KAAYA,EAAWV,UAAW,GAAML,OAAOgB,eAAeL,EAAQI,EAAWE,IAAKF,IAAiB,MAAO,UAAUzB,EAAa4B,EAAYC,GAAiJ,MAA9HD,IAAYR,EAAiBpB,EAAYS,UAAWmB,GAAiBC,GAAaT,EAAiBpB,EAAa6B,GAAqB7B,MAG1hB8B,gBAUgB,SAAUC,GAT5B,QAAAD,KAAahC,gBAAAkC,KAAAF,EAAA,IAAAG,GAAA/B,2BAAA8B,MAAAF,EAAAZ,WAAAR,OAAAwB,eAAAJ,IAAA1B,KAAA4B,MAAA,OAKTG,GAAE,4BAA4BC,QAAQC,SAAS,MAI/CC,SAAU,4BAA8B,0BAA4B,SAACC,GAIjEA,EAAQC,KAARP,GACAM,EAAQE,SACJC,SAAa,OACbC,WACIC,SAAaT,EAAE,YAAYU,OAE/BC,KAAS,IAKbX,EAAE,YAAYY,MACVC,iBAAoB,EACpBC,OAAW,SACXC,SAAa,IACbC,OAAW,SAACC,GACRjB,EAAE,+BAA+BkB,KAAM,mBAAqB,SAC5DlB,EAAE,eAAemB,GAAGF,GAAOG,KAAK,mBAAmBF,KAAM,mBAAqB,aAO1FpB,EAAKuB,mBAILvB,EAAKwB,WAzCIxB,EAyKb,MA/JA3B,WAAUwB,EAAiBC,GAsD3BZ,aAAaW,IACTH,IAAK,mBACLd,MAAO,WAhBPsB,EAAEuB,QAAQC,GAAG,SAAW,WACpB,GAAIC,GAAUzB,EAAE,UACZ0B,EAAa1B,EAAE,6BACfA,GAAEuB,QAAQI,aAAe,IACnBF,EAAQG,SAAS,UAAUH,EAAQvB,SAAS,SAClDF,EAAE,eAAeE,SAAS,iBAC1BwB,EAAWG,QAEN7B,EAAEuB,QAAQI,YAAc,KACzBF,EAAQG,SAAS,UAAWH,EAAQK,YAAY,SACpD9B,EAAE,eAAe8B,YAAY,iBAC7BJ,EAAWK,UAMnB/B,EAAE,mCAAmCgC,MAAM,WACvChC,EAAEiC,OACEC,GAAO,iBACPC,MAAU,QACVC,QAAY,aAAgBpC,EAAEH,MAAMwC,KAAK,uBAAyB,sDAA2DrC,EAAEH,MAAMwC,KAAK,gBAAkB,OAC5JC,UACMC,KAAS,KAAQC,cAAkB,WAAYxC,EAAEiC,MAAMQ,MAAM,4BAyB3EjD,IAAK,YAKLd,MAAO,SAtBDgE,GACN,GAAIC,GAAQ3C,EAAE4C,SAASC,cAAc,MAAM3B,KAAM,OAASwB,EAAII,KAAM5B,KAAM,eAAiBwB,EAAIK,eAAe7C,SAAS,YACnH8C,EAAShD,EAAE4C,SAASC,cAAc,MACtCG,GAAOC,OAAQ,iBAAoBP,EAAIQ,YAAc,2CAA+CR,EAAIS,WAAa,wBACrHH,EAAOC,OAAQ,qBAAyBP,EAAIU,WAAa,SACzDJ,EAAOC,OAAQ,4BAAgCP,EAAIW,WAAY,IAAMX,EAAIY,QAAU,8BAAkCZ,EAAIa,WAAa,kBACtIP,EAAOC,OAAQ,8BAAmCP,EAAIc,SAAW,IAAMd,EAAIe,KAAO,8BAAkCf,EAAIgB,UAAY,mBACpI,IAAIC,GAAU3D,EAAE4C,SAASC,cAAc,MAYvC,OAXGH,GAAIkB,WAAY,EAAGD,EAAQV,OAAQ,oCACV,IAApBP,EAAImB,YAAmBF,EAAQV,OAAQ,qBACvCP,EAAIoB,UAAY,GAAGH,EAAQV,OAAQ,mBACxCP,EAAIqB,WAAa,GAAoB,GAAfrB,EAAIsB,SAAeL,EAAQV,OAAQ,qBACzDP,EAAIqB,WAAa,GAAGJ,EAAQV,OAAQ,mBACd,IAAtBP,EAAIuB,eAAsBN,EAAQV,OAAQ,mBACpB,IAAtBP,EAAIwB,eAAqBP,EAAQV,OAAQ,oBACpB,IAArBP,EAAIyB,cAAoBR,EAAQV,OAAQ,mBACpB,IAApBP,EAAI0B,aAAmBT,EAAQV,OAAQ,qBAC1CD,EAAOC,OAAOU,GACdhB,EAAMM,OAAOD,GACNL,KAuBPnD,IAAK,cAKLd,MAAO,SAvBC2F,GACR,GAAIrB,GAAShD,EAAE4C,SAASC,cAAc,OAAO3C,SAAS,SAClDoE,EAAUtE,EAAE4C,SAASC,cAAc,OAAO3C,SAAS,OAAO+C,OAAO,gFACjEsB,EAAavE,EAAE4C,SAASC,cAAc,OAAO3C,SAAS,UAAU+C,OAAO,mFACvEuB,EAASxE,EAAE4C,SAASC,cAAc,OAAOI,OAAO,yBAA8BoB,EAAMI,gBAAkB,wFAAiGJ,EAAMK,UAAY,iCAAqCL,EAAMM,aAAe,iBAEvR,OADA3B,GAAOC,OAAOqB,GAASrB,OAAOsB,GAAYtB,OAAOuB,GAC1CxB,KA0BPxD,IAAK,WAKLd,MAAO,WAzBP,GAAIV,GAAO6B,IAEXG,GAAE,yCAAyCsB,UACvCsD,OAAS/E,KAAK+E,OAAOC,MAAMC,MAC3BC,mBAAsBC,QAAYhF,EAAE,YAAYU,OAChDuE,SAAW,SAAS5C,GACVA,EAAKA,MACXrC,EAAEkF,KAAK7C,EAAKA,KAAO,SAACpB,EAAQyB,GACxB1C,EAAE,yCAAyCiD,OAAOjF,EAAKmH,UAAUzC,SAK7E1C,EAAE,2CAA2CsB,UACzCsD,OAAS/E,KAAK+E,OAAOC,MAAMR,MAC3BU,mBAAsBC,QAAYhF,EAAE,YAAYU,OAChDuE,SAAW,SAAS5C,GACVA,EAAKA,MACXrC,EAAEkF,KAAK7C,EAAKA,KAAO,SAACpB,EAAQoD,GACxBrE,EAAE,2CAA2CiD,OAAOjF,EAAKoH,YAAYf,aAiC9E1E,GA1KmB0F,WAkJ9BrF,GAAE4C,UAAU0C,MAAM,WACd,GAAI3F","file":"index.min.js","sourcesContent":["/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n 1. 项目名称：悟空找房h5\r\n 2. 页面名称：store -> index(门店扫码)\r\n 3. 作者：douyadong@lifang.com\r\n -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\nclass IndexController extends Controller{\r\n    constructor(){\r\n        super() ;\r\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n        给第一个tabs-handle选项添加on样式\r\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/         \r\n        $(\".wk-tabs .tabs-handle li\").first().addClass(\"on\") ;        \r\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n        载入组件逻辑\r\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/ \r\n        require([ \"../components/bigdata.min\"  ,\"../components/tabs.min\"] , (BigData)=>{\r\n            /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n            pv埋点\r\n            -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n            BigData.init(this) ;\r\n            BigData.bigData({\r\n                \"pageName\" : \"1222\" ,\r\n                \"pageParam\" : {                    \r\n                    \"store_id\" : $(\"#storeId\").val()\r\n                } ,\r\n                \"type\" : 1\r\n            }) ;\r\n            /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n            tabs实例化,onSwap的时候要将切换到的tab的拖动加载容器requestable设置为true，其他tab拖动加载容器设置为false\r\n            -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n            $(\".wk-tabs\").tabs({\r\n                \"fixedWhenScroll\" : false ,\r\n                \"effect\" : \"fadeIn\" ,\r\n                \"duration\" : 200 ,\r\n                \"onSwap\" : (index)=> {\r\n                    $(\".tabs-frame .list-container\").attr( \"data-requestable\" , \"false\" ) ;\r\n                    $(\".tabs-frame\").eq(index).find(\".list-container\").attr( \"data-requestable\" , \"true\" ) ;\r\n                }\r\n            }) ;\r\n        }) ;\r\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n        给dom节点绑定事件\r\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n        this.addEventListener() ;\r\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n        上拉加载实例化\r\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n        this.pullload() ;\r\n    }\r\n    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n    给dom节点绑定事件\r\n    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n    addEventListener() {\r\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n        页面滚动的时候banner条的变动\r\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n        $(window).on(\"scroll\" , ()=> {\r\n            let $header = $(\"header\") ;\r\n            let $storeName = $(\"header .banner .store-name\") ;\r\n            if ($(window).scrollTop() >= 20 ) {                \r\n                if( ! $header.hasClass(\"fixed\")) $header.addClass(\"fixed\") ;\r\n                $(\".tabs-frame\").addClass(\"header-margin\") ;           \r\n                $storeName.hide() ;\r\n            }\r\n            else if ($(window).scrollTop() < 20) {\r\n                if( $header.hasClass(\"fixed\") ) $header.removeClass(\"fixed\") ;\r\n                $(\".tabs-frame\").removeClass(\"header-margin\") ; \r\n                $storeName.show() ;\r\n            }\r\n        }) ; \r\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n        添加微信按钮事件绑定\r\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n        $(\".tabs-frame.agent-items .wechat\").click(function(){\r\n            $.modal({\r\n                \"id\" : \"addWechatModal\" ,\r\n                \"title\" : \"扫码加微信\" ,\r\n                \"content\" : \"<img src=\\\"\" + $(this).data(\"agentwchartqrimgurl\") + \"\\\" style=\\\"width : 12rem ; height : 12rem ; \\\"><p>微信号：\" + $(this).data(\"agentwchatid\") + \"</p>\" ,\r\n                \"buttons\" : [\r\n                    { \"text\" : \"确定\"  , \"clickCallback\" : function(){ $.modal.close(\"addWechatModal\") ; } }               \r\n                ]\r\n            }) ;\r\n        }) ;       \r\n    } ;\r\n    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n    绘制单条房源dom节点的方法，请参照ejs模板内容\r\n    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n    createEsf(esf) {\r\n        let aNode = $(document.createElement(\"A\")).attr( \"href\" , esf.url ).attr( \"data-bigdata\" , esf.bigDataParams).addClass(\"esf-item\") ;\r\n        let dlNode = $(document.createElement(\"DL\")) ;\r\n        dlNode.append( \"<dt><img src=\\\"\" + esf.houseImgUrl + \"?x-oss-process=image/resize,w_150\\\" alt=\\\"\" + esf.estateName + \"\\\" class=\\\"lazy\\\"></dt>\" ) ;\r\n        dlNode.append( \"<dd class=\\\"title\\\">\" + esf.houseTitle + \"</dd>\" ) ;\r\n        dlNode.append( \"<dd><span class=\\\"layout\\\">\" + esf.houseChild +\" \" + esf.areaStr + \"</span><span class=\\\"money\\\">\" + esf.totalPrice + \" 万</span></dd>\" ) ;\r\n        dlNode.append( \"<dd><span class=\\\"location\\\">\" +  esf.district + \" \" + esf.town + \"</span><span class=\\\"price\\\">\" + esf.unitPrice  +\" 元/㎡</span></dd>\" ) ;\r\n        let tagNode = $(document.createElement(\"DD\")) ;\r\n        if(esf.isTopHouse >1) tagNode.append( \"<span class=\\\"selected\\\">精选</span>\" ) ;\r\n        else if(esf.isStorePush === 1) tagNode.append( \"<span>店长推荐</span>\" ) ;\r\n        else if(esf.commAgent > 0) tagNode.append( \"<span>急售</span>\" ) ;\r\n        if(esf.fullYears >= 5 && esf.onlyOne == 1)  tagNode.append( \"<span>满五唯一</span>\" ) ;\r\n        if(esf.fullYears >= 2) tagNode.append( \"<span>满二</span>\" ) ;\r\n        if(esf.isSubwayHouse === 1)  tagNode.append( \"<span>地铁</span>\" ) ;\r\n        if(esf.isSchoolHouse === 1) tagNode.append( \"<span>近学校</span>\" ) ;\r\n        if(esf.isNewOnStore === 1) tagNode.append( \"<span>新上</span>\" ) ;\r\n        if(esf.orientation === 9) tagNode.append( \"<span>南北通透</span>\" ) ;\r\n        dlNode.append(tagNode) ;\r\n        aNode.append(dlNode) ;\r\n        return aNode ;\r\n    } ;\r\n    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n    绘制单条经纪人dom节点的方法，请参照ejs模板内容\r\n    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n    createAgent(agent) {\r\n        let dlNode = $(document.createElement(\"DL\")).addClass(\"agent\") ;\r\n        let telNode = $(document.createElement(\"DD\")).addClass(\"tel\").append(\"<span><i class=\\\"iconfont icon-tel\\\"></i></span><span class=\\\"memo\\\">电话咨询</span>\") ;\r\n        let wechatNode = $(document.createElement(\"DD\")).addClass(\"wechat\").append(\"<span><i class=\\\"iconfont icon-wechat\\\"></i></span><span class=\\\"memo\\\">添加微信</span>\") ;\r\n        let dtNode = $(document.createElement(\"DT\")).append(\"<a href=\\\"#\\\"><img src=\\\"\" + agent.agentHeadImgUrl + \"?x-oss-process=image/resize,w_120\\\" class=\\\"lazy\\\"><div class=\\\"summary\\\"><p class=\\\"name\\\">\" + agent.agentName + \"</p><p class=\\\"seniority\\\">加入悟空：\" + agent.serviceYears + \"</p></div></a>\") ;\r\n        dlNode.append(telNode).append(wechatNode).append(dtNode) ;\r\n        return dlNode ;\r\n    } ;\r\n    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n    上拉加载实例化\r\n    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n    pullload() {\r\n        let self = this ;\r\n        //二手房\r\n        $(\".tabs-frame.esf-items .list-container\").pullload({\r\n            apiUrl : this.apiUrl.store.house ,\r\n            queryStringObject : { \"storeId\" : $(\"#storeId\").val() } ,          \r\n            callback : function(data) {\r\n                if( ! data.data) return ;          \r\n                $.each(data.data , (index , esf)=> {\r\n                    $(\".tabs-frame.esf-items .list-container\").append(self.createEsf(esf)) ;\r\n                }) ;\r\n            }\r\n        }) ;\r\n        //经纪人\r\n        $(\".tabs-frame.agent-items .list-container\").pullload({\r\n            apiUrl : this.apiUrl.store.agent ,  \r\n            queryStringObject : { \"storeId\" : $(\"#storeId\").val() } ,                 \r\n            callback : function(data) {\r\n                if( ! data.data) return ;\r\n                $.each(data.data , (index , agent)=> {\r\n                    $(\".tabs-frame.agent-items .list-container\").append(self.createAgent(agent)) ;\r\n                }) ;\r\n             }\r\n        }) ;\r\n    } ;\r\n}\r\n/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n类的初始化\r\n-----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n$(document).ready(function() {\r\n    new IndexController ;\r\n}) ;"]}