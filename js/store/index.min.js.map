{"version":3,"sources":["store/index.min.js"],"names":["IndexController","$","lazyload","staticDomain","eq","addClass","self","getLocation","locationPo","getHoustList","latitude","longitude","pullload","require","BigData","init","bigData","val","tabs","index","attr","find","animate","scrollTop","addEventListener","click","cookie","path","window","location","href","on","$header","$storeName","hasClass","hide","removeClass","show","modal","data","close","esf","aNode","document","createElement","url","bigDataParams","dlNode","append","houseImgUrl","estateName","houseTitle","houseChild","areaStr","district","town","tagNode","tagList","forEach","tag","totalPrice","unitPrice","apiUrl","store","house","queryStringObject","lon","lat","threshold","callback","each","encryptHouseId","createEsf","position","request","successCallback","result","length","item","encodeURIComponent","JSON","stringify","houseId","callBack","navigator","geolocation","tips","geoOpts","enableHighAccuracy","maximumAge","timeout","getCurrentPosition","coords","console","log","error","code","PERMISSION_DENIED","POSITION_UNAVAILABLE","TIMEOUT","UNKNOWN_ERROR","Controller","ready"],"mappings":"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","file":"index.min.js","sourcesContent":["/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n 1. 项目名称：悟空找房h5\n 2. 页面名称：store -> index(门店扫码)\n 3. 作者：douyadong@lifang.com\n -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\nclass IndexController extends Controller{\n    constructor(){\n        super() ;\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        图片懒加载实例化\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/        \n        $(\".lazy\").lazyload({ \n            \"placeholder\" : this.staticDomain + \"/wkh5_fe/images/common/loading.jpg\"\n        }) ;  \n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        给第一个tabs-handle选项添加on样式\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/         \n        $(\".wk-tabs .tabs-handle li\").eq(0).addClass(\"on\") ;\n        let self = this;\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        定位加载实例化\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        this.getLocation((locationPo)=>{\n           this.getHoustList({\"latitude\":locationPo.latitude,\"longitude\":locationPo.longitude});\n            /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n             上拉加载实例化\n             -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n            this.pullload(locationPo.latitude,locationPo.longitude) ;\n        });\n\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        载入组件逻辑\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/ \n        require([ \"../components/bigdata.min\"  ,\"../components/tabs.min\"] , (BigData)=>{\n            /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n            pv埋点\n            -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n            BigData.init(this) ;\n            BigData.bigData({\n                \"pageName\" : \"1222\" ,\n                \"pageParam\" : {                    \n                    \"store_id\" : $(\"#storeId\").val()\n                } ,\n                \"type\" : 1\n            }) ;\n            /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n            tabs实例化,onSwap的时候要将切换到的tab的拖动加载容器requestable设置为true，其他tab拖动加载容器设置为false\n            -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n            $(\".wk-tabs\").tabs({\n                \"fixedWhenScroll\" : false ,\n                \"effect\" : \"fadeIn\" ,\n                \"duration\" : 200 ,\n                 \"onSwap\" : (index)=> {\n                    $(\".tabs-frame .list-container\").attr( \"data-requestable\" , \"false\" ) ;\n                    $(\".tabs-frame\").eq(index).find(\".list-container\").attr( \"data-requestable\" , \"true\" ) ;\n                    $(\"html,body\").animate({\n                        scrollTop : \"0px\"\n                    } , 100) ;\n                }\n            }) ;\n        }) ;\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        给dom节点绑定事件\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        this.addEventListener() ;\n\n        $('.goEsf').click(function () {\n            $.cookie('selectedCityPinyin',$(\"#cityPinYin\").val(),{path: '/',});\n            $.cookie('selectedCityId',$(\"#cityId\").val(),{path: '/',});\n            $.cookie('selectedCityName',$(\"#cityName\").val(),{path: '/',});\n            if ($(this).attr('data-href')){\n                window.location.href= $(this).attr('data-href')\n            }\n        })\n    }\n    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n    给dom节点绑定事件\n    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n    addEventListener() {\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        点返回按钮要返回M站首页\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/        \n        $('.icon-back').on('click',function(){\n            window.location.href = \"/\" ;\n        }) ;\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        页面滚动的时候banner条的变动\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        $(window).on(\"scroll\" , ()=> {\n            let $header = $(\"header\") ;\n            let $storeName = $(\"header .banner .store-name\") ;\n            if ($(window).scrollTop() >= 20 ) {                \n                if( ! $header.hasClass(\"fixed\")) $header.addClass(\"fixed\") ;\n                $('.market').addClass('market-small');\n                $(\".tabs-frame\").addClass(\"header-margin\") ;           \n                $storeName.hide() ;\n            }\n            else if ($(window).scrollTop() < 20) {\n                if( $header.hasClass(\"fixed\") ) $header.removeClass(\"fixed\") ;\n                $('.market').removeClass('market-small');\n                $(\".tabs-frame\").removeClass(\"header-margin\") ; \n                $storeName.show() ;\n            }\n        }) ; \n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        添加微信按钮事件绑定\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        $(\".tabs-frame.agent-items .wechat\").click(function(){\n            $.modal({\n                \"id\" : \"addWechatModal\" ,\n                \"title\" : \"扫码加微信\" ,\n                \"content\" : \"<img src=\\\"\" + $(this).data(\"agentwchartqrimgurl\") + \"\\\" style=\\\"width : 12rem ; height : 12rem ; \\\"><p>微信号：\" + $(this).data(\"agentwchatid\") + \"</p>\" ,\n                \"buttons\" : [\n                    { \"text\" : \"确定\"  , \"clickCallback\" : function(){ $.modal.close(\"addWechatModal\") ; } }               \n                ]\n            }) ;            \n        }) ;       \n    } ;\n    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n    绘制单条房源dom节点的方法，请参照ejs模板内容\n    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n    createEsf(esf) {\n        let aNode = $(document.createElement(\"A\")).attr( \"href\" , esf.url ).attr( \"data-bigdata\" , esf.bigDataParams).addClass(\"esf-item\") ;\n        let dlNode = $(document.createElement(\"DL\")) ;\n        dlNode.append( \"<dt><img src=\\\"\" + esf.houseImgUrl + \"?x-oss-process=image/resize,w_150\\\" alt=\\\"\" + esf.estateName + \"\\\" class=\\\"lazy\\\"></dt>\" ) ;\n        dlNode.append( \"<dd class=\\\"title\\\">\" + esf.houseTitle + \"</dd>\" ) ;\n        dlNode.append( \"<dd>\" + esf.houseChild +\" \" + esf.areaStr + \" | \" +  esf.district + \" \" + esf.town + \"</dd>\" ) ;              \n        let tagNode = $(document.createElement(\"DD\")).addClass(\"tags\") ;\n        esf.tagList && esf.tagList.forEach((tag) => {\n            if(tag == \"降价\") {\n                tagNode.append( `<div class=\"promotion\"><span>${ tag }</span></div>`) ;\n            }else if (tag == \"新上\"){\n                tagNode.append( `<div class=\"new\"><span>${ tag }</span></div>`) ;\n            }else if(tag == \"满二\" || tag == \"满五唯一\"){\n                tagNode.append( `<div class=\"over\"><span>${ tag }</span></div>`) ;\n            }else  {\n                tagNode.append( `<div><span>${ tag }</span></div>`) ;\n            }\n        }) ;        \n        dlNode.append(tagNode) ;\n        dlNode.append( \"<dd><span class=\\\"money\\\">\" + esf.totalPrice+ \"万</span> <span class=\\\"price\\\">\" + esf.unitPrice + \" 元/㎡</span></dd>\" ) ;  \n        aNode.append(dlNode) ;\n        return aNode ;\n    } ;    \n    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n    上拉加载实例化\n    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n    pullload(latitude,longitude) {\n        let self = this ;\n        //二手房\n        $(\".tabs-frame.esf-items .list-container\").pullload({\n            apiUrl : this.apiUrl.store.house ,\n            queryStringObject : { \"storeId\" : $(\"#storeId\").val() , lon :longitude, lat :latitude} ,\n            threshold : 50 ,       \n            callback : function(data) {\n                if( ! data.data) return ;          \n                $.each(data.data , (index , esf)=> {\n                    esf.url = \"/\"+$(\"#cityPinYin\").val()+\"/esf/\" + esf.encryptHouseId + \".html?storeId=\"+$(\"#storeId\").val() ;\n                    $(\".tabs-frame.esf-items .list-container\").append(self.createEsf(esf)) ;\n                }) ;\n            }\n        }) ;\n       \n    } ;\n    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n   请求房源数据\n   -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n    getHoustList(position){\n        let self = this;\n        this.request(this.apiUrl.store.house,{ \"storeId\" : $(\"#storeId\").val() , \"pageIndex\" : 0 , 'pageSize' : 20 ,lon:position.longitude,lat:position.latitude},{\n            successCallback(result){\n                if (result.data && result.data.length >0){\n                    result.data.forEach((item,index)=>{\n                        item.bigDataParams = encodeURIComponent(JSON.stringify( { \"eventName\" : 1222001 , \"eventParam\" : { \"store_id\" : $(\"#storeId\").val() , \"house_id\" : item.houseId } } )) ;\n                        item.url = \"/\" + $(\"#cityPinYin\").val() + \"/esf/\" + item.encryptHouseId + \".html?storeId=\"+$(\"#storeId\").val() ;\n                        $(\".tabs-frame.esf-items .list-container\").append(self.createEsf(item)) ;\n                    })\n                }else {\n                    $('.nodata-store').show()\n                }\n            }\n        });\n    }\n    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n   定位服务\n   -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n    getLocation(callBack){\n        if( ! navigator.geolocation ) {\n            $.tips( \"您的浏览器不支持定位地理位置\" , 3 ) ;\n            callBack({\"latitude\":null,\"longitude\":null});\n            return ;\n        }\n        let self = this;\n        let geoOpts = {\n            enableHighAccuracy : false ,\n            maximumAge : 0 ,\n            timeout : 10 * 1000\n        } ;\n        navigator.geolocation.getCurrentPosition( (position) => {\n            let  locationPo = {};\n            locationPo.latitude = position.coords.latitude;\n            locationPo.longitude = position.coords.longitude;\n            console.log('进入定位');\n            console.log(locationPo);\n            callBack(locationPo)\n        }, ( error ) => {\n            callBack({\"latitude\":null,\"longitude\":null});\n            switch(error.code) {\n                case error.PERMISSION_DENIED :  // 用户阻止了授权\n                    console.log(\"用户阻止了授权\");\n                    break ;\n                case error.POSITION_UNAVAILABLE :  //定位信息无效\n                    console.log(\"定位信息无效\");\n                    break ;\n\n                case error.TIMEOUT :  //定位超时\n                    console.log(\"定位超时\");\n                    break ;\n\n                case error.UNKNOWN_ERROR :  //其他不可预知的错误\n                    console.log(\"其他不可预知的错误\");\n                    break ;\n            }\n        } , geoOpts );\n    }\n}\n/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n类的初始化\n-----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n$(document).ready(function() {\n    new IndexController ;\n}) ;"]}