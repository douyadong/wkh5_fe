{"version":3,"sources":["store/index.min.js"],"names":["_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","_createClass","defineProperties","target","props","i","length","descriptor","defineProperty","key","protoProps","staticProps","IndexController","_Controller","this","_this","getPrototypeOf","$","eq","addClass","require","BigData","init","bigData","pageName","pageParam","store_id","val","type","tabs","fixedWhenScroll","effect","duration","onSwap","index","attr","find","animate","scrollTop","addEventListener","pullload","unbind","on","window","location","href","$header","$storeName","hasClass","hide","removeClass","show","click","modal","id","title","content","data","buttons","text","clickCallback","close","esf","aNode","document","createElement","url","bigDataParams","dlNode","append","houseImgUrl","estateName","houseTitle","houseChild","areaStr","district","town","tagNode","tagList","forEach","tag","totalPrice","unitPrice","apiUrl","store","house","queryStringObject","storeId","threshold","callback","each","encryptHouseId","createEsf","Controller","ready"],"mappings":"AAAA,YAIA,SAASA,iBAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASC,4BAA2BC,EAAMC,GAAQ,IAAKD,EAAQ,KAAM,IAAIE,gBAAe,4DAAgE,QAAOD,GAAyB,gBAATA,IAAqC,kBAATA,GAA8BD,EAAPC,EAElO,QAASE,WAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIP,WAAU,iEAAoEO,GAAeD,GAASE,UAAYC,OAAOC,OAAOH,GAAcA,EAAWC,WAAaG,aAAeC,MAAON,EAAUO,YAAY,EAAOC,UAAU,EAAMC,cAAc,KAAeR,IAAYE,OAAOO,eAAiBP,OAAOO,eAAeV,EAAUC,GAAcD,EAASW,UAAYV,GANje,GAAIW,cAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAIC,GAAI,EAAGA,EAAID,EAAME,OAAQD,IAAK,CAAE,GAAIE,GAAaH,EAAMC,EAAIE,GAAWX,WAAaW,EAAWX,aAAc,EAAOW,EAAWT,cAAe,EAAU,SAAWS,KAAYA,EAAWV,UAAW,GAAML,OAAOgB,eAAeL,EAAQI,EAAWE,IAAKF,IAAiB,MAAO,UAAUzB,EAAa4B,EAAYC,GAAiJ,MAA9HD,IAAYR,EAAiBpB,EAAYS,UAAWmB,GAAiBC,GAAaT,EAAiBpB,EAAa6B,GAAqB7B,MAG1hB8B,gBAUgB,SAAUC,GAT5B,QAAAD,KAAahC,gBAAAkC,KAAAF,EAAA,IAAAG,GAAA/B,2BAAA8B,MAAAF,EAAAZ,WAAAR,OAAAwB,eAAAJ,IAAA1B,KAAA4B,MAAA,OAKTG,GAAE,4BAA4BC,GAAG,GAAGC,SAAS,MAI7CC,SAAU,4BAA8B,0BAA4B,SAACC,GAIjEA,EAAQC,KAARP,GACAM,EAAQE,SACJC,SAAa,OACbC,WACIC,SAAaT,EAAE,YAAYU,OAE/BC,KAAS,IAKbX,EAAE,YAAYY,MACVC,iBAAoB,EACpBC,OAAW,SACXC,SAAa,IACZC,OAAW,SAACC,GACTjB,EAAE,+BAA+BkB,KAAM,mBAAqB,SAC5DlB,EAAE,eAAeC,GAAGgB,GAAOE,KAAK,mBAAmBD,KAAM,mBAAqB,QAC9ElB,EAAE,aAAaoB,SACXC,UAAY,OACZ,UAOhBvB,EAAKwB,mBAILxB,EAAKyB,WA5CIzB,EAwJb,MA9IA3B,WAAUwB,EAAiBC,GAyD3BZ,aAAaW,IACTH,IAAK,mBACLd,MAAO,WAhBPsB,EAAE,cAAcwB,SAChBxB,EAAE,cAAcyB,GAAG,QAAQ,WACvBC,OAAOC,SAASC,KAAO,MAK3B5B,EAAE0B,QAAQD,GAAG,SAAW,WACpB,GAAII,GAAU7B,EAAE,UACZ8B,EAAa9B,EAAE,6BACfA,GAAE0B,QAAQL,aAAe,IACnBQ,EAAQE,SAAS,UAAUF,EAAQ3B,SAAS,SAClDF,EAAE,eAAeE,SAAS,iBAC1B4B,EAAWE,QAENhC,EAAE0B,QAAQL,YAAc,KACzBQ,EAAQE,SAAS,UAAWF,EAAQI,YAAY,SACpDjC,EAAE,eAAeiC,YAAY,iBAC7BH,EAAWI,UAMnBlC,EAAE,mCAAmCmC,MAAM,WACvCnC,EAAEoC,OACEC,GAAO,iBACPC,MAAU,QACVC,QAAY,aAAgBvC,EAAEH,MAAM2C,KAAK,uBAAyB,sDAA2DxC,EAAEH,MAAM2C,KAAK,gBAAkB,OAC5JC,UACMC,KAAS,KAAQC,cAAkB,WAAY3C,EAAEoC,MAAMQ,MAAM,4BAyB3EpD,IAAK,YAKLd,MAAO,SAtBDmE,GACN,GAAIC,GAAQ9C,EAAE+C,SAASC,cAAc,MAAM9B,KAAM,OAAS2B,EAAII,KAAM/B,KAAM,eAAiB2B,EAAIK,eAAehD,SAAS,YACnHiD,EAASnD,EAAE+C,SAASC,cAAc,MACtCG,GAAOC,OAAQ,iBAAoBP,EAAIQ,YAAc,2CAA+CR,EAAIS,WAAa,wBACrHH,EAAOC,OAAQ,qBAAyBP,EAAIU,WAAa,SACzDJ,EAAOC,OAAQ,OAASP,EAAIW,WAAY,IAAMX,EAAIY,QAAU,MAASZ,EAAIa,SAAW,IAAMb,EAAIc,KAAO,QACrG,IAAIC,GAAU5D,EAAE+C,SAASC,cAAc,OAAO9C,SAAS,OAOvD,OANA2C,GAAIgB,SAAWhB,EAAIgB,QAAQC,QAAQ,SAACC,GAChCH,EAAQR,OAAQ,SAAWW,EAAM,aAErCZ,EAAOC,OAAOQ,GACdT,EAAOC,OAAQ,2BAA+BP,EAAImB,WAAY,gCAAoCnB,EAAIoB,UAAY,oBAClHnB,EAAMM,OAAOD,GACNL,KAyBPtD,IAAK,WAKLd,MAAO,WAxBP,GAAIV,GAAO6B,IAEXG,GAAE,yCAAyCuB,UACvC2C,OAASrE,KAAKqE,OAAOC,MAAMC,MAC3BC,mBAAsBC,QAAYtE,EAAE,YAAYU,OAChD6D,UAAY,GACZC,SAAW,SAAShC,GACVA,EAAKA,MACXxC,EAAEyE,KAAKjC,EAAKA,KAAO,SAACvB,EAAQ4B,GACxBA,EAAII,IAAM,iBAAmBJ,EAAI6B,eAAiB,QAClD1E,EAAE,yCAAyCoD,OAAOpF,EAAK2G,UAAU9B,aAgC1ElD,GAzJmBiF,WAmI9B5E,GAAE+C,UAAU8B,MAAM,WACd,GAAIlF","file":"index.min.js","sourcesContent":["/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n 1. 项目名称：悟空找房h5\n 2. 页面名称：store -> index(门店扫码)\n 3. 作者：douyadong@lifang.com\n -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\nclass IndexController extends Controller{\n    constructor(){\n        super() ;\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        给第一个tabs-handle选项添加on样式\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/         \n        $(\".wk-tabs .tabs-handle li\").eq(0).addClass(\"on\") ;        \n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        载入组件逻辑\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/ \n        require([ \"../components/bigdata.min\"  ,\"../components/tabs.min\"] , (BigData)=>{\n            /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n            pv埋点\n            -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n            BigData.init(this) ;\n            BigData.bigData({\n                \"pageName\" : \"1222\" ,\n                \"pageParam\" : {                    \n                    \"store_id\" : $(\"#storeId\").val()\n                } ,\n                \"type\" : 1\n            }) ;\n            /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n            tabs实例化,onSwap的时候要将切换到的tab的拖动加载容器requestable设置为true，其他tab拖动加载容器设置为false\n            -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n            $(\".wk-tabs\").tabs({\n                \"fixedWhenScroll\" : false ,\n                \"effect\" : \"fadeIn\" ,\n                \"duration\" : 200 ,\n                 \"onSwap\" : (index)=> {\n                    $(\".tabs-frame .list-container\").attr( \"data-requestable\" , \"false\" ) ;\n                    $(\".tabs-frame\").eq(index).find(\".list-container\").attr( \"data-requestable\" , \"true\" ) ;\n                    $(\"html,body\").animate({\n                        scrollTop : \"0px\"\n                    } , 100) ;\n                }\n            }) ;\n        }) ;\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        给dom节点绑定事件\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        this.addEventListener() ;\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        上拉加载实例化\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        this.pullload() ;\n    }\n    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n    给dom节点绑定事件\n    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n    addEventListener() {\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        点返回按钮要返回M站首页\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        $('.icon-back').unbind() ;\n        $('.icon-back').on('click',function(){\n            window.location.href = \"/\" ;\n        }) ;\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        页面滚动的时候banner条的变动\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        $(window).on(\"scroll\" , ()=> {\n            let $header = $(\"header\") ;\n            let $storeName = $(\"header .banner .store-name\") ;\n            if ($(window).scrollTop() >= 20 ) {                \n                if( ! $header.hasClass(\"fixed\")) $header.addClass(\"fixed\") ;\n                $(\".tabs-frame\").addClass(\"header-margin\") ;           \n                $storeName.hide() ;\n            }\n            else if ($(window).scrollTop() < 20) {\n                if( $header.hasClass(\"fixed\") ) $header.removeClass(\"fixed\") ;\n                $(\".tabs-frame\").removeClass(\"header-margin\") ; \n                $storeName.show() ;\n            }\n        }) ; \n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        添加微信按钮事件绑定\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        $(\".tabs-frame.agent-items .wechat\").click(function(){\n            $.modal({\n                \"id\" : \"addWechatModal\" ,\n                \"title\" : \"扫码加微信\" ,\n                \"content\" : \"<img src=\\\"\" + $(this).data(\"agentwchartqrimgurl\") + \"\\\" style=\\\"width : 12rem ; height : 12rem ; \\\"><p>微信号：\" + $(this).data(\"agentwchatid\") + \"</p>\" ,\n                \"buttons\" : [\n                    { \"text\" : \"确定\"  , \"clickCallback\" : function(){ $.modal.close(\"addWechatModal\") ; } }               \n                ]\n            }) ;            \n        }) ;       \n    } ;\n    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n    绘制单条房源dom节点的方法，请参照ejs模板内容\n    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n    createEsf(esf) {\n        let aNode = $(document.createElement(\"A\")).attr( \"href\" , esf.url ).attr( \"data-bigdata\" , esf.bigDataParams).addClass(\"esf-item\") ;\n        let dlNode = $(document.createElement(\"DL\")) ;\n        dlNode.append( \"<dt><img src=\\\"\" + esf.houseImgUrl + \"?x-oss-process=image/resize,w_150\\\" alt=\\\"\" + esf.estateName + \"\\\" class=\\\"lazy\\\"></dt>\" ) ;\n        dlNode.append( \"<dd class=\\\"title\\\">\" + esf.houseTitle + \"</dd>\" ) ;\n        dlNode.append( \"<dd>\" + esf.houseChild +\" \" + esf.areaStr + \" | \" +  esf.district + \" \" + esf.town + \"</dd>\" ) ;              \n        let tagNode = $(document.createElement(\"DD\")).addClass(\"tags\") ;\n        esf.tagList && esf.tagList.forEach((tag) => {\n            tagNode.append( \"<span>\" + tag + \"</span>\" ) ;\n        }) ;        \n        dlNode.append(tagNode) ;\n        dlNode.append( \"<dd><span class=\\\"money\\\">\" + esf.totalPrice+ \"万</span> <span class=\\\"price\\\">\" + esf.unitPrice + \" 元/㎡</span></dd>\" ) ;  \n        aNode.append(dlNode) ;\n        return aNode ;\n    } ;    \n    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n    上拉加载实例化\n    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n    pullload() {\n        let self = this ;\n        //二手房\n        $(\".tabs-frame.esf-items .list-container\").pullload({\n            apiUrl : this.apiUrl.store.house ,\n            queryStringObject : { \"storeId\" : $(\"#storeId\").val() } ,   \n            threshold : 50 ,       \n            callback : function(data) {\n                if( ! data.data) return ;          \n                $.each(data.data , (index , esf)=> {\n                    esf.url = \"/shanghai/esf/\" + esf.encryptHouseId + \".html\" ;\n                    $(\".tabs-frame.esf-items .list-container\").append(self.createEsf(esf)) ;\n                }) ;\n            }\n        }) ;\n       \n    } ;\n}\n/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n类的初始化\n-----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n$(document).ready(function() {\n    new IndexController ;\n}) ;"]}