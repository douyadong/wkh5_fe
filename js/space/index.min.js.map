{"version":3,"sources":["space/index.min.js"],"names":["IndexController","$","lazyload","staticDomain","click","history","go","addListenerToAssistant","first","addClass","require","BigData","init","bigData","val","tabs","onSwap","index","requestParams","typeHouseList","attr","addEventListener","classSelf","slideUp","siblings","fadeIn","ellipsis","removeClass","hide","each","height","show","type","item","houseTagList","commision","domeType","houseTag","isSubwayHouse","isPriceDown","isNewHouse","isShortRent","isHardcover","isSouth","isZeroCommission","url","firstImageUrl","estateName","houseTitle","houseTypeStr","spaceArea","districtAndTownName","distanceSubway","rentPriceStr","self","pullload","apiUrl","requestType","queryStringObject","traditional","pageSize","threshold","callback","data","rent","encryptHouseId","append","creatRent","Controller","document","ready"],"mappings":"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","file":"index.min.js","sourcesContent":["/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n 1. 项目名称：悟空找房h5\n 2. 页面名称：space -> index(经纪人个人店铺首页)\n 3. 作者：赵华刚@lifang.com\n -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\nclass IndexController extends Controller {\n    constructor() {\n        super() ;\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        图片懒加载实例化\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/        \n        $(\".lazy\").lazyload({ \n            \"placeholder\" : this.staticDomain + \"/wkh5_fe/images/common/loading.jpg\"\n        }) ;\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        返回按钮事件\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/ \n        $(\"header .icon-back\").click(function(){\n            history.go(-1) ;\n        }) ;\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        底部经纪人助手条处理\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n        this.addListenerToAssistant() ;\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        给第一个tabs-handle选项添加on样式\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/         \n        $(\".wk-tabs .tabs-handle li\").first().addClass(\"on\") ;\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        载入组件逻辑\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/  \n        require([ \"../components/bigdata.min\" , \"../components/tabs.min\" ] , (BigData) => { \n            /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n            pv埋点\n            -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n            BigData.init(this) ;\n            BigData.bigData({\n                \"pageName\" : \"1002\" ,\n                \"pageParam\" : {\n                    \"source\" : \"\" ,\n                    \"agent_id\" : $(\"#agentId\").val()\n                } ,\n                \"type\" : 1\n            }) ;\n            /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n           tabs实例化\n            -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/ \n            $(\".wk-tabs\").tabs({\n                \"fixedWhenScroll\" : false ,\n                \"effect\" : \"fadeIn\" ,\n                \"duration\" : 200,\n                onSwap: function (index) {\n                    let requestParams = {\n                       \"agentId\": $(\"#agentId\").val()\n                    };\n                   let typeHouseList = $(`.tabs-handle >li:eq(${index})`).attr(\"data-typehouse\");\n                   /* pullload(requestParams,typeHouseList)*/\n                }\n            }) ;            \n        }) ;        \n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n        给dom节点绑定事件\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/ \n        this.addEventListener() ;\n    } ;\n    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n    给dom节点绑定事件\n    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n    addEventListener() {\n        let classSelf = this ;\n        $(\".highlight .more\").click(function(){\n            $(this).slideUp(200) ;\n            $(this).siblings(\".optional\").fadeIn(200 , function(){\n                classSelf.ellipsis() ;\n            }) ;           \n        }) ;\n        $(\".highlight .optional .switch\").click(function(){\n            $(this).siblings(\".long-text\").removeClass(\"limit\") ;\n            $(this).hide(200) ;\n        }) ;\n    }\n    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n    判断自我介绍和成交故事是否需要展开\n    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n    ellipsis() {       \n        $(\".highlight .optional .long-text\").each(function(){             \n            if($(this).height() <= 60 ) return ;           \n            $(this).addClass(\"limit\") ;             \n            $(this).siblings(\".switch\").show(200) ;\n        }) ;\n    }\n    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n     创建dome\n    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n    creatRent(type,item) {\n        let houseTagList = ''; // 标签\n        let commision =''; // 租房零佣金\n        let domeType='';   // dome 的拼装\n        if (type == \"rent\"){\n               if (item.houseTag.isSubwayHouse) {\n                   houseTagList += '<span class=\"tag nears\">近地铁</span>'\n               }  if (item.houseTag.isPriceDown) {\n                   houseTagList += '<span class=\"tag priced\">降价</span>'\n               }  if (item.houseTag.isNewHouse) {\n                   houseTagList += '<span class=\"tag newup\">新上</span>'\n               }   if (item.houseTag.isShortRent) {\n                   houseTagList += '<span class=\"tag anthert\">可短租</span>'\n               }   if(item.houseTag.isHardcover == 1){\n                   houseTagList += '<span class=\"tag anthert\">精装</span>'\n               } if(item.houseTag.isHardcover == 2){\n                   houseTagList += '<span class=\"tag anthert\">豪装</span>'\n               } if(item.houseTag.isSouth){\n                   houseTagList += '<span class=\"tag anthert\">朝南</span>'\n               } if(item.houseTag.isZeroCommission){\n                   commision= ' <span>0 佣金</span>'\n               }\n               domeType=  `<a  class=\"rent-item box\" href=\" ${item.url}\">\n                   <div class=\"left\">\n                       <img src=\"${item.firstImageUrl}?x-oss-process=image/resize,w_120\" alt=\"${ item.estateName} \" class=\"lazy\">\n                       ${commision}\n                   </div>\n                   <div class=\"right\">\n                       <h4> ${item.houseTitle}</h4>\n                       <p class=\"base-info\">                    \n                          ${item.houseTypeStr} ${item.spaceArea}㎡ | ${item.districtAndTownName}\n                       </p>\n                        <p class=\"base-info\">${item.distanceSubway}</p>\n                       <p class=\"tags\">${houseTagList}</p>\n                       <p class=\"unit-price\"> ${item.rentPriceStr} 元/月</p>\n                   </div>\n               </a>`;\n        }else if(type == \"esf\"){\n`<a href=\"/shanghai/esf/79fe70c9110b15020d7fcf7677cd8757.html\" class=\"esf-item\" data-bigdata=\"%7B%22eventName%22%3A1002017%2C%22eventParam%22%3A%7B%7D%7D\">\n        <dl>\n            <dt><img src=\"https://image-test.wkzf.com/13cffd8795404077ae823c140b129396/Urbd0JIDwwxVs.jpg?x-oss-process=image/resize,w_150\" alt=\"梅陇一村\" class=\"lazy\" style=\"display: inline;\"></dt>\n            <dd class=\"title\">业主新挂牌房源，南北通透户型，位置好采光足,随时可看</dd>\n            <dd>2室1厅1卫 52.41m² | 闵行区 梅陇</dd>\n            <dd class=\"tags\">\n                \n                    <div><span>地铁房</span></div>\n                \n                    <div><span>近学校</span></div>\n                \n                    <div><span>南北通透</span></div>\n                               \n            </dd>   \n            <dd>\n                 <span class=\"money\">295万</span>\n                 <span class=\"price\">56287 元/㎡</span>\n            </dd>                             \n        </dl>\n    </a>`\n        }\n        return domeType\n    }\n    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n    上拉加载实例化\n    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n    pullload(requestParams,typeHouseList) {\n        let self = this ;\n        //租房列表\n        $(\".rent-items\").pullload({\n            apiUrl : `this.apiUrl.space.${typeHouseList}` ,\n            requestType: \"get\",\n            queryStringObject : requestParams ,\n            traditional: true,\n            pageSize: 10,\n            threshold : 50 ,\n            callback : function(data) {\n                if( ! data.data) return ;\n                $.each(data.data , (index , rent)=> {\n                    rent.url = \"/shanghai/rent/\" + rent.encryptHouseId + \".html\" ;\n                    $(\".rent-items\").append(self.creatRent(rent)) ;\n                }) ;\n            }\n        }) ;\n\n    } ;\n}\n/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\n类的初始化\n-----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\n$(document).ready(function() {\n    new IndexController ;\n}) ;\n"]}