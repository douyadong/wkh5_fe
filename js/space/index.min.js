"use strict";function _classCallCheck(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,s){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!s||"object"!=typeof s&&"function"!=typeof s?e:s}function _inherits(e,s){if("function"!=typeof s&&null!==s)throw new TypeError("Super expression must either be null or a function, not "+typeof s);e.prototype=Object.create(s&&s.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),s&&(Object.setPrototypeOf?Object.setPrototypeOf(e,s):e.__proto__=s)}var _createClass=function(){function e(e,s){for(var a=0;a<s.length;a++){var n=s[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(s,a,n){return a&&e(s.prototype,a),n&&e(s,n),s}}(),IndexController=function(_Controller){function IndexController(){_classCallCheck(this,IndexController);var e=_possibleConstructorReturn(this,(IndexController.__proto__||Object.getPrototypeOf(IndexController)).call(this));$(".lazy").lazyload({placeholder:e.staticDomain+"/wkh5_fe/images/common/loading.jpg"}),$("header .icon-back").click(function(){history.go(-1)}),e.addListenerToAssistant(),$(".wk-tabs .tabs-handle li").first().addClass("on");var s=e;return require(["../components/bigdata.min","../components/tabs.min"],function(a){a.init(e),a.bigData({pageName:"1002",pageParam:{source:"",agent_id:$("#agentId").val()},type:1}),$(".wk-tabs").tabs({fixedWhenScroll:!1,effect:"fadeIn",duration:200,onSwap:function(e){var a={agentId:$("#agentId").val()},n=$(".tabs-handle >li:eq("+e+")").attr("data-typehouse");s.pullload(a,n)}})}),e.addEventListener(),e}return _inherits(IndexController,_Controller),_createClass(IndexController,[{key:"addEventListener",value:function(){var e=this;$(".highlight .more").click(function(){$(this).slideUp(200),$(this).siblings(".optional").fadeIn(200,function(){e.ellipsis()})}),$(".highlight .optional .switch").click(function(){$(this).siblings(".long-text").removeClass("limit"),$(this).hide(200)})}},{key:"ellipsis",value:function(){$(".highlight .optional .long-text").each(function(){$(this).height()<=60||($(this).addClass("limit"),$(this).siblings(".switch").show(200))})}},{key:"creatRent",value:function(e,s){var a="",n="",t="";if("rent"==e){s.houseTag.isSubwayHouse&&(a+='<span class="tag nears">近地铁</span>'),s.houseTag.isPriceDown&&(a+='<span class="tag priced">降价</span>'),s.houseTag.isNewHouse&&(a+='<span class="tag newup">新上</span>'),s.houseTag.isShortRent&&(a+='<span class="tag anthert">可短租</span>'),1==s.houseTag.isHardcover&&(a+='<span class="tag anthert">精装</span>'),2==s.houseTag.isHardcover&&(a+='<span class="tag anthert">豪装</span>'),s.houseTag.isSouth&&(a+='<span class="tag anthert">朝南</span>'),s.houseTag.isZeroCommission&&(n=' <span class="commission">0 佣金</span>');var i="";1==s.houseTag.hasVideo&&(i='<span class="play"><i></i></span>');var o="";null!=s.distanceSubway&&(o='<p class="base-info">'+s.distanceSubway+"</p>"),t='<a  class="rent-item box" href=" '+s.url+'">\n                   <div class="left">\n                       <img src="'+s.firstImageUrl+'?x-oss-process=image/resize,w_120" alt="'+s.estateName+' " class="lazy">\n                       '+i+"\n                       "+n+'\n                   </div>\n                   <div class="right">\n                       <h4> '+s.houseTitle+'</h4>\n                       <p class="base-info">                    \n                          '+s.houseTypeStr+" "+s.spaceArea+"㎡ | "+s.districtAndTownName+"\n                       </p>\n                        "+o+'\n                       <p class="tags">'+a+'</p>\n                       <p class="unit-price"> '+s.rentPriceStr+" 元/月</p>\n                   </div>\n               </a>"}else if("esf"==e){s.tagList.forEach(function(e){a+="降价"==e?'<div class="promotion"><span>'+e+"</span></div>":"新上"==e?'<div class="new"><span>'+e+"</span></div>":"满二"==e||"满五唯一"==e?'<div class="over"><span>'+e+"</span></div>":"<div><span>"+e+"</span></div>"});var l="";1==s.hasVideo&&(l='<span class="play"><i></i></span>');var r=encodeURIComponent(JSON.stringify({eventName:"1002017",eventParam:{house_id:s.houseId},type:2}));t='<a href=" '+s.url+'" class="esf-item" data-bigdata="'+r+'">\n                            <dl>\n                                <dt><img src="'+s.houseImgUrl+'?x-oss-process=image/resize,w_120" alt="'+s.houseTitle+'" class="lazy" style="display: inline;">'+l+'</dt>\n                                <dd class="title">'+s.houseTitle+"</dd>\n                                <dd>"+s.houseChild+" "+s.areaStr+" | "+s.district+s.town+'</dd>\n                                <dd class="tags">\n                                  '+a+'               \n                                </dd>   \n                                <dd>\n                                     <span class="money">'+s.totalPrice+'万</span>\n                                     <span class="price">'+s.unitPrice+" 元/㎡</span>\n                                </dd>                             \n                            </dl>\n                        </a>"}else if("xf"==e){s.hasActivity?a+='<li class="yh">有优惠</li>':s.isSubwayEstate?a+='<li class="dt">近地铁</li>':s.isSoonOpen?s.isSoonOpen?a+='<li class="">即将开盘</li>':s.hasVideo&&(a+='<li class="">有视频</li>'):a+='<li class="">在售楼盘</li>';var c="",p="";1==s.hasVideo&&(p='<span class="play"><i></i></span>'),s.activitys&&s.activitys[0]&&(c='<div class="yh">'+s.activitys[0].title+"</div>");var d=encodeURIComponent(JSON.stringify({eventName:1002010,eventParam:{new_house_id:s.subEstateId}}));t='<a class="xf-item" href="'+s.url+'" data-bigdata="'+d+'">\n            <div class="img">\n                <img src="'+s.houseImgUrl+'?x-oss-process=image/resize,w_120" data-src="'+s.houseImgUrl+'" class="lazy">\n                '+p+"\n                "+c+'     \n            </div>\n            <div class="info">\n                <h3><%= item.estateName%></h3>\n                <p class="district-town-area">\n                    <span>'+s.districtName+"  "+s.townName+"</span><span>"+s.startSpace+"m²-"+s.endSpace+'m²</span>\n                </p>\n                <ul class="tags">\n                    '+a+'\n                </ul>\n                <p class="unit-price"><span>'+s.unitPrice+"</span> <span>元/m</span></p>\n            </div>\n        </a>"}return t}},{key:"pullload",value:function pullload(requestParams,typeHouseList){var self=this,pinyin=$.cookie("pinyin")||"shanghai",type="secondHouseList"==typeHouseList?"esf":"rentHouseList"==typeHouseList?"rent":"xf";$("."+type+"-frame").pullload({apiUrl:eval("this.apiUrl.space."+typeHouseList),requestType:"get",queryStringObject:requestParams,traditional:!0,pageSize:10,threshold:50,countKey:"count",callback:function(e){e.data&&e.data.houseList.forEach(function(e,s){var a=e;"xf"==type?a.url="/"+pinyin+"/"+type+"/"+e.encryptHouseId+".html":a.url="/"+pinyin+"/"+type+"/"+e.encryptHouseId+".html?agentId="+$("#agentId").val(),$("."+type+"-frame").append(self.creatRent(type,a))})}})}}]),IndexController}(Controller);$(document).ready(function(){new IndexController});
//# sourceMappingURL=index.min.js.map
