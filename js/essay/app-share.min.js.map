{"version":3,"sources":["essay/app-share.min.js"],"names":["Pagination","options","setOptions","callback","bindEvent","opt","defaults","total","prePages","sufPages","dotsPages","showDotPages","sidePages","container","numberStyle","$","extend","pageIndex","totalCount","_this","str","i","append","undelegate","delegate","event","$this","parseInt","text","type","data","oldIndex","attr","hasClass","Plugin","element","$element","$Audio","children","Audio","$audio_area","find","$audio_length","$audio_progress","currentState","time","init","pluginName","dataName","version","autoplay","src","noop","privateMethod","prototype","self","addEventListener","e","updateTotalTime","target","duration","console","log","events","changeSrc","play","pause","clearInterval","timer","setInterval","run","bind","addClass","removeClass","stop","updateTime","on","animateProgressBarPosition","ended","percentage","currentTime","styles","css","getAudioSeconds","string","addZero","Math","floor","getAudioMinutes","word","howManyZero","String","minutes","seconds","audioTime","old","fn","option","args","each","Constructor","noConflict","window","Zepto","jQuery","ArticleShareController","opts","require","BigData","bigData","trim","val","setArticleFont","articleId","cityId","refreshComment","convertLink","convertVideo","openInApp","initWxShare","loginStatus","textareaHeight","height","wkBigDataParams","pageName","pageParam","article_id","eventName","eventParam","nextPageName","nextPageParam","city","location","href","indexOf","slice","lastIndexOf","clearTimeout","st","setTimeout","scrollTop","offset","top","click","nativeSchema","loadSchema","schema","protocal","loadWaiting","failUrl","apkInfo","PKG","CATEGORY","ACTION","params","name","reg","RegExp","r","match","context","classSelf","links","length","index","item","$item","split","categoryId","getQueryString","videos","coverUrl","$video","audio","toLowerCase","after","remove","poster","preload","wechatAudio","PN","itemIndex","request","apiUrl","essay","commentList","successCallback","result","createCommentList","empty","count","hide","show","genPageNumber","ceil","html","push","guestPhoto","guestNickname","replace","commentContent","date","join","removeAttr","_","$icon","first","Login","isLoginCheck","Operation","collect","showMessage","lifang","sendWKBigData","cancelCollection","addListenerToDownloadApp","tips","zan","status","zanCount","test","keyup","parent","com","commiting","preventDefault","$textarea","comment","$count","commentNumStr","$comment","scrollIntoView","Controller","document","ready"],"mappings":"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","file":"app-share.min.js","sourcesContent":["/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n 1. 项目名称：悟空找房h5\r\n 2. 页面名称：article/app-share(取经文章-分享页)\r\n 3. 作者：tangxuyang@lifang.com\r\n 4. 从wkwap_fe中移过来的，简单修改\r\n -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n\r\n // 取自pagination.js\r\n class Pagination {\r\n     constructor(options) {\r\n        this.setOptions(options);\r\n        this.options.callback();\r\n        this.bindEvent();\r\n     }\r\n\r\n    setOptions(opt) {\r\n        var defaults = {\r\n          total: 1,\r\n          prePages: 5, // 没有前置[...]显示5页\r\n          sufPages: 4, // 没有后置[...]显示4页\r\n          dotsPages: 7, // 7页后显示[...]\r\n          showDotPages: 3, // 前后3页之后显示[...]  \r\n          sidePages: 1, // 中间前后各加1页\r\n          callback: null,\r\n          container: null,\r\n          numberStyle: ''\r\n        };\r\n        $.extend(true, this.options = {}, defaults, opt);\r\n    }\r\n \r\n    genPageNumber(pageIndex, totalCount) {\r\n        var _this = this;\r\n        var prePages = _this.options.prePages; // 没有前置[...]显示5页\r\n        var sufPages = _this.options.sufPages; // 没有后置[...]显示4页\r\n        var dotsPages = _this.options.dotsPages; // 7页后显示[...]\r\n        var showDotPages = _this.options.showDotPages; // 前后3页之后显示[...]  \r\n        var sidePages = _this.options.sidePages; // 中间前后各加1页\r\n        var total = totalCount || _this.options.total;\r\n        var numberStyle = _this.options.numberStyle;\r\n        var str = \"<a href='javascript:;' class='\" + numberStyle + \" page-link on'>\" + pageIndex + '</a>';\r\n        if (total < dotsPages) {\r\n          for (var i = pageIndex - 1; i >= 1; i--) {\r\n            str = \"<a href='javascript:;' class='\" + numberStyle + \" page-link'>\" + i + '</a>' + str;\r\n          }\r\n          for (var i = pageIndex + 1; i <= total; i++) {\r\n            str = str + \"<a href='javascript:;' class='\" + numberStyle + \" page-link'>\" + i + '</a>';\r\n          }\r\n        } else {\r\n          if (pageIndex < showDotPages + 1) {\r\n            for (var i = pageIndex - 1; i >= 1; i--) {\r\n              str = \"<a href='javascript:;' class='\" + numberStyle + \" page-link'>\" + i + '</a>' + str;\r\n            }\r\n            for (var i = pageIndex + 1; i <= prePages; i++) {\r\n              str = str + \"<a href='javascript:;' class='\" + numberStyle + \" page-link'>\" + i + '</a>';\r\n            }\r\n            str = str + '<span>...</span>';\r\n            str = str + \"<a href='javascript:;' class='\" + numberStyle + \" page-link'>\" + total + '</a>';\r\n          } else if (total - pageIndex < showDotPages) {\r\n            for (var i = pageIndex + 1; i <= total; i++) {\r\n              str = str + \"<a href='javascript:;' class='\" + numberStyle + \" page-link'>\" + i + '</a>';\r\n            }\r\n            for (var i = pageIndex - 1; i > total - sufPages; i--) {\r\n              str = \"<a href='javascript:;' class='\" + numberStyle + \" page-link'>\" + i + '</a>' + str;\r\n            }\r\n            str = '<span>...</span>' + str\r\n            str = \"<a href='javascript:;' class='\" + numberStyle + \" page-link'>\" + 1 + '</a>' + str;\r\n          } else {\r\n            for (var i = 1; i <= sidePages; i++) {\r\n              if (pageIndex - i > 1) {\r\n                str = \"<a href='javascript:;' class='\" + numberStyle + \" page-link'>\" + (pageIndex - i) + '</a>' + str;\r\n              }\r\n              if (pageIndex - 0 + i <= total) {\r\n                str = str + \"<a href='javascript:;' class='\" + numberStyle + \" page-link'>\" + (pageIndex - 0 + i) + '</a>';\r\n              }\r\n            }\r\n            if (pageIndex - sidePages > 1) {\r\n              str = \"<a href='javascript:;' class='page-link'>\" + 1 + '</a>' + '<span>...</span>' + str;\r\n            }\r\n            if (pageIndex + sidePages < total) {\r\n              str = str + '<span>...</span>' + \"<a href='javascript:;' class='\" + numberStyle + \" page-link'>\" + total + '</a>';\r\n            }\r\n          }\r\n        }\r\n        if (pageIndex == 1) {\r\n          str = \"<a href='javascript:;' data-type='pre' data-pageindex='\" + pageIndex + \"' class='page-link disabled'>上一页</a>\" + str;\r\n        } else {\r\n          str = \"<a href='javascript:;' data-type='pre' data-pageindex='\" + pageIndex + \"' class='page-link'>上一页</a>\" + str;\r\n        }\r\n  \r\n        if (pageIndex == total) {\r\n          str = str + \"<a href='javascript:;' data-type='next' data-pageindex='\" + pageIndex + \"' class='page-link disabled'>下一页</a>\";\r\n        } else {\r\n          str = str + \"<a href='javascript:;' data-type='next' data-pageindex='\" + pageIndex + \"' class='page-link'>下一页</a>\";\r\n        }\r\n        _this.options.container.append(str);\r\n    }\r\n    \r\n    bindEvent() {\r\n        var _this = this;\r\n        _this.options.container.undelegate('a', 'click').delegate('a', 'click', function (event) {\r\n          var $this = $(this);\r\n          var pageIndex = parseInt($this.text());\r\n          var type = $this.data('type');\r\n          var oldIndex = parseInt($this.attr('data-pageindex'));\r\n          if ($this.hasClass('disabled') || $this.hasClass('on')) return;\r\n          switch (type) {\r\n            case 'pre':\r\n              pageIndex = oldIndex - 1;\r\n              break;\r\n            case 'next':\r\n              pageIndex = oldIndex + 1;\r\n              break;\r\n            default:\r\n              break;\r\n          }\r\n          if (!pageIndex) return;\r\n          _this.options.callback && _this.options.callback(pageIndex);\r\n        });\r\n      }\r\n} \r\n  \r\n// 取自wechatAudio.js\r\n;\r\n(function($) {\r\n    'use strict';\r\n\r\n    /*-----------------------------------------------------------------------------------------------------------\r\n    定义插件的构造方法\r\n    @param element 选择器对象\r\n    @param options 配置项\r\n    @constructor\r\n    -----------------------------------------------------------------------------------------------------------*/\r\n    var Plugin = function(element, options) {\r\n        //将选择器对象赋值给插件，方便后续调用\r\n        this.$element = $(element);\r\n\r\n        this.$Audio = this.$element.children('#media');\r\n        this.Audio = this.$Audio[0];\r\n        this.$audio_area = this.$element.find('#audio_area');\r\n        this.$audio_length = this.$element.find('#audio_length');\r\n        this.$audio_progress = this.$element.find('#audio_progress');\r\n        //属性\r\n        this.currentState = 'pause';\r\n        this.time = null;\r\n        //合并参数设置\r\n        this.options = $.extend({}, Plugin.defaults, options);\r\n        //进行一些初始化工作\r\n        this.init();\r\n    };\r\n\r\n    /*-----------------------------------------------------------------------------------------------------------\r\n    插件名称，即调用时的名称（$.fn.pluginName）\r\n    @type {string}\r\n    -----------------------------------------------------------------------------------------------------------*/\r\n    Plugin.pluginName = \"wechatAudio\";\r\n\r\n    /*-----------------------------------------------------------------------------------------------------------\r\n    插件缓存名称，插件通过 data 方法缓存在 dom 结构里，存储数据的名称\r\n    @type {string}\r\n    -----------------------------------------------------------------------------------------------------------*/\r\n    Plugin.dataName = \"wechataudio\";\r\n\r\n    /*-----------------------------------------------------------------------------------------------------------\r\n    插件版本\r\n    @type {string}\r\n    -----------------------------------------------------------------------------------------------------------*/\r\n    Plugin.version = \"1.0.0\";\r\n\r\n    /*-----------------------------------------------------------------------------------------------------------\r\n    插件默认配置项\r\n    @type {{}}\r\n    -----------------------------------------------------------------------------------------------------------*/\r\n    Plugin.defaults = {\r\n        autoplay: false,\r\n        src: '',\r\n        callback: $.noop\r\n    };\r\n\r\n    /*-----------------------------------------------------------------------------------------------------------\r\n    定义私有方法\r\n    -----------------------------------------------------------------------------------------------------------*/\r\n    var privateMethod = {\r\n\r\n    };\r\n\r\n    /*-----------------------------------------------------------------------------------------------------------\r\n    定义插件的方法\r\n    @type {{}}\r\n    -----------------------------------------------------------------------------------------------------------*/\r\n    Plugin.prototype = {\r\n        init: function() {\r\n            var self = this;\r\n            self.Audio.addEventListener('durationchange', function(e) {\r\n                self.updateTotalTime(e.target.duration);\r\n                console.log(e.target.duration); //FIRST 0, THEN REAL DURATION\r\n            });\r\n            // window.addEventListener('load',function(){\r\n            //     self.updateTotalTime();\r\n            // })\r\n            self.events();\r\n            // 设置src\r\n            if (self.options.src !== '') {\r\n                self.changeSrc(self.options.src, this.options.callback);\r\n            }\r\n            // 设置自动播放\r\n            if (self.options.autoplay) {\r\n                self.play();\r\n            }\r\n        },\r\n        play: function() {\r\n            var self = this;\r\n            if (self.currentState === \"play\") {\r\n                self.pause();\r\n                return;\r\n            }\r\n            self.Audio.play();\r\n            clearInterval(self.timer);\r\n            self.timer = setInterval(self.run.bind(self), 50);\r\n            self.currentState = \"play\";\r\n            self.$audio_area.addClass('playing');\r\n        },\r\n        pause: function() {\r\n            var self = this;\r\n            self.Audio.pause();\r\n            self.currentState = \"pause\";\r\n            clearInterval(self.timer);\r\n            self.$audio_area.removeClass('playing');\r\n        },\r\n        stop: function() {\r\n\r\n        },\r\n        events: function() {\r\n            var self = this;\r\n            var updateTime;\r\n            self.$audio_area.on('click', function() {\r\n                self.play();\r\n                if (!updateTime) {\r\n                    self.updateTotalTime();\r\n                    updateTime = true;\r\n                }\r\n            });\r\n        },\r\n        //正在播放\r\n        run: function() {\r\n            var self = this;\r\n            self.animateProgressBarPosition();\r\n            if (self.Audio.ended) {\r\n                self.pause();\r\n            }\r\n        },\r\n        //进度条\r\n        animateProgressBarPosition: function() {\r\n            var self = this,\r\n                percentage = (self.Audio.currentTime * 100 / self.Audio.duration) + '%';\r\n            if (percentage == \"NaN%\") {\r\n                percentage = 0 + '%';\r\n            }\r\n            var styles = {\r\n                \"width\": percentage\r\n            };\r\n            self.$audio_progress.css(styles);\r\n        },\r\n        //获取时间秒\r\n        getAudioSeconds: function(string) {\r\n            var self = this,\r\n                string = string % 60;\r\n            string = self.addZero(Math.floor(string), 2);\r\n            (string < 60) ? string = string: string = \"00\";\r\n            return string;\r\n        },\r\n        //获取时间分\r\n        getAudioMinutes: function(string) {\r\n            var self = this,\r\n                string = string / 60;\r\n            string = self.addZero(Math.floor(string), 2);\r\n            (string < 60) ? string = string: string = \"00\";\r\n            return string;\r\n        },\r\n        //时间+0\r\n        addZero: function(word, howManyZero) {\r\n            var word = String(word);\r\n            // while (word.length < howManyZero) word = \"0\" + word;\r\n            return word;\r\n        },\r\n        //更新总时间\r\n        updateTotalTime: function(time) {\r\n             var self = this,\r\n                time = time || self.Audio.duration,\r\n                minutes = self.getAudioMinutes(time),\r\n                seconds = self.getAudioSeconds(time),\r\n                audioTime = '';\r\n                if(minutes == \"00\"){\r\n                    audioTime = seconds + \"''\"\r\n                }else{\r\n                    audioTime = minutes + \"'\" + seconds + \"''\";\r\n                }\r\n                self.$audio_length.text(audioTime);\r\n        },\r\n        //改变音频源\r\n        changeSrc: function(src, callback) {\r\n            var self = this;\r\n            self.pause();\r\n            self.Audio.src = src;\r\n            self.play();\r\n            callback();\r\n            return this;\r\n        },\r\n\r\n    };\r\n\r\n    /*-----------------------------------------------------------------------------------------------------------\r\n    缓存同名插件\r\n    -----------------------------------------------------------------------------------------------------------*/\r\n    var old = $.fn[Plugin.pluginName];\r\n\r\n    /*-----------------------------------------------------------------------------------------------------------\r\n    定义插件，扩展$.fn，为jQuery对象提供新的插件方法\r\n    调用方式：$.fn.pluginName()\r\n    @param option {string/object}\r\n    @param args {string/object}\r\n    -----------------------------------------------------------------------------------------------------------*/\r\n    $.fn[Plugin.pluginName] = function(option, args) {\r\n        return this.each(function() {\r\n            var $this = $(this);\r\n\r\n            var data = $this.data(Plugin.dataName);\r\n            var options = typeof option == 'object' && option;\r\n\r\n            //只实例化一次，后续如果再次调用了该插件时，则直接获取缓存的对象\r\n            if (!data) {\r\n                $this.data(Plugin.dataName, (data = new Plugin(this, options)));\r\n            }\r\n            //如果插件的参数是一个字符串，则直接调用插件的名称为此字符串方法\r\n            if (typeof option == 'string') data[option](args);\r\n            return this;\r\n        });\r\n    };\r\n\r\n    $.fn[Plugin.pluginName].Constructor = Plugin;\r\n\r\n    /*-----------------------------------------------------------------------------------------------------------\r\n    为插件增加 noConflict 方法，在插件重名时可以释放控制权\r\n    @returns {*}\r\n    -----------------------------------------------------------------------------------------------------------*/\r\n    $.fn[Plugin.pluginName].noConflict = function() {\r\n        $.fn[Plugin.pluginName] = old;\r\n        return this\r\n    };\r\n})(window.Zepto || window.jQuery);\r\n\r\nclass ArticleShareController extends Controller {\r\n    constructor(opts){\r\n        super();\r\n\r\n        var self = this;\r\n        require(['../components/bigdata.min'], function(BigData){\r\n            BigData.init(self);\r\n            BigData.bigData({\r\n                \"pageName\": \"1022\",\r\n                \"pageParam\":{\r\n                    \"article_id\": $.trim($('#articleId').val())\r\n                },            \r\n                \"type\": 1\r\n            });\r\n            self.BigData = BigData;\r\n        });\r\n\r\n        // 设置参数\r\n        this.setOptions(opts)\r\n        this.setArticleFont()\r\n          // 初始化操作        \r\n        this.articleId = $.trim($('#articleId').val())\r\n        this.cityId = $.trim($('#cityId').val())\r\n          // 初始化评论列表\r\n        this.refreshComment()\r\n          // 绑定事件\r\n        this.bindEvent()\r\n        this.convertLink()\r\n        this.convertVideo()\r\n        this.openInApp()\r\n        this.initWxShare()\r\n        this.loginStatus = false\r\n        this.textareaHeight = $('.commentArea').find('textarea').height()\r\n        this.wkBigDataParams = {\r\n          pageName: 1022,\r\n          pageParam: {\r\n            article_id: this.articleId\r\n          },\r\n          eventName: '',\r\n          eventParam: {},\r\n          nextPageName: '',\r\n          nextPageParam: {},\r\n          city: $('#cityId').val()\r\n        }\r\n  \r\n        // 如果hash==\"#comment-box\",表示从栏目列表页跳转过来且已判断了用户是否登录了\r\n        // 则评论的输入框获取焦点\r\n        if (location.href.indexOf('#') > 0) {\r\n          if (location.href.slice(location.href.lastIndexOf('#')) == '#comment-box') {\r\n            clearTimeout(st)\r\n            var st = setTimeout(function() {\r\n              $('html,body').scrollTop($('#comment-box').offset().top - 200)\r\n            }, 300)\r\n          }\r\n        }\r\n    }\r\n\r\n    initWxShare() {\r\n        // var classSelf = this\r\n        // var wxShare = new WxShare({\r\n        //   successCB: function() {\r\n        //     classSelf.Operation.share({\r\n        //       articleId: classSelf.articleId\r\n        //     })\r\n        //   }\r\n        // })\r\n\r\n        // 微信分享功能已经打包进了app.min.js中，会自动在页面中寻找id为wechatTitle、wechatContent和wechatImgUrl的隐藏域，分别对应微信分享的标题、内容和图片！\r\n    }\r\n\r\n    openInApp() {\r\n        // 项目中【打开App】是一个组件，.download-app .download是这个组件使用的class\r\n        //nativeSchema是lib/wakeupApp提供的功能，已经打包到app.min.js中了，直接用就好了\r\n        var cityId = this.cityId;\r\n        var articleId = this.articleId;\r\n        $(\".download-app .download\").click(()=> {\r\n            nativeSchema.loadSchema({               \r\n                schema : \"external_call/parameter?t=0&bt=30&cd=\" + cityId + \"&articleId=\"+ articleId ,  // 通过NN打开某个链接\r\n                protocal : \"wkzf\" , //schema头协议，实际情况填写\r\n                loadWaiting : \"1500\" , //发起唤醒请求后，会等待loadWaiting时间，超时则跳转到failUrl，默认3000ms                \r\n                failUrl : \"https://m.wkzf.com/download/transit?from=esfDetail\" ,  //唤起失败时的跳转链接，默认跳转到下载页\r\n                // apk信息,请根据实际情况填写\r\n                apkInfo : {\r\n                    PKG : \"com.wukong.ua\" ,\r\n                    CATEGORY : \"android.intent.category.DEFAULT\" ,\r\n                    ACTION : \"android.intent.action.VIEW\"\r\n                }\r\n            }) ;\r\n        }) ;\r\n        // var app = new App({\r\n        //     element: '.downbtn',\r\n        //     androidSchemes: 'wkzf://external_call/parameter?t=0&bt=30&cd=' + this.cityId + '&articleId=' + this.articleId,\r\n        //     isoSchemes: 'wkzf://external_call/parameter?t=0&bt=30&cd=' + this.cityId + '&articleId=' + this.articleId,\r\n        //     androidDownloadLink: '/download/transit?from=articleDetail',\r\n        //     iosDownloadLink: '/download/transit?from=articleDetail'\r\n        // })\r\n    }\r\n\r\n    getQueryString(params, name) {\r\n        var reg = new RegExp('(^|&)' + name + '=([^&]*)(&|$)', 'i');\r\n        var r = params.match(reg); // 获取url中\"?\"符后的字符串并正则匹配\r\n        var context = '';\r\n        if (r != null)\r\n            context = r[2];\r\n        reg = null;\r\n        r = null;\r\n        return context == null || context == '' || context == 'undefined' ? '' : context;\r\n    }\r\n\r\n\r\n    convertLink() {\r\n        var classSelf = this;\r\n        var links = $('.article-content').find('a');// 找出.article-content中所有的a标签\r\n        if (!links || !links.length) return false;\r\n        $.each(links, function(index, item) {// 遍历所有a标签，对其进行处理\r\n            var $item = $(item);\r\n            var href = $item.attr('href');\r\n            if(!href) return;\r\n            var params = href.split('?');\r\n            var articleId, categoryId;\r\n            if (params) {\r\n            if (params[0] === 'wkzf://discovery/parameter?articleId=') {// 我读书少，这里怎么还能有问号，不是用问号分割的吗，先保留吧\r\n                if (params[1]) {\r\n                articleId = classSelf.getQueryString(params[1], 'articleId')\r\n                $item.attr('href', '/article/app-share.' + articleId + '.html')\r\n                }\r\n            } else if (params[0] === 'wkzf://discovery/parameter?categoryId=') {\r\n                if (params[1]) {\r\n                categoryId = classSelf.getQueryString(params[1], 'categoryId')\r\n                $item.attr('href', '/category/app.' + categoryId + '.html?cityId=' + classSelf.cityId)\r\n                }\r\n            }\r\n            }\r\n        })\r\n    }\r\n\r\n\r\n    convertVideo() {\r\n        var videos = $('.article-content').find('embed');\r\n        if (!videos || !videos.length) return false;\r\n        $.each(videos, function(index, item) {\r\n            var $item = $(item);\r\n            var coverUrl = $.trim($('#coverUrl').val());\r\n            var $video, audio;\r\n            var src = $item.attr('src');\r\n            var split = src && src.split('.');\r\n            var type = split[split.length - 1];\r\n            if (type.toLowerCase() === 'mp3') {\r\n                audio = '<p class=\"weixinAudio\">';\r\n                audio += '<audio src=\"' + src + '\" id=\"media\" width=\"1\" height=\"1\" preload=\"auto\"></audio>';\r\n                audio += '<span id=\"audio_area\" class=\"db audio_area\">';\r\n                audio += '<span class=\"audio_arrow_back\"></span>';\r\n                audio += '<span class=\"audio_arrow\"></span>';\r\n                audio += '<span class=\"audio_wrp db\">';\r\n                audio += '<span class=\"audio_play_area\">';\r\n                audio += '<i class=\"icon_audio_default\"></i>';\r\n                audio += '<i class=\"icon_audio_playing\"></i>';\r\n                audio += '</span>';\r\n                audio += '<span id=\"audio_progress\" class=\"progress_bar\"></span>';\r\n                audio += '</span>';\r\n                audio += '</span>';\r\n                audio += '<span id=\"audio_length\" class=\"audio_length tips_global\"></span>';\r\n                audio += '</p>';\r\n                $item.after($(audio));\r\n                $item.remove();\r\n            } else {\r\n                $video = $('<video src=\"' + $item.attr('src') + '\" controls=\"controls\">您的浏览器不支持 video 标签。</video>');\r\n                $video.attr({\r\n                    poster: coverUrl,\r\n                    preload: 'auto'\r\n                });\r\n                $item.attr({\r\n                    'type': '',\r\n                    'width': '100%',\r\n                    'height': '100%'\r\n                });\r\n                $item.after($video);\r\n                $item.remove();\r\n            }\r\n            $('.weixinAudio').wechatAudio({\r\n                autoplay: false\r\n            });\r\n        });\r\n    }\r\n\r\n    refreshComment() {\r\n        var classSelf = this;\r\n        var PN = new Pagination({\r\n            prePages:4,\r\n            callback: function(pageIndex) {\r\n                pageIndex = pageIndex || 1\r\n                var itemIndex = (pageIndex - 1) * 10\r\n                classSelf.request(classSelf.apiUrl.essay.commentList, {\r\n                    articleId: classSelf.articleId,\r\n                    pageIndex: itemIndex\r\n                },{\r\n                    successCallback: function(result){\r\n                        classSelf.createCommentList(result)\r\n                        $('.pagination').empty()\r\n                        if (!result.count) {\r\n                        $('.pagination').hide()\r\n                        return false\r\n                        } else {\r\n                        $('.pagination').show()\r\n                        }\r\n                        PN.genPageNumber(pageIndex, Math.ceil(result.count / 10))\r\n                    }\r\n                });               \r\n            },\r\n            container: $('.pagination'),\r\n            numberStyle: 'page-number'\r\n        });\r\n    }\r\n    createCommentList(result) {\r\n        var html = [];\r\n        if (!result.data || !result.data.length) return false;\r\n        $('.comment-list').empty();\r\n        $.each(result.data, function(index, item) {\r\n            html.push('<div class=\"item\">');\r\n            html.push('<div class=\"commenter pb-10\">');\r\n            html.push('<img src=\"' + item.guestPhoto + '\" alt=\"\">');\r\n            html.push('<span class=\"name\">' + (item.guestNickname ? item.guestNickname.replace(':', '') : '') + '</span>');\r\n            html.push('</div>');\r\n            html.push('<div class=\"content pb-10\">' + item.commentContent + '</div>');\r\n            html.push('<div class=\"datetime\">');\r\n            html.push('<span class=\"date\">' + item.date + '</span>');\r\n            html.push('<span class=\"time\">' + item.time + '</span>');\r\n            html.push('</div>');\r\n            html.push('</div>');\r\n        })\r\n        $('.comment-list').append(html.join(''));\r\n    }\r\n\r\n    setArticleFont() {\r\n        // 不再采用lib-flexible，同时prd要求所有字体都是16px，黑体，1.75行高。在css中用!important覆盖了所有的.article-content中所有的元素了的样式了\r\n        // var isIPhone = window.navigator.appVersion.match(/iphone/gi)\r\n        // if (isIPhone) {\r\n        //     var dpr = parseInt($('[data-dpr]').attr('data-dpr')) || 1\r\n        //     $('.article-content').find('[style*=font-size]').each(function(index, ele) {\r\n        //     $(ele).css('font-size',$(ele)[0].style.fontSize.replace('px','') * dpr + 'px');\r\n        //     //$(ele).css('font-size', $(ele).css('font-size').replace('px', '') * dpr + 'px')\r\n        //     })\r\n        // }\r\n        $('.article-content [style]').removeAttr('style').removeAttr('class');\r\n        $('.article-content').show();\r\n    }\r\n\r\n    bindEvent() {\r\n        var classSelf = this;\r\n        // 收藏功能，当前没有登录所以隐去\r\n        $('.collect').on('click', function() {\r\n            var _ = $(this);\r\n            var $icon = _.find('i').first();\r\n            Login.isLoginCheck(function() {\r\n                if ($icon.hasClass('icon-shoucang')) {\r\n                    classSelf.Operation.collect({\r\n                        articleId: classSelf.articleId\r\n                    }, function() {\r\n                        $icon.removeClass('icon-shoucang').addClass('icon-yishoucang');\r\n                        classSelf.Operation.showMessage('收藏成功，可至APP收藏中查看！');\r\n                        classSelf.wkBigDataParams.eventName = 1022001;\r\n                        classSelf.wkBigDataParams.eventParam = {\r\n                            article_id: classSelf.articleId,\r\n                            collect: 1\r\n                        };\r\n                        lifang.sendWKBigData(classSelf.wkBigDataParams);\r\n                    });\r\n                }\r\n                if ($icon.hasClass('icon-yishoucang')) {\r\n                    classSelf.Operation.cancelCollection({\r\n                        articleId: classSelf.articleId\r\n                    }, function() {\r\n                        $icon.removeClass('icon-yishoucang').addClass('icon-shoucang');\r\n                        classSelf.wkBigDataParams.eventName = 1022001;\r\n                        classSelf.wkBigDataParams.eventParam = {\r\n                            article_id: classSelf.articleId,\r\n                            collect: 0\r\n                        };\r\n                        lifang.sendWKBigData(classSelf.wkBigDataParams);\r\n                    });\r\n                }\r\n            });\r\n        });\r\n\r\n        // 下载app的条\r\n        this.addListenerToDownloadApp();\r\n\r\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n        下载条的关闭按钮事件赋予\r\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n        $(\".download-app .icon-remove\").click(function(){\r\n            $(\".details-container\").css({ \"padding-bottom\" : 50 }) ;\r\n        }) ;\r\n        $(\".download-app dl\").click(function(){\r\n            var categoryId = $('#categoryId').val();\r\n            var cityId = $('#cityId').val();\r\n            location.href = \"/category/app.\"+ categoryId +\".html?cityId=\" + cityId;\r\n            classSelf.BigData.bigData({\r\n                \"pageName\": \"1022005\",\r\n                \"pageParam\":{\r\n                    \"article_id\": classSelf.articleId\r\n                },            \r\n                \"type\": 2\r\n            });\r\n        });\r\n        \r\n        // var myElement = $('.details-container');\r\n        // var mc = new Hammer(myElement[0]);\r\n\r\n        // mc.on('panup', function() {\r\n        //     if ($('body').scrollTop() > 200) {\r\n        //         $('.discovery-download').hide(0);\r\n        //     }\r\n        // });\r\n\r\n        // mc.on('pandown', function() {\r\n        //     $('.discovery-download').show(0);\r\n        // });\r\n\r\n        $('.zan').on('click', function() {\r\n            var _ = $(this);\r\n            var $icon = _.find('i').first();\r\n\r\n            if (_.hasClass('active')) {                \r\n                $.tips('您已经赞过', 2);\r\n                return;\r\n            }\r\n\r\n            //if ($icon.hasClass('icon-appraise')) {                \r\n                // classSelf.wkBigDataParams.eventName = 1022003;\r\n                // classSelf.wkBigDataParams.eventParam = {\r\n                //     article_id: classSelf.articleId\r\n                // };\r\n                // lifang.sendWKBigData(classSelf.wkBigDataParams);               \r\n\r\n                classSelf.request(classSelf.apiUrl.essay.zan, {\r\n                    articleId: classSelf.articleId\r\n                },{\r\n                    successCallback: function(data){\r\n                        if(data.status ===1 && data.data){\r\n                            var zanCount = _.children('span').text() || 0;\r\n                            if(/^\\d*$/.test(zanCount)){\r\n                                if(parseInt(zanCount)<9999){\r\n                                    zanCount = parseInt(zanCount)+1;\r\n                                }else{\r\n                                    zanCount = '1万+';\r\n                                }\r\n                            }else{\r\n                                zanCount = _.text();\r\n                            }\r\n                            _.addClass('active').find('span').text(data.data);\r\n                           \r\n                        }else{\r\n    \r\n                        }\r\n                    }\r\n                });  \r\n        });\r\n\r\n        $('[name=\"comment\"]').keyup(function() {\r\n            var _ = $(this);\r\n            var val = _.val();\r\n            //console.log(this.scrollHeight);\r\n            //_.height(this.scrollHeight);\r\n            if (val && val.length > 0) {\r\n                _.parent().css('border-color', '#76B4E8');\r\n                $('.comment .submit').css({\r\n                    'color': '#4081D6',\r\n                    'border-color': '#4081D6'\r\n                });\r\n            } else {\r\n                _.parent().css('border-color', '#E4E4E4')\r\n                $('.comment .submit').css({\r\n                    'color': '#999',\r\n                    'border-color': '#999'\r\n                });\r\n            }\r\n        });\r\n\r\n        $('.comment').on('click', '.cancel', function() {\r\n            var com = $('[name=\"comment\"]');\r\n            com.val('').height(classSelf.textareaHeight || 75);\r\n            com.parent().css('border-color', '#E4E4E4');\r\n            $('.comment .submit').css({\r\n                'color': '#999',\r\n                'border-color': '#999'\r\n            });\r\n        });\r\n\r\n        var commiting = false;\r\n        //评论提交事件\r\n        $('.comment').on('click', '.submit', function(event) {\r\n            event.preventDefault();\r\n            if(commiting){\r\n                return;\r\n            }\r\n\r\n            var $textarea = $('[name=comment]');\r\n\r\n            var comment = $.trim($textarea.val());\r\n            if (comment.length === 0) {                \r\n                $.tips('评论内容不能为空', 1);\r\n                return false;\r\n            }     \r\n\r\n            $('.comment .submit').css({\r\n                'color': '#999',\r\n                'border-color': '#999'\r\n            });\r\n            commiting = true;\r\n            classSelf.request(classSelf.apiUrl.essay.comment, {\r\n                articleId: classSelf.articleId,\r\n                comment: comment\r\n            },{\r\n                successCallback: function(data){                    \r\n                    $('.comment .submit').css({\r\n                        'color': '#4081D6',\r\n                        'border-color': '#4081D6'\r\n                    });\r\n                    commiting = false;\r\n                    if(data.status===1 && data.data){                        \r\n                        $.tips('评论成功', 2);                        \r\n                        var $count = $('#comment-box').find('.count');\r\n                        var count = parseInt($count.text()) || 0;\r\n                        var text = $count.text();\r\n                        if (count) {\r\n                            if(data.data.commentNumStr){\r\n                                $count.text(data.data.commentNumStr)\r\n                            }else{\r\n                                if(/^\\d*$/.test(text)){\r\n                                    if(parseInt(text)<9999){\r\n                                        $count.text(parseInt(text) + 1)\r\n                                    }else{\r\n                                        $count.text('1万+');\r\n                                    }\r\n                                }\r\n                            }\r\n                        } else {\r\n                            $('#comment-box').find('.title').empty().append('评论（<span class=\"count\">1</span> )');\r\n                        }\r\n                        $('.no-commet').remove();\r\n                        $textarea.val('');\r\n                        $('.comment .submit').css({\r\n                            'color': '#999',\r\n                            'border-color': '#999'\r\n                        });\r\n                        $('html,body').scrollTop($('#comment-box').offset().top - 200);                        \r\n                        // classSelf.wkBigDataParams.eventName = 1022002;\r\n                        // classSelf.wkBigDataParams.eventParam = {\r\n                        //     article_id: classSelf.articleId\r\n                        // };\r\n                        // lifang.sendWKBigData(classSelf.wkBigDataParams);\r\n                        classSelf.refreshComment();\r\n                    }else{                        \r\n                        $.tips('评论失败', 2);\r\n                    }\r\n                }\r\n            });            \r\n        });\r\n\r\n        window.addEventListener('resize', function(e) {\r\n            var $comment = $('[name=\"comment\"]');\r\n            $comment.scrollIntoView(false);\r\n        });\r\n    }\r\n\r\n    setOptions(opts) {\r\n        var defaults = {};\r\n        $.extend(true, this.options = {}, defaults, opts);\r\n    }\r\n}\r\n\r\n/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n类的初始化\r\n-----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n$(document).ready(function() {\r\n    new ArticleShareController;\r\n});"]}