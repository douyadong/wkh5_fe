{"version":3,"sources":["city/list.min.js"],"names":["cityListController","tableClick","choseCity","$","cookie","request","apiUrl","common","getCityByLatLon","successCallback","data","city","html","cityName","length","css","height","click","siblings","removeClass","addClass","indexP","index","show","hide","pinyin","cityId","self","attr","backOrigin","url","window","location","href","path","Controller","document","ready"],"mappings":"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","file":"list.min.js","sourcesContent":["/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n 1. 项目名称：悟空找房h5\r\n 2. 页面名称：city/list(城市列表)\r\n 3. 作者：liyang@lifang.com\r\n -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\nclass cityListController extends Controller {\r\n    constructor() {\r\n        super();\r\n        this.tableClick();\r\n        this.choseCity();\r\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n        根据定位是否成功显示或隐藏定位的信息\r\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n        if ($.cookie('locationLatitude') && $.cookie('locationLongitude')){\r\n                this.request(this.apiUrl.common.getCityByLatLon, { \"latitude\" : $.cookie('locationLatitude') , \"longitude\" : $.cookie('locationLongitude') } ,{\r\n                    successCallback(data){\r\n                        let city = data.data ;\r\n                        $('.location').html( city.cityName);\r\n                    }\r\n                })\r\n        }else {\r\n            if($.cookie('location_cityName')){\r\n                $('.location').html( $.cookie('location_cityName'));\r\n            }else {\r\n                $('.location').html( \"定位失败\");\r\n            }\r\n            if ($.cookie('location_deniedName')){\r\n                $('.location').html( $.cookie('location_deniedName'));\r\n            }\r\n        }\r\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n        动态渲染高度 和头部的置顶\r\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n        if (!($('.table-name').length > 0)){\r\n        $('.dic-name').css('position','static');\r\n        $('.city-list').css('margin-top',0);\r\n        }else {\r\n            $('.city-list').css('margin-top',$('.dic-name').height());\r\n        }\r\n    }\r\n    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n   table点击事件\r\n   -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n    tableClick() {\r\n      $(\".table-name > ul >li \").click(function () {\r\n          $(this).siblings().removeClass('table-active');\r\n          $(this).addClass('table-active');\r\n          let indexP = $(this).index();\r\n          if  (indexP == 0){\r\n              $('.domestic-list').show();\r\n              $('.oversea-list').hide();\r\n          }else if (indexP == 1){\r\n              $('.domestic-list').hide();\r\n              $('.oversea-list').show();\r\n          }\r\n      });\r\n    };\r\n     /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n    选取城市并跳转\r\n    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n    choseCity() {\r\n        let pinyin ='';\r\n        let cityId ='';\r\n        let self = this;\r\n        $('.inside-city-list >ul > li').click(function () {\r\n            pinyin =  $(this).attr('data-pinyin');\r\n            cityId =  $(this).attr('data-cityid');\r\n            let cityName =  $(this).html();\r\n            self.backOrigin(pinyin,cityId,cityName)\r\n        });\r\n    }\r\n\r\n    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n    返回最终的来源   @businessType : 业务类型，可以是old (二手房) | new (新房) | rent (租房) | xfPrice,newTrend (新房价格行情) | esfPrice ,esfTrend(新房价格行情)，只当前模块是哪个业务\r\n    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n    backOrigin(pinyin,cityId,cityName) {\r\n        if (pinyin && cityId){\r\n            if (url('?businessType') == \"old\") {\r\n                window.location.href = '/' + pinyin + \"/esf\"\r\n            } else if (url('?businessType') == \"new\") {\r\n                window.location.href = '/' + pinyin + \"/xflist\"\r\n            } else if (url('?businessType') == \"rent\") {\r\n                window.location.href = '/' + pinyin + \"/rent/?channel=\"+url('?channel')\r\n            } else if(url('?businessType') == \"xfPrice\") {\r\n                window.location.href = \"/xfPrice/price.html?regionId=\"+cityId+\"&regionType=1\"\r\n            }else if(url('?businessType') == \"esfPrice\") {\r\n                window.location.href = \"/esfPrice/price.html?regionId=\"+cityId+\"&regionType=1\"\r\n            } else if (url('?businessType') == \"esfTrend\"){\r\n                window.location.href = \"/\"+pinyin+\"/trend/esf\"\r\n            } else if (url('?businessType') == \"newTrend\"){\r\n                window.location.href = \"/\"+pinyin+\"/trend/new\"\r\n            }\r\n            $.cookie('selectedCityPinyin',pinyin,{path: '/',});\r\n            $.cookie('selectedCityId',cityId,{path: '/',});\r\n            $.cookie('selectedCityName',cityName,{path: '/',});\r\n        }\r\n    }\r\n}\r\n    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n    类的初始化\r\n    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n$(document).ready(function () {\r\n    new cityListController;\r\n});"]}