{"version":3,"sources":["city/list.min.js"],"names":["cityListController","tableClick","choseCity","$","cookie","html","hide","length","css","height","click","siblings","removeClass","addClass","indexP","index","show","pinyin","cityId","self","attr","cityName","backOrigin","url","location","search","theRequest","indexOf","str","substr","strs","split","i","GetRequest","window","href","path","Controller","document","ready"],"mappings":"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","file":"list.min.js","sourcesContent":["/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n 1. 项目名称：悟空找房h5\r\n 2. 页面名称：city/list(城市列表)\r\n 3. 作者：liyang@lifang.com\r\n -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\nclass cityListController extends Controller {\r\n    constructor() {\r\n        super();\r\n        this.tableClick();\r\n        this.choseCity();\r\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n       根据定位是否成功显示或隐藏定位的信息\r\n       -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n        if($.cookie('location_cityName')){\r\n            $('.location').html( $.cookie('location_cityName'));\r\n        }else {\r\n            $('.inside-city').hide();\r\n        }\r\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n        动态渲染高度 和头部的置顶\r\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n        if (!($('.table-name').length > 0)){\r\n        $('.dic-name').css('position','static');\r\n        $('.city-list').css('margin-top',0);\r\n        }else {\r\n            $('.city-list').css('margin-top',$('.dic-name').height());\r\n        }\r\n    }\r\n    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n   table点击事件\r\n   -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n    tableClick() {\r\n      $(\".table-name > ul >li \").click(function () {\r\n          $(this).siblings().removeClass('table-active');\r\n          $(this).addClass('table-active');\r\n          let indexP = $(this).index();\r\n          if  (indexP == 0){\r\n              $('.domestic-list').show();\r\n              $('.oversea-list').hide();\r\n          }else if (indexP == 1){\r\n              $('.domestic-list').hide();\r\n              $('.oversea-list').show();\r\n          }\r\n      });\r\n    };\r\n     /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n    选取城市并跳转\r\n    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n    choseCity() {\r\n        let pinyin ='';\r\n        let cityId ='';\r\n        let self = this;\r\n        $('.inside-city-list >ul > li').click(function () {\r\n            pinyin =  $(this).attr('data-pinyin');\r\n            cityId =  $(this).attr('data-cityid');\r\n            let cityName =  $(this).html();\r\n            self.backOrigin(pinyin,cityId,cityName)\r\n        });\r\n\r\n    }\r\n    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n    截取？后面的参数\r\n    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n    GetRequest() {\r\n        let url = location.search;\r\n        let theRequest = {};\r\n        if (url.indexOf(\"?\") !== -1) {\r\n            let str = url.substr(1);\r\n            let strs = str.split(\"&\");\r\n            for(let i = 0; i < strs.length; i ++) {\r\n                theRequest[strs[i].split(\"=\")[0]] = strs[i].split(\"=\")[1];\r\n            }\r\n        }\r\n        return theRequest;\r\n    }\r\n    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n    返回最终的来源   @businessType : 业务类型，可以是old (二手房) | new (新房) | rent (租房) | xfPrice (新房价格行情) | esfPrice (新房价格行情)，只当前模块是哪个业务\r\n    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n    backOrigin(pinyin,cityId,cityName) {\r\n        if (this.GetRequest()['businessType'] == \"old\") {\r\n            window.location.href = '/' + pinyin + \"/esf\"\r\n        } else if (this.GetRequest()['businessType'] == \"new\") {\r\n            window.location.href = '/' + pinyin + \"/xflist\"\r\n        } else if (this.GetRequest()['businessType'] == \"rent\") {\r\n            window.location.href = '/' + pinyin + \"/rent/?channel=\"+this.GetRequest()['channel']\r\n        } else if(this.GetRequest()['businessType'] == \"xfPrice\") {\r\n            window.location.href = \"/xfPrice/price.html?regionId=\"+cityId+\"&regionType=1\"\r\n        }else if(this.GetRequest()['businessType'] == \"esfPrice\") {\r\n            window.location.href = \"/esfPrice/price.html?regionId=\"+cityId+\"&regionType=1\"\r\n        }\r\n        $.cookie('userSelectedCity',pinyin,{path: '/',});\r\n        $.cookie('userSelectedCityId',cityId,{path: '/',});\r\n        $.cookie('userSelectedCityName',cityName,{path: '/',});\r\n    }\r\n}\r\n    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n    类的初始化\r\n    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n$(document).ready(function () {\r\n    new cityListController;\r\n});"]}