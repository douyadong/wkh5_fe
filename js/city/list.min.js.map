{"version":3,"sources":["city/list.min.js"],"names":["_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","_createClass","defineProperties","target","props","i","length","descriptor","defineProperty","key","protoProps","staticProps","cityListController","_Controller","this","_this","getPrototypeOf","tableClick","choseCity","$","cookie","request","apiUrl","common","getCityByLatLon","latitude","longitude","successCallback","data","city","html","cityName","css","height","click","siblings","removeClass","addClass","indexP","index","show","hide","pinyin","cityId","attr","backOrigin","url","window","location","href","path","Controller","document","ready"],"mappings":"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","file":"list.min.js","sourcesContent":["/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n 1. 项目名称：悟空找房h5\r\n 2. 页面名称：city/list(城市列表)\r\n 3. 作者：liyang@lifang.com\r\n -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\nclass cityListController extends Controller {\r\n    constructor() {\r\n        super();\r\n        this.tableClick();\r\n        this.choseCity();\r\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n        根据定位是否成功显示或隐藏定位的信息\r\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n        if ($.cookie('locationLatitude') && $.cookie('locationLongitude')){\r\n                this.request(this.apiUrl.common.getCityByLatLon, { \"latitude\" : $.cookie('locationLatitude') , \"longitude\" : $.cookie('locationLongitude') } ,{\r\n                    successCallback(data){\r\n                        let city = data.data ;\r\n                        $('.location').html( city.cityName);\r\n                    }\r\n                })\r\n        }else {\r\n            if($.cookie('location_cityName')){\r\n                $('.location').html( $.cookie('location_cityName'));\r\n            }else {\r\n                $('.location').html( \"定位失败\");\r\n            }\r\n            if ($.cookie('location_deniedName')){\r\n                $('.location').html( $.cookie('location_deniedName'));\r\n            }\r\n        }\r\n        /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n        动态渲染高度 和头部的置顶\r\n        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n        if (!($('.table-name').length > 0)){\r\n        $('.dic-name').css('position','static');\r\n        $('.city-list').css('margin-top',0);\r\n        }else {\r\n            $('.city-list').css('margin-top',$('.dic-name').height());\r\n        }\r\n    }\r\n    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n   table点击事件\r\n   -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n    tableClick() {\r\n      $(\".table-name > ul >li \").click(function () {\r\n          $(this).siblings().removeClass('table-active');\r\n          $(this).addClass('table-active');\r\n          let indexP = $(this).index();\r\n          if  (indexP == 0){\r\n              $('.domestic-list').show();\r\n              $('.oversea-list').hide();\r\n          }else if (indexP == 1){\r\n              $('.domestic-list').hide();\r\n              $('.oversea-list').show();\r\n          }\r\n      });\r\n    };\r\n     /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n    选取城市并跳转\r\n    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n    choseCity() {\r\n        let pinyin ='';\r\n        let cityId ='';\r\n        let self = this;\r\n        $('.inside-city-list >ul > li').click(function () {\r\n            pinyin =  $(this).attr('data-pinyin');\r\n            cityId =  $(this).attr('data-cityid');\r\n            let cityName =  $(this).html();\r\n            self.backOrigin(pinyin,cityId,cityName)\r\n        });\r\n    }\r\n\r\n    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n    返回最终的来源   @businessType : 业务类型，可以是old (二手房) | new (新房) | rent (租房) | xfPrice,newTrend (新房价格行情) | esfPrice ,esfTrend(新房价格行情)，只当前模块是哪个业务\r\n    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n    backOrigin(pinyin,cityId,cityName) {\r\n        if (pinyin && cityId){\r\n            if (url('?businessType') == \"old\") {\r\n                window.location.href = '/' + pinyin + \"/esf\"\r\n            } else if (url('?businessType') == \"new\") {\r\n                window.location.href = '/' + pinyin + \"/xflist\"\r\n            } else if (url('?businessType') == \"rent\") {\r\n                window.location.href = '/' + pinyin + \"/rent/?channel=\"+url('?channel')\r\n            } else if(url('?businessType') == \"xfPrice\") {\r\n                window.location.href = \"/xfPrice/price.html?regionId=\"+cityId+\"&regionType=1\"\r\n            }else if(url('?businessType') == \"esfPrice\") {\r\n                window.location.href = \"/esfPrice/price.html?regionId=\"+cityId+\"&regionType=1\"\r\n            } else if (url('?businessType') == \"esfTrend\"){\r\n                window.location.href = \"/\"+pinyin+\"/trend/esf\"\r\n            } else if (url('?businessType') == \"newTrend\"){\r\n                window.location.href = \"/\"+pinyin+\"/trend/new\"\r\n            }\r\n            $.cookie('selectedCityPinyin',pinyin,{path: '/',});\r\n            $.cookie('selectedCityId',cityId,{path: '/',});\r\n            $.cookie('selectedCityName',cityName,{path: '/',});\r\n        }\r\n    }\r\n}\r\n    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n    类的初始化\r\n    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/\r\n$(document).ready(function () {\r\n    new cityListController;\r\n});"]}