/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
 1. 项目名称：悟空找房h5
 2. 页面名称：xf/baseinfo(新房-基本信息页)
 3. 作者：tangxuyang@lifang.com
 -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/
 class BaseInfoController extends Controller {
    constructor() {
        super() ;
         /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
        组件逻辑的引入
        -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/    
        let self = this ;
        require([ '../components/bigdata.min'],function(BigData){        
            BigData.init(self) ;
            BigData.bigData({
                pageName : '1227' ,
                pageParam : {
                    new_house_id : $('#subEstateId').val()
                } ,
                channel : self.GetRequest()['channel'] || "" ,
                type : 1
            }) ;            
        }) ; 

        // 返回按钮
        $('.icon-back').click(function(){
            history.back();
        });
    } ;
    /*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
    截取？后面的参数
    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/
    GetRequest() {
        let url = location.search;
        let theRequest = {};
        if (url.indexOf("?") !== -1) {
            let str = url.substr(1);
            let strs = str.split("&");
            for(var i = 0; i < strs.length; i ++) {
                theRequest[strs[i].split("=")[0]]=strs[i].split("=")[1];
            }
        }
        // console.log(theRequest);
        return theRequest;
    } 
}

/*-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
类的初始化
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------*/
$(document).ready(function() {
   new BaseInfoController;
});
